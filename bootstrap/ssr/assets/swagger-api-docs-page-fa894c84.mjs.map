{"version":3,"file":"swagger-api-docs-page-fa894c84.mjs","sources":["../../../common/resources/client/swagger/swagger-api-docs-page.tsx"],"sourcesContent":["import SwaggerUI from 'swagger-ui-react';\r\nimport 'swagger-ui-react/swagger-ui.css';\r\nimport { Settings } from '../core/settings/settings';\r\nimport { useMemo } from 'react';\r\nimport { Navbar } from '../ui/navigation/navbar/navbar';\r\nimport { Footer } from '../ui/footer/footer';\r\nimport { useSettings } from '../core/settings/use-settings';\r\nimport './swagger.css';\r\nimport Swaggersidebar from './swaggersidebar';\r\n\r\nexport default function SwaggerApiDocsPage() {\r\n  const settings = useSettings();\r\n\r\n  const plugins = useMemo(() => {\r\n    return getPluginsConfig(settings);\r\n  }, [settings]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-alt flex\">\r\n      <div className=\"h-screen bg-gray-100 sticky top-0\">\r\n        <Swaggersidebar />\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col\">\r\n        <Navbar />\r\n\r\n        <div className=\"flex-1 p-4 overflow-y-auto\">\r\n          <SwaggerUI\r\n            url={`${settings.base_url}/swagger.yaml`}\r\n            plugins={plugins}\r\n            onComplete={(system) => {\r\n              const hash = location.hash.slice(1);\r\n              if (hash) {\r\n                const el = document.querySelector(\r\n                  `#operations-${hash.replace(/\\//g, '-')}`,\r\n                );\r\n                if (el) {\r\n                  el.scrollIntoView();\r\n                  el.querySelector('button')?.click();\r\n                }\r\n              }\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <Footer className=\"px-20\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getPluginsConfig(settings: Settings) {\r\n  return [\r\n    {\r\n      statePlugins: {\r\n        spec: {\r\n          wrapActions: {\r\n            updateSpec: (oriAction: any) => {\r\n              return (spec: any) => {\r\n                // Replace site name\r\n                spec = spec.replaceAll('SITE_NAME', settings.branding.site_name);\r\n                // Replace site URL\r\n                spec = spec.replaceAll('SITE_URL', settings.base_url);\r\n                return oriAction(spec);\r\n              };\r\n            },\r\n            updateJsonSpec: (oriAction: any) => {\r\n              return (spec: any) => {\r\n                spec.servers = [{ url: `${settings.base_url}/api/v1` }];\r\n                return oriAction(spec);\r\n              };\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  ];\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,SAAwB,qBAAqB;AAC3C,QAAM,WAAW;AAEX,QAAA,UAAU,QAAQ,MAAM;AAC5B,WAAO,iBAAiB,QAAQ;AAAA,EAAA,GAC/B,CAAC,QAAQ,CAAC;AAGX,SAAA,qBAAC,OAAI,EAAA,WAAU,4BACb,UAAA;AAAA,IAAA,oBAAC,OAAI,EAAA,WAAU,qCACb,UAAA,oBAAC,iBAAe,CAAA,GAClB;AAAA,IAGA,qBAAC,OAAI,EAAA,WAAU,wBACb,UAAA;AAAA,MAAA,oBAAC,QAAO,EAAA;AAAA,MAER,oBAAC,OAAI,EAAA,WAAU,8BACb,UAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,KAAK,GAAG,SAAS,QAAQ;AAAA,UACzB;AAAA,UACA,YAAY,CAAC,WAAW;;AACtB,kBAAM,OAAO,SAAS,KAAK,MAAM,CAAC;AAClC,gBAAI,MAAM;AACR,oBAAM,KAAK,SAAS;AAAA,gBAClB,eAAe,KAAK,QAAQ,OAAO,GAAG,CAAC;AAAA,cAAA;AAEzC,kBAAI,IAAI;AACN,mBAAG,eAAe;AACf,yBAAA,cAAc,QAAQ,MAAtB,mBAAyB;AAAA,cAC9B;AAAA,YACF;AAAA,UACF;AAAA,QAAA;AAAA,MAAA,GAEJ;AAAA,MAEA,oBAAC,QAAO,EAAA,WAAU,QAAQ,CAAA;AAAA,IAAA,GAC5B;AAAA,EACF,EAAA,CAAA;AAEJ;AAEA,SAAS,iBAAiB,UAAoB;AACrC,SAAA;AAAA,IACL;AAAA,MACE,cAAc;AAAA,QACZ,MAAM;AAAA,UACJ,aAAa;AAAA,YACX,YAAY,CAAC,cAAmB;AAC9B,qBAAO,CAAC,SAAc;AAEpB,uBAAO,KAAK,WAAW,aAAa,SAAS,SAAS,SAAS;AAE/D,uBAAO,KAAK,WAAW,YAAY,SAAS,QAAQ;AACpD,uBAAO,UAAU,IAAI;AAAA,cAAA;AAAA,YAEzB;AAAA,YACA,gBAAgB,CAAC,cAAmB;AAClC,qBAAO,CAAC,SAAc;AACf,qBAAA,UAAU,CAAC,EAAE,KAAK,GAAG,SAAS,QAAQ,WAAW;AACtD,uBAAO,UAAU,IAAI;AAAA,cAAA;AAAA,YAEzB;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EAAA;AAEJ;"}