import{r as f,bI as rt,bl as yt,$ as ee,bm as zt,j as r,c as T,A as De,bU as In,n as fe,g as B,bn as Sn,f as Y,az as tt,bP as Dn,bO as Ft,m as I,bV as Re,bW as Pn,bX as je,bY as ke,bZ as wt,b_ as jt,R as he,h as Tn,aG as Pe,aP as $e,aQ as ot,aR as lt,ak as se,b$ as En,c0 as Nn,c1 as it,c2 as ue,c3 as qe,c4 as We,c5 as we,c6 as Ce,c7 as Ot,d as ge,c8 as Ae,i as Ve,c9 as de,ca as Rn,cb as Mn,cc as zn,cd as Fn,ce as On,cf as $n,cg as An,u as $t,ch as Vn,bG as At,ci as Ln,ah as Vt,ai as Lt,T as F,cj as Hn,aq as pe,o as ct,Q as ut,B as te,D as Le,q as dt,v as ft,ck as Me,bF as Bn,ad as Un,b5 as Kn,aK as Ht,cl as _n,cm as Bt,bD as le,cn as qn,z as ce,t as Ut,w as K,co as Wn,cp as Yn,ab as He,b6 as Be,bQ as Kt,cq as Gn,bR as _t,x as Xn,S as Qn,bT as qt,I as Ue,Z as Zn,cr as Jn,a0 as Wt,a as Yt,k as es,b as Ke,a6 as ts,y as ht,V as ns,Y as ss,aJ as as,bS as rs,s as os,p as ls,F as is,e as cs,X as Gt,bt as Xt,cs as us,ct as ds,aY as fs}from"./main-b72b915a.js";import{E as hs,C as ms}from"./Edit-fa971e4f.js";const mt=f.createContext(null);function gs(e=!1){f.useEffect(()=>(e?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[e])}function Er({children:e,leftSidenavStatus:n,onLeftSidenavChange:t,rightSidenavStatus:s,initialRightSidenavStatus:a,onRightSidenavChange:o,name:l,leftSidenavCanBeCompact:i,height:c="h-screen",className:d,gridClassName:u="dashboard-grid",blockBodyOverflow:h=!0,...m}){gs(!h);const g=rt("(max-width: 1024px)"),v=f.useMemo(()=>l?yt(`${l}.sidenav.compact`):!1,[l])?"compact":"open",[y,x]=ee(n,g?"closed":v,t),w=f.useMemo(()=>{if(g)return"closed";if(a!=null)return a;const b=yt(`${l}.sidenav.right.position`,"open");return b??(a||"closed")},[g,l,a]),[k,C]=ee(s,w,o),N=f.useCallback(b=>{C(b),zt(`${l}.sidenav.right.position`,b)},[C,l]),M=g&&(y==="open"||k==="open");return r.jsx(mt.Provider,{value:{leftSidenavStatus:y,setLeftSidenavStatus:x,rightSidenavStatus:k,setRightSidenavStatus:N,leftSidenavCanBeCompact:i,name:l,isMobileMode:g},children:r.jsxs("div",{...m,className:T("relative isolate",u,d,c),children:[e,r.jsx(De,{children:M&&r.jsx(In,{position:"fixed",onClick:()=>{x("closed"),N("closed")}},"dashboard-underlay")})]})})}function Nr({children:e,isScrollable:n=!0}){return f.cloneElement(e,{className:T(e.props.className,n&&"overflow-y-auto stable-scrollbar","dashboard-grid-content")})}function Rr({className:e,position:n,children:t,size:s="md",mode:a,overlayPosition:o="fixed",display:l="flex",overflow:i="overflow-hidden",forceClosed:c=!1}){const{isMobileMode:d,leftSidenavStatus:u,setLeftSidenavStatus:h,rightSidenavStatus:m,setRightSidenavStatus:g}=f.useContext(mt),p=n==="left"?u:m,v=d||a==="overlay",y={open:{display:l,width:null},compact:{display:l,width:null},closed:{width:0,transitionEnd:{display:"none"}}},x=ps(p==="compact"?"compact":s);return r.jsx(fe.div,{variants:y,initial:!1,animate:c?"closed":p,transition:{type:"tween",duration:.15},onClick:w=>{const k=w.target;d&&(k.closest("button")||k.closest("a"))&&(h("closed"),g("closed"))},className:T(e,n==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","will-change-[width]",i,x,v&&`${o} bottom-0 top-0 z-20 shadow-2xl`,v&&n==="left"&&"left-0",v&&n==="right"&&"right-0"),children:f.cloneElement(t,{className:T(t.props.className,"w-full h-full",p==="compact"&&"compact-scrollbar"),isCompactMode:p==="compact"})})}function ps(e){switch(e){case"compact":return"w-80";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return e||""}}const xs=B(r.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function Mr({children:e,className:n,hideToggleButton:t,...s}){const{isMobileMode:a,leftSidenavStatus:o,setLeftSidenavStatus:l,name:i,leftSidenavCanBeCompact:c}=f.useContext(mt),d=c&&!a,u=!t&&(a||c),h=()=>{l(o==="open"?"closed":"open")},m=()=>{const g=o==="compact"?"open":"compact";zt(`${i}.sidenav.compact`,g==="compact"),l(g)};return r.jsx(Sn,{className:T("dashboard-grid-navbar",n),border:"border-b",size:"sm",toggleButton:u?r.jsx(Y,{size:"md",onClick:()=>{d?m():h()},children:r.jsx(xs,{})}):void 0,...s,children:e})}var U=(e=>(e.Select="select",e.DateRangePicker="dateRangePicker",e.SelectModel="selectModel",e.Input="input",e.BooleanToggle="booleanToggle",e.ChipField="chipField",e.Custom="custom",e))(U||{}),Ie=(e=>(e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.hasAll="hasAll",e.doesntHave="doesntHave",e.between="between",e))(Ie||{});function Qt(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function q(e){return e.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}function vs(){var t,s,a;const e=(t=tt())==null?void 0:t.settings.dates.default_timezone,n=((a=(s=tt())==null?void 0:s.user)==null?void 0:a.timezone)||e||"auto";return!n||n==="auto"?Dn():n}const A=Qt(Ft(vs()));var Rt,Mt;const Ye=((Mt=(Rt=tt())==null?void 0:Rt.i18n)==null?void 0:Mt.language)||"en",gt=[{key:0,label:I("Today"),getRangeValue:()=>({preset:0,start:A,end:q(A)})},{key:1,label:I("Yesterday"),getRangeValue:()=>({preset:1,start:A.subtract({days:1}),end:q(A).subtract({days:1})})},{key:2,label:I("This week"),getRangeValue:()=>({preset:2,start:Re(A,Ye),end:Pn(q(A),Ye)})},{key:3,label:I("Last week"),getRangeValue:()=>{const e=Re(A,Ye).subtract({days:7});return{preset:3,start:e,end:e.add({days:6})}}},{key:4,label:I("Last 7 days"),getRangeValue:()=>({preset:4,start:A.subtract({days:7}),end:q(A)})},{key:6,label:I("Last 30 days"),getRangeValue:()=>({preset:6,start:A.subtract({days:30}),end:q(A)})},{key:7,label:I("Last 3 months"),getRangeValue:()=>({preset:7,start:A.subtract({months:3}),end:q(A)})},{key:8,label:I("Last 12 months"),getRangeValue:()=>({preset:8,start:A.subtract({months:12}),end:q(A)})},{key:9,label:I("This month"),getRangeValue:()=>({preset:9,start:je(A),end:ke(q(A))})},{key:10,label:I("This year"),getRangeValue:()=>({preset:10,start:wt(A),end:jt(q(A))})},{key:11,label:I("Last year"),getRangeValue:()=>({preset:11,start:wt(A).subtract({years:1}),end:jt(q(A)).subtract({years:1})})}],Zt=B(r.jsx("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),Jt=he.forwardRef((e,n)=>{const{children:t,inputProps:s,wrapperProps:a,className:o,autoFocus:l,style:i,onClick:c}=e;return r.jsx("div",{...a,onClick:c,children:r.jsx("div",{...s,role:"group",className:T(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:n,style:i,children:r.jsx(Tn,{autoFocus:l,children:t})})})}),pt=he.forwardRef(({inputRef:e,wrapperProps:n,children:t,onBlur:s,...a},o)=>{const l=Pe(a),i=$e(o),{fieldProps:c,inputProps:d}=ot({...a,focusRef:i,labelElementType:"span"});return l.wrapper=T(l.wrapper,a.disabled&&"pointer-events-none"),r.jsx(lt,{wrapperProps:se(n,{onBlur:u=>{i.current.contains(u.relatedTarget)||s==null||s(u)},onClick:()=>{const u=En(i);u==null||u.focusFirst()}}),fieldClassNames:l,ref:i,...c,children:r.jsx(Jt,{inputProps:d,className:T(l.input,"gap-10"),ref:e,children:t})})});function bs(e){return e instanceof Nn?"day":"minute"}function nt(e,n,t){return n!=null&&e.compare(n)<0||t!=null&&e.compare(t)>0}function en(e,n){const t=it(),[s,a]=f.useState(!1),o=n.closeDialogOnSelection??!0,l=n.granularity||bs(e),i=n.min?ue(n.min,t):void 0,c=n.max?ue(n.max,t):void 0;return{timezone:t,granularity:l,min:i,max:c,calendarIsOpen:s,setCalendarIsOpen:a,closeDialogOnSelection:o}}function xt(){const e=it();return f.useMemo(()=>Ft(e),[e])}function ys(e){var G,_;const n=xt(),[t,s]=f.useState({start:(!e.value||!e.value.start)&&!((G=e.defaultValue)!=null&&G.start),end:(!e.value||!e.value.end)&&!((_=e.defaultValue)!=null&&_.end)}),a=e.onChange,[o,l]=ee(e.value?Xe(e.value,n):void 0,e.value?void 0:Xe(e.defaultValue,n),j=>{s({start:!1,end:!1}),a==null||a(j)}),{min:i,max:c,granularity:d,timezone:u,calendarIsOpen:h,setCalendarIsOpen:m,closeDialogOnSelection:g}=en(o.start,e),p=f.useCallback(()=>{s({start:!0,end:!0}),l(Xe(null,n)),a==null||a(null),m(!1)},[n,l,a,m]),[v,y]=f.useState(null),[x,w]=f.useState(!1),[k,C]=f.useState(o),[N,M]=f.useState(()=>kt(o,c)),b=f.useCallback(j=>{let E=j.start,z=j.end;i&&(E=qe(E,i));const H=c?We(c,z):z;E=We(E,H);const X=i?qe(i,E):E;return z=qe(z,X),c&&(z=We(z,c)),{start:ue(E,u),end:ue(z,u)}},[i,c,u]),S=f.useCallback(j=>{const E={...b(j),preset:j.preset};l(E),C(E),M(kt(E,c)),s({start:!1,end:!1})},[l,b,c]),D=f.useCallback(j=>!t.start&&we(j,k.start)||!t.end&&we(j,k.end),[k,t]),$=f.useCallback(j=>(x||!t.start&&!t.end)&&j.compare(k.start)>=0&&j.compare(k.end)<=0,[k,t,x]),P=f.useCallback(j=>we(j,k.start),[k]),R=f.useCallback(j=>we(j,k.end),[k]),L=f.useCallback((j,E)=>({onPointerEnter:()=>{x&&E&&C(Ge({start:v,end:j,timezone:u}))},onClick:()=>{if(!x)w(!0),y(j),C(Ge({start:j,end:j,timezone:u}));else{const z=Ge({start:v,end:j,timezone:u});z.start=Qt(z.start),z.end=q(z.end),w(!1),y(null),S==null||S(z),g&&(m==null||m(!1))}}}),[v,x,S,m,g,u]);return{selectedValue:o,setSelectedValue:S,calendarIsOpen:h,setCalendarIsOpen:m,dayIsActive:D,dayIsHighlighted:$,dayIsRangeStart:P,dayIsRangeEnd:R,getCellProps:L,calendarDates:N,setIsPlaceholder:s,isPlaceholder:t,clear:p,setCalendarDates:M,min:i,max:c,granularity:d,timezone:u,closeDialogOnSelection:g}}function kt(e,n){let t=Ce(je(e.start)),s=Ce(ke(e.end));return Ot(t,s)&&(s=ke(s.add({months:1}))),n&&s.compare(n)>0&&(s=t,t=je(t.subtract({months:1}))),[t,s]}function Ge(e){const n=ue(e.start,e.timezone),t=ue(e.end,e.timezone);return n.compare(t)>0?{start:t,end:n}:{start:n,end:t}}function Xe(e,n){return e!=null&&e.start&&(e!=null&&e.end)?e:!(e!=null&&e.start)&&(e!=null&&e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e!=null&&e.start)?(e.end=e.start.add({months:1}),e):{start:n,end:n.add({months:1})}}const tn=B(r.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function ws(e,n,t,s){switch(n){case"era":case"year":case"month":case"day":return e.cycle(n,t,{round:n==="year"})}if("hour"in e)switch(n){case"dayPeriod":{const a=e.hour,o=a>=12;return e.set({hour:o?a-12:a+12})}case"hour":case"minute":case"second":return e.cycle(n,t,{round:n!=="hour",hourCycle:s.hour12?12:24})}return e}function js(e,n,t,s){switch(n){case"day":case"month":case"year":return e.set({[n]:t})}if("hour"in e)switch(n){case"dayPeriod":{const a=e.hour,o=a>=12;return t>=12===o?e:e.set({hour:o?a-12:a+12})}case"hour":if(s.hour12){const o=e.hour>=12;!o&&t===12&&(t=0),o&&t<12&&(t+=12)}case"minute":case"second":return e.set({[n]:t})}return e}const Ct={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function ks({segment:e,domProps:n,value:t,onChange:s,isPlaceholder:a,state:{timezone:o,calendarIsOpen:l,setCalendarIsOpen:i}}){const c=ge(),d=f.useRef(""),{localeCode:u}=Ae(),h=Ve(),m=de({timeZone:o}),g=f.useMemo(()=>new Rn(u,{maximumFractionDigits:0}),[u]),p=b=>{s(js(t,e.type,b,m.resolvedOptions()))},v=b=>{s(ws(t,e.type,b,m.resolvedOptions()))},y=()=>{if(g.isValidPartialNumber(e.text)){const b=e.text.slice(0,-1),S=g.parse(b);if(b.length===0||S===0){const D=Mn(o);e.type in D&&p(D[e.type])}else p(S);d.current=b}else e.type==="dayPeriod"&&v(-1)},x=b=>{var S;if(!(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)){switch(b.key){case"ArrowLeft":b.preventDefault(),b.stopPropagation(),h==null||h.focusPrevious();break;case"ArrowRight":b.preventDefault(),b.stopPropagation(),h==null||h.focusNext();break;case"Enter":(S=b.target.closest("form"))==null||S.requestSubmit(),i(!l);break;case"Tab":break;case"Backspace":case"Delete":{b.preventDefault(),b.stopPropagation(),y();break}case"ArrowUp":b.preventDefault(),d.current="",v(1);break;case"ArrowDown":b.preventDefault(),d.current="",v(-1);break;case"PageUp":b.preventDefault(),d.current="",v(Ct[e.type]||1);break;case"PageDown":b.preventDefault(),d.current="",v(-(Ct[e.type]||1));break;case"Home":b.preventDefault(),d.current="",p(e.maxValue);break;case"End":b.preventDefault(),d.current="",p(e.minValue);break}N(b.key)}},w=de({hour:"numeric",hour12:!0}),k=f.useMemo(()=>{const b=new Date;return b.setHours(0),w.formatToParts(b).find(S=>S.type==="dayPeriod").value},[w]),C=f.useMemo(()=>{const b=new Date;return b.setHours(12),w.formatToParts(b).find(S=>S.type==="dayPeriod").value},[w]),N=b=>{const S=d.current+b;switch(e.type){case"dayPeriod":if(k.toLowerCase().startsWith(b))p(0);else if(C.toLowerCase().startsWith(b))p(12);else break;h==null||h.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!g.isValidPartialNumber(S))return;let D=g.parse(S),$=D,P=e.minValue===0;if(e.type==="hour"&&m.resolvedOptions().hour12){switch(m.resolvedOptions().hourCycle){case"h11":D>11&&($=g.parse(b));break;case"h12":P=!1,D>12&&($=g.parse(b));break}e.value>=12&&D>1&&(D+=12)}else D>e.maxValue&&($=g.parse(b));if(Number.isNaN(D))return;const R=$!==0||P;R&&p($),+`${D}0`>e.maxValue||S.length>=String(e.maxValue).length?(d.current="",R&&(h==null||h.focusNext())):d.current=S;break}}},M=c?{}:{"aria-label":e.type,"aria-valuetext":a?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":a?void 0:e.value,tabIndex:0,onKeyDown:x};return r.jsx("div",{...se(n,{...M,onFocus:b=>{d.current="",b.target.scrollIntoView({block:"nearest"})},onClick:b=>{b.preventDefault(),b.stopPropagation()}}),className:"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary",children:e.text.padStart(e.minLength,"0")})}function Cs({segment:e,domProps:n}){const t=Ve();return r.jsx("div",{...n,onPointerDown:s=>{s.pointerType==="mouse"&&(s.preventDefault(),t!=null&&t.focusNext({from:s.target})||t==null||t.focusPrevious({from:s.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function Is(e,n,t){switch(n){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:Fn(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:zn(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(n){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(t.hour12){const s=e.hour>=12;return{value:e.hour,minValue:s?12:0,maxValue:s?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function Se({segmentProps:e,state:n,value:t,onChange:s,isPlaceholder:a}){const{granularity:o}=n,l=f.useMemo(()=>{const u={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(u.hour="numeric",u.minute="numeric"),u},[o]),i=de(l),c=f.useMemo(()=>t.toDate(),[t]),d=f.useMemo(()=>i.formatToParts(c).map(u=>{const h=Is(t,u.type,i.resolvedOptions()),m=a&&u.type!=="literal"?h.placeholder:u.value;return{type:u.type,text:u.value===", "?" ":m,...h,minLength:u.type!=="literal"?String(h.maxValue).length:1}}),[c,i,a,t]);return r.jsx("div",{className:"flex items-center",children:d.map((u,h)=>u.type==="literal"?r.jsx(Cs,{domProps:e,segment:u},h):r.jsx(ks,{isPlaceholder:a,domProps:e,state:n,value:t,onChange:s,segment:u},h))})}const nn=B(r.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeftOutlined"),sn=B(r.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function Ss({date:e,currentMonth:n,state:{dayIsActive:t,dayIsHighlighted:s,dayIsRangeStart:a,dayIsRangeEnd:o,getCellProps:l,timezone:i,min:c,max:d}}){const{localeCode:u}=Ae(),h=On(e,u),m=t(e),g=s(e),p=a(e),v=o(e),y=$n(e,i),x=Ot(e,n),w=nt(e,c,d);return r.jsxs("div",{role:"button","aria-disabled":w,className:T("w-40 h-40 text-sm relative isolate flex-shrink-0",w&&"text-disabled pointer-events-none",!x&&"invisible pointer-events-none"),...l(e,x),children:[r.jsx("span",{className:T("absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer",!m&&!y&&"hover:bg-hover",m&&"bg-primary text-on-primary font-semibold",y&&!m&&"bg-chip"),children:e.day}),g&&x&&r.jsx("span",{className:T("absolute w-full h-full inset-0 bg-primary/focus",(p||h===0||e.day===1)&&"rounded-l-full",(v||h===6||e.day===n.calendar.getDaysInMonth(n))&&"rounded-r-full")})]})}function Ds({startDate:e,state:n,isFirst:t,isLast:s}){const{localeCode:a}=Ae(),o=An(e,a),l=Re(e,a);return r.jsxs("div",{className:"w-280 flex-shrink-0",children:[r.jsx(Ps,{isFirst:t,isLast:s,state:n,currentMonth:e}),r.jsxs("div",{className:"block",role:"grid",children:[r.jsx(Ts,{state:n,startDate:e}),[...new Array(o).keys()].map(i=>r.jsx(fe.div,{className:"flex mb-6",children:[...new Array(7).keys()].map(c=>r.jsx(Ss,{date:l.add({weeks:i,days:c}),currentMonth:e,state:n},c))},i))]})]})}function Ps({currentMonth:e,isFirst:n,isLast:t,state:{calendarDates:s,setCalendarDates:a,timezone:o,min:l,max:i}}){const c=m=>{const g=s.length;let p;m==="forward"?p=s.map(v=>ke(v.add({months:g}))):p=s.map(v=>ke(v.subtract({months:g}))),a(p)},d=de({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),u=nt(e.subtract({days:1}),l,i),h=nt(je(e.add({months:1})),l,i);return r.jsxs("div",{className:"flex items-center justify-between gap-10",children:[r.jsx(Y,{size:"md",className:T("text-muted",!n&&"invisible"),disabled:!n||u,"aria-hidden":!n,onClick:()=>{c("backward")},children:r.jsx(nn,{})}),r.jsx("div",{className:"text-sm font-semibold select-none",children:d.format(e.toDate(o))}),r.jsx(Y,{size:"md",className:T("text-muted",!t&&"invisible"),disabled:!t||h,"aria-hidden":!t,onClick:()=>{c("forward")},children:r.jsx(sn,{})})]})}function Ts({state:{timezone:e},startDate:n}){const{localeCode:t}=Ae(),s=de({weekday:"short"}),a=Re(n,t);return r.jsx("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const i=a.add({days:o}).toDate(e),c=s.format(i);return r.jsx("div",{className:"w-40 h-40 text-sm font-semibold relative flex-shrink-0",children:r.jsx("div",{className:"absolute flex items-center justify-center w-full h-full select-none",children:c})},o)})})}function an({state:e,visibleMonths:n=1}){return ge()&&(n=1),r.jsx(f.Fragment,{children:[...new Array(n).keys()].map(s=>{const a=Ce(je(e.calendarDates[s])),o=s===0,l=s===n-1;return r.jsx(Ds,{state:e,startDate:a,isFirst:o,isLast:l},s)})})}const rn=f.memo(({start:e,end:n,options:t,preset:s})=>{const{dates:a}=$t(),o=it(),l=de(t||Vn[s||(a==null?void 0:a.format)]);if(!e||!n)return null;let i;try{i=l.formatRange(It(e,o),It(n,o))}catch{i=""}return r.jsx(f.Fragment,{children:i})},At);function It(e,n){return typeof e=="string"?Ln(e,n).toDate():"toDate"in e?e.toDate(n):e}function Es({onPresetSelected:e,selectedValue:n}){return r.jsx(Vt,{children:gt.map(t=>r.jsx(Lt,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(n==null?void 0:n.preset)===t.key,onSelected:()=>{const s=t.getRangeValue();e(s)},children:r.jsx(F,{...t.label})},t.key))})}function Ns(e){return rt("(max-width: 1024px)",e)}const on=he.forwardRef((e,n)=>{const{children:t,size:s="sm",description:a,className:o,invalid:l,autoFocus:i,errorMessage:c,...d}=e,u=$e(n);Hn({autoFocus:i},u);const h=Rs(s),m=Pe(e),g=f.useId();return r.jsxs("div",{className:T(o,"isolate"),children:[r.jsxs("label",{className:"flex items-center select-none",children:[r.jsx("input",{...d,type:"checkbox",role:"switch","aria-invalid":l||void 0,"aria-describedby":a?g:void 0,ref:u,"aria-checked":d.checked,className:T(h,!l&&"checked:bg-primary dark:checked:bg-primary-dark checked:border-primary dark:checked:border-primary-dark",l&&"checked:bg-danger checked:border-danger","outline-none cursor-pointer bg-chip border-chip border checked:bg-primary checked:border-primary p-0 overflow-hidden relative rounded-3xl appearance-none transition-colors flex-shrink-0 flex items-center outline-none","before:z-10 before:border before:rounded-3xl before:block before:bg-white before:transition-transform before:translate-x-2","checked:before:border-white","focus-visible:ring",e.disabled&&"opacity-80 cursor-not-allowed")}),t&&r.jsx("span",{className:T(m.size.font,"ml-12",l&&"text-danger",e.disabled&&"text-disabled"),children:t})]}),a&&!c&&r.jsx("div",{id:g,className:m.description,children:a}),c&&r.jsx("div",{id:g,className:m.error,children:c})]})});function zr(e){const{field:{onChange:n,onBlur:t,value:s=!1,ref:a},fieldState:{invalid:o,error:l}}=pe({name:e.name}),i={onChange:c=>{c.target.value&&c.target.value!=="on"?n(c.target.checked?c.target.value:!1):n(c)},onBlur:t,checked:!!s,invalid:o,errorMessage:l==null?void 0:l.message,name:e.name};return r.jsx(on,{ref:a,...se(e,i)})}function Rs(e){switch(e){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-16 before:w-12 before:h-12 checked:before:translate-x-16";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}const Ms=[{key:0,label:I("Preceding period"),getRangeValue:e=>{const n=e.start,a=(e.end.toDate().getTime()-n.toDate().getTime())/(1e3*60);return{preset:0,start:n.subtract({minutes:a}),end:n}}},{key:1,label:I("Same period last year"),getRangeValue:e=>({start:e.start.subtract({years:1}),end:e.end.subtract({years:1}),preset:1})},{key:2,label:I("Custom"),getRangeValue:e=>({start:e.start.subtract({weeks:1}),end:e.end.subtract({weeks:1}),preset:2})}];function zs({originalRangeValue:e,onPresetSelected:n,selectedValue:t}){return r.jsx(Vt,{children:Ms.map(s=>r.jsx(Lt,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(t==null?void 0:t.preset)===s.key,onSelected:()=>{const a=s.getRangeValue(e);n(a)},children:r.jsx(F,{...s.label})},s.key))})}function Fs({state:e,compareState:n,showInlineDatePickerField:t=!1,compareVisibleDefault:s=!1}){const a=Ns(),{close:o}=ct(),l=f.useRef(e),i=e.isPlaceholder.start||e.isPlaceholder.end,[c,d]=f.useState(s),u=r.jsxs(ut,{dividerTop:!0,startAction:!i&&!a?r.jsx("div",{className:"text-xs",children:r.jsx(rn,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[r.jsx(te,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(l.current.selectedValue),e.setIsPlaceholder(l.current.isPlaceholder),o()},children:r.jsx(F,{message:"Cancel"})}),r.jsx(te,{variant:"flat",color:"primary",size:"xs",onClick:()=>{const h=e.selectedValue;n&&c&&(h.compareStart=n.selectedValue.start,h.compareEnd=n.selectedValue.end),o(h)},children:r.jsx(F,{message:"Select"})})]});return r.jsxs(Le,{size:"auto",children:[r.jsxs(dt,{className:"flex",padding:"p-0",children:[!a&&r.jsxs("div",{className:"min-w-192 py-14",children:[r.jsx(Es,{selectedValue:e.selectedValue,onPresetSelected:h=>{e.setSelectedValue(h),e.closeDialogOnSelection&&o(h)}}),!!n&&r.jsxs(f.Fragment,{children:[r.jsx(on,{className:"mx-20 mb-10 mt-14",checked:c,onChange:h=>d(h.target.checked),children:r.jsx(F,{message:"Compare"})}),c&&r.jsx(zs,{originalRangeValue:e.selectedValue,selectedValue:n.selectedValue,onPresetSelected:h=>{n.setSelectedValue(h)}})]})]}),r.jsx(De,{initial:!1,children:r.jsx(Os,{state:e,compareState:n,showInlineDatePickerField:t,compareVisible:c})})]}),!e.closeDialogOnSelection&&u]})}function Os({state:e,compareState:n,showInlineDatePickerField:t,compareVisible:s}){return r.jsxs(fe.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pb-20 pt-10",children:[t&&r.jsxs("div",{children:[r.jsx(St,{state:e}),!!n&&s&&r.jsx(St,{state:n,label:r.jsx(F,{message:"Compare"})})]}),r.jsx("div",{className:"flex items-start gap-36",children:r.jsx(an,{state:e,visibleMonths:2})})]})}function St({state:e,label:n}){const{selectedValue:t,setSelectedValue:s}=e;return r.jsxs(pt,{className:"mb-20 mt-10",label:n,children:[r.jsx(Se,{state:e,value:t.start,onChange:a=>{s({...t,start:a})}}),r.jsx(tn,{className:"block flex-shrink-0 text-muted",size:"md"}),r.jsx(Se,{state:e,value:t.end,onChange:a=>{s({...t,end:a})}})]})}function $s(e){var m,g;const{granularity:n,closeDialogOnSelection:t,...s}=e,a=ys(e),o=f.useRef(null),i=ge()&&n!=="day",c=r.jsx(ft,{offset:8,placement:"bottom-start",isOpen:a.calendarIsOpen,onOpenChange:a.setCalendarIsOpen,type:"popover",triggerRef:o,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:r.jsx(Fs,{state:a})}),d={onClick:p=>{p.stopPropagation(),p.preventDefault(),As(p)?a.setCalendarIsOpen(!1):a.setCalendarIsOpen(!0)}},u=a.selectedValue,h=a.setSelectedValue;return r.jsxs(f.Fragment,{children:[r.jsxs(pt,{ref:o,wrapperProps:d,endAdornment:i?void 0:r.jsx(Zt,{}),...s,children:[r.jsx(Se,{isPlaceholder:(m=a.isPlaceholder)==null?void 0:m.start,state:a,segmentProps:d,value:u.start,onChange:p=>{h({start:p,end:u.end})}}),r.jsx(tn,{className:"block flex-shrink-0 text-muted",size:"md"}),r.jsx(Se,{isPlaceholder:(g=a.isPlaceholder)==null?void 0:g.end,state:a,segmentProps:d,value:u.end,onChange:p=>{h({start:u.start,end:p})}})]}),c]})}function As(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}function Vs(e){const{field:{onChange:n,onBlur:t,value:s,ref:a},fieldState:{invalid:o,error:l}}=pe({name:e.name}),i={onChange:c=>{n(c?ln(c):null)},onBlur:t,value:Ls(s),invalid:o,errorMessage:l==null?void 0:l.message,inputRef:a};return r.jsx($s,{...se(i,e)})}function Ls(e){const{start:n,end:t,preset:s}=e||{},a={preset:s};try{n&&(a.start=typeof n=="string"?Me(n):n),t&&(a.end=typeof t=="string"?Me(t):t)}catch{}return a}function ln({start:e,end:n,preset:t}={}){const s={preset:t};return e&&(s.start=e.toAbsoluteString()),n&&(s.end=n.toAbsoluteString()),s}function cn(e){var n;return{...e,defaultOperator:Ie.between,control:{type:U.DateRangePicker,defaultValue:((n=e.control)==null?void 0:n.defaultValue)||ln(gt[3].getRangeValue())}}}function Hs(e){return cn({key:"created_at",label:I("Date created"),...e})}function Bs(e){return cn({key:"updated_at",label:I("Last updated"),...e})}const Qe="filters";function Us(e){if(!e)return[];let n=[];try{n=JSON.parse(atob(decodeURIComponent(e))),n.map(t=>(t.valueKey!=null&&(t.value=t.valueKey),t))}catch{}return n}function Ks(e,n){return!e||(e=n?e.filter(t=>t.value!=="").map(t=>_s(t,n)):e,e=e.filter(t=>!t.isInactive),!e.length)?"":encodeURIComponent(btoa(JSON.stringify(e)))}function _s(e,n){var s;const t=n.find(a=>a.key===e.key);if((t==null?void 0:t.control.type)==="select"){const a=(t.control.options||[]).find(o=>o.key===e.value);if(a)return{...e,value:a.value,valueKey:a.key}}return(s=t==null?void 0:t.extraFilters)!=null&&s.length&&(e.extraFilters=t.extraFilters),e}function qs(e,n){const[t]=Bn(),s=Un(),a=t.get(Qe),o=f.useMemo(()=>{if(!e)return[];const u=Us(a);return(n||[]).forEach(h=>{if(!u.find(m=>m.key===h)){const m=e.find(g=>g.key===h);u.push({key:h,value:m.control.defaultValue,operator:m.defaultOperator,isInactive:!0})}}),u.sort((h,m)=>e.findIndex(g=>g.key===h.key)-e.findIndex(g=>g.key===m.key)),u},[a,n,e]),l=f.useCallback(u=>{const h=[...o];return u.forEach(m=>{const g=typeof m=="object"?m.key:m,p=h.findIndex(v=>v.key===g);p>-1&&h.splice(p,1)}),h},[o]),i=f.useCallback(u=>{const h=Ks(u,e);h?t.set(Qe,h):t.delete(Qe),s({search:`?${t}`},{replace:!0})},[e,s,t]),c=f.useCallback(u=>{const m=[...l(u),...u];i(m)},[l,i]),d=f.useCallback(u=>i(l([u])),[l,i]);return{add:c,remove:d,replaceAll:i,decodedFilters:o,encodedFilters:a}}function ze(e){return Kn()?e.metaKey:e.ctrlKey}function Ws(e){const{cellCount:n,rowCount:t}=e;return{onKeyDown:a=>{switch(a.key){case"ArrowLeft":Q(a,{cell:{op:"decrement"}},e);break;case"ArrowRight":Q(a,{cell:{op:"increment"}},e);break;case"ArrowUp":Q(a,{row:{op:"decrement"}},e);break;case"ArrowDown":Q(a,{row:{op:"increment"}},e);break;case"PageUp":Q(a,{row:{op:"decrement",count:5}},e);break;case"PageDown":Q(a,{row:{op:"increment",count:5}},e);break;case"Tab":Ys(a);break;case"Home":ze(a)?Q(a,{row:{op:"decrement",count:t},cell:{op:"decrement",count:n}},e):Q(a,{cell:{op:"decrement",count:n}},e);break;case"End":ze(a)?Q(a,{row:{op:"increment",count:t},cell:{op:"increment",count:n}},e):Q(a,{cell:{op:"increment",count:n}},e);break}}}}function Q(e,n,{cellCount:t,rowCount:s}){var p,v,y,x,w,k,C;if(((p=document.activeElement)==null?void 0:p.tagName)==="input")return;e.preventDefault();const a=e.currentTarget,o=e.target.closest("[aria-colindex]");if(!o||!a)return;const l=o.closest("[aria-rowindex]");if(!l)return;let i=parseInt(l.getAttribute("aria-rowindex")),c=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(i)||Number.isNaN(c))return;const d=((v=n.row)==null?void 0:v.count)??1;((y=n.row)==null?void 0:y.op)==="increment"?i=Math.min(s,i+d):((x=n.row)==null?void 0:x.op)==="decrement"&&(i=Math.max(1,i-d));const u=((w=n.cell)==null?void 0:w.count)??1;((k=n.cell)==null?void 0:k.op)==="increment"?c=Math.min(t,c+u):((C=n.cell)==null?void 0:C.op)==="decrement"&&(c=Math.max(1,c-u));const h=a.querySelector(`[aria-rowindex="${i}"] [aria-colindex="${c}"]`);if(!h)return;const g=Ht(h).nextNode()||h;o.setAttribute("tabindex","-1"),g.setAttribute("tabindex","0"),g.focus()}function Ys(e){const n=e.currentTarget;if(e.shiftKey)n.focus();else{const t=Ht(n,{tabbable:!0});let s,a;do a=t.lastChild(),a&&(s=a);while(a);s&&!s.contains(document.activeElement)&&_n(s)}}const Z=f.createContext(null);function un({index:e,isHeader:n}){const{columns:t,cellHeight:s="h-46",headerCellHeight:a="h-46"}=f.useContext(Z),o=t[e],l=o==null?void 0:o.padding;let i="justify-start";return(o==null?void 0:o.align)==="center"?i="justify-center":(o==null?void 0:o.align)==="end"&&(i="justify-end"),T("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",n?a:s,(o==null?void 0:o.width)??"flex-1",o==null?void 0:o.maxWidth,o==null?void 0:o.minWidth,i,l,o==null?void 0:o.className)}function Gs({rowIndex:e,rowIsHovered:n,index:t,item:s,id:a}){const{columns:o}=f.useContext(Z),l=o[t],i=f.useMemo(()=>({index:e,isHovered:n,isPlaceholder:s.isPlaceholder}),[e,n,s.isPlaceholder]),c=un({index:t,isHeader:!1});return r.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":t+1,id:a,className:c,children:r.jsx("div",{className:"overflow-x-hidden overflow-ellipsis min-w-0 w-full",children:l.body(s,i)})})}function Xs({onMoveStart:e,onMove:n,onMoveEnd:t,minimumMovement:s=0,preventDefault:a,stopPropagation:o=!0,onPress:l,onLongPress:i,...c}){const u=f.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:h,removeGlobalListener:m}=Bt(),g=x=>{!u.el||(e==null?void 0:e(x,u.el))===!1||(u.originalTouchAction=u.el.style.touchAction,u.el.style.touchAction="none",u.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",u.started=!0)},p=x=>{var w;if(x.button===0&&u.id==null){if(u.started=!1,((w=c.onPointerDown)==null?void 0:w.call(c,x))===!1)return;o&&x.stopPropagation(),a&&x.preventDefault(),u.id=x.pointerId,u.el=x.currentTarget,u.lastPosition={x:x.clientX,y:x.clientY},i&&(u.longPressTimer=setTimeout(()=>{i(x,u.el),u.longPressTriggered=!0},400)),(e||n)&&h(window,"pointermove",v,!1),h(window,"pointerup",y,!1),h(window,"pointercancel",y,!1)}},v=x=>{if(x.pointerId===u.id){const w=x.clientX-u.lastPosition.x,k=x.clientY-u.lastPosition.y;(Math.abs(w)>=s||Math.abs(k)>=s)&&!u.started&&g(x),u.started&&(n==null||n(x,w,k),u.lastPosition={x:x.clientX,y:x.clientY})}},y=x=>{var w;if(x.pointerId===u.id){u.longPressTimer&&clearTimeout(u.longPressTimer);const k=u.longPressTriggered;u.longPressTriggered=!1,u.started&&(t==null||t(x)),u.el&&(x.type!=="pointercancel"&&((w=c.onPointerUp)==null||w.call(c,x,u.el),x.target&&u.el.contains(x.target)&&(k?i==null||i(x,u.el):l==null||l(x,u.el))),document.documentElement.style.userSelect=u.originalUserSelect||"",u.el.style.touchAction=u.originalTouchAction||""),u.id=void 0,u.started=!1,m(window,"pointermove",v,!1),m(window,"pointerup",y,!1),m(window,"pointercancel",y,!1)}};return{domProps:{onPointerDown:le(p)}}}function Qs(e){return e.shiftKey||ze(e)}function Zs({index:e,isSelected:n,isHeader:t}){const s=qn(),a=ge(),{hideBorder:o,enableSelection:l,collapseOnMobile:i,onAction:c}=f.useContext(Z);return T("flex gap-x-16 break-inside-avoid outline-none border border-transparent",c&&"cursor-pointer",a&&i&&o?"mb-8 pl-8 pr-0 rounded":"px-16",!o&&"border-b-divider",!o&&e===0&&"border-t-divider",n&&!s&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&s&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!t&&(l||c)&&"focus-visible:bg-focus hover:bg-hover")}const Js=["button","a","input","select","textarea"];function ea({item:e,index:n,renderAs:t,className:s,style:a}){const{selectedRows:o,columns:l,toggleRow:i,selectRow:c,onAction:d,selectRowOnContextMenu:u,enableSelection:h,selectionStyle:m,hideHeaderRow:g}=f.useContext(Z),p=f.useRef(!1),v=o.includes(e.id),[y,x]=f.useState(!1),w=P=>P.target.closest(Js.join(",")),k=P=>{m==="highlight"&&d&&!p.current&&!w(P)&&(P.preventDefault(),P.stopPropagation(),d(e,n))},C=!!o.length,N=P=>{w(P)||(m==="checkbox"?h&&(C||!d)?i(e):d&&d(e,n):m==="highlight"&&(p.current?h&&C?i(e):d==null||d(e,n):h&&c(e,Qs(P))))},{domProps:M}=Xs({onPointerDown:P=>{p.current=P.pointerType==="touch"},onPress:N,onLongPress:h?()=>{p.current&&i(e)}:void 0}),b=P=>{h&&P.key===" "?(P.preventDefault(),P.stopPropagation(),m==="checkbox"?i(e):c(e)):P.key==="Enter"&&!o.length&&d&&(P.preventDefault(),P.stopPropagation(),d(e,n))},S=P=>{u&&h&&(o.includes(e.id)||c(e)),p.current&&(P.preventDefault(),P.stopPropagation())},D=Zs({index:n,isSelected:v}),$=t||"div";return r.jsx($,{role:"row","aria-rowindex":n+1+(g?0:1),"aria-selected":v,tabIndex:-1,className:T(s,D),item:$==="div"?void 0:e,onDoubleClick:le(k),onKeyDown:le(b),onContextMenu:le(S),onPointerEnter:le(()=>x(!0)),onPointerLeave:le(()=>x(!1)),style:a,...M,children:l.map((P,R)=>r.jsx(Gs,{rowIndex:n,rowIsHovered:y,index:R,item:e},`${e.id}-${P.key}`))})}const ta={key:"checkbox",header:()=>r.jsx(sa,{}),align:"center",width:"w-24 flex-shrink-0",body:(e,n)=>n.isPlaceholder?r.jsx(ce,{size:"w-24 h-24",variant:"rect"}):r.jsx(na,{item:e})};function na({item:e}){const{selectedRows:n,toggleRow:t}=f.useContext(Z);return r.jsx(Ut,{checked:n.includes(e.id),onChange:()=>t(e)})}function sa(){const{trans:e}=K(),{data:n,selectedRows:t,onSelectionChange:s}=f.useContext(Z),a=!!n.length&&n.length===t.length,o=!a&&!!t.length;return r.jsx(Ut,{"aria-label":e({message:"Select all"}),isIndeterminate:o,checked:a,onChange:()=>{s(a?[]:n.map(l=>l.id))}})}const aa=B(r.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function ra({index:e}){const{columns:n,sortDescriptor:t,onSortChange:s,enableSorting:a}=f.useContext(Z),o=n[e],l=un({index:e,isHeader:!0}),[i,c]=f.useState(!1),d=o.sortingKey||o.key,u=o.allowsSorting&&a,{orderBy:h,orderDir:m}=t||{},g=u&&h===d;let p;g&&m==="asc"?p="ascending":g&&m==="desc"?p="descending":u&&(p="none");const v=()=>{if(!u)return;let w;g&&m==="desc"?w={orderDir:"asc",orderBy:d}:g&&m==="asc"?w={orderBy:void 0,orderDir:void 0}:w={orderDir:"desc",orderBy:d},s==null||s(w)},y=g||i,x={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return r.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":e+1,"aria-sort":p,className:T(l,"text-muted font-medium text-xs",u&&"cursor-pointer"),onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},onKeyDown:w=>{(w.key===" "||w.key==="Enter")&&(w.preventDefault(),v())},onClick:v,children:[o.hideHeader?r.jsx("div",{className:"sr-only",children:o.header()}):o.header(),r.jsx(De,{children:u&&r.jsx(fe.span,{variants:x,animate:y?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"inline-block ml-6 -mt-2","data-testid":"table-sort-button","aria-hidden":!y,children:r.jsx(aa,{size:"xs",className:T("text-muted",m==="asc"&&h===d&&"rotate-180 transition-transform")})},"sort-icon")})]})}function oa(){const{columns:e}=f.useContext(Z);return r.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:e.map((n,t)=>r.jsx(ra,{index:t},n.key))})}function Fr({className:e,columns:n,collapseOnMobile:t=!0,hideHeaderRow:s=!1,hideBorder:a=!1,data:o,selectedRows:l,defaultSelectedRows:i,onSelectionChange:c,sortDescriptor:d,onSortChange:u,enableSorting:h=!0,onDelete:m,enableSelection:g=!0,selectionStyle:p="checkbox",ariaLabelledBy:v,selectRowOnContextMenu:y,onAction:x,renderRowAs:w,tableBody:k,meta:C,tableRef:N,closeOnInteractOutside:M=!1,cellHeight:b,headerCellHeight:S,...D}){const $=ge(),P=!!$&&t;P&&(s=!0,a=!0);const[R,L]=ee(l,i||[],c),[G,_]=ee(d,void 0,u),j=f.useCallback(O=>{const V=[...R];if(!V.includes(O.id))V.push(O.id);else{const re=V.indexOf(O.id);V.splice(re,1)}L(V)},[R,L]),E=f.useCallback((O,V)=>{let re=[];O&&(re=V?[...R==null?void 0:R.filter(oe=>oe!==O.id),O.id]:[O.id]),L(re)},[R,L]),z=f.useMemo(()=>{const O=n.filter(re=>{const oe=re.visibleInMode||"regular";if(oe==="all"||oe==="compact"&&P||oe==="regular"&&!P)return!0});return g&&p!=="highlight"&&!$&&O.unshift(ta),O},[$,n,g,p,P]),H={isCollapsedMode:P,cellHeight:b,headerCellHeight:S,hideBorder:a,hideHeaderRow:s,selectedRows:R,onSelectionChange:L,enableSorting:h,enableSelection:g,selectionStyle:p,data:o,columns:z,sortDescriptor:G,onSortChange:_,toggleRow:j,selectRow:E,onAction:x,selectRowOnContextMenu:y,meta:C,collapseOnMobile:t},X=Ws({cellCount:g?z.length+1:z.length,rowCount:o.length+1}),Ee={renderRowAs:w};k?k=f.cloneElement(k,Ee):k=r.jsx(la,{...Ee});const xe=$e(N);return Wn({ref:xe,onInteractOutside:O=>{M&&g&&(R!=null&&R.length)&&!O.target.closest('[role="dialog"]')&&L([])}}),r.jsx(Z.Provider,{value:H,children:r.jsxs("div",{...se(D,X,{onKeyDown:O=>{O.key==="Escape"?(O.preventDefault(),O.stopPropagation(),R!=null&&R.length&&L([])):O.key==="Delete"?(O.preventDefault(),O.stopPropagation(),R!=null&&R.length&&(m==null||m(o.filter(V=>R==null?void 0:R.includes(V.id))))):ze(O)&&O.key==="a"&&(O.preventDefault(),O.stopPropagation(),g&&L(o.map(V=>V.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":o.length+1,"aria-colcount":z.length+1,ref:xe,"aria-multiselectable":g?!0:void 0,"aria-labelledby":v,className:T(e,"isolate select-none text-sm outline-none focus-visible:ring-2"),children:[!s&&r.jsx(oa,{}),k]})})}function la({renderRowAs:e}){const{data:n}=f.useContext(Z);return r.jsx(f.Fragment,{children:n.map((t,s)=>r.jsx(ea,{item:t,index:s,renderAs:e},t.id))})}function ia({isLoading:e,icon:n}){const t=f.useRef(null),{trans:s}=K(),[a,o]=f.useState(!1),{state:{isOpen:l,inputValue:i}}=Yn(),c=f.useRef(i);return f.useEffect(()=>{e&&!a?(t.current===null&&(t.current=setTimeout(()=>{o(!0)},500)),i!==c.current&&(clearTimeout(t.current),t.current=setTimeout(()=>{o(!0)},500))):e||(o(!1),clearTimeout(t.current),t.current=null),c.current=i},[e,a,i]),a&&(l||e)?r.jsx(He,{"aria-label":s({message:"Loading"}),size:"sm",isIndeterminate:!0}):n||r.jsx(Be,{})}function ca(e,n){const t=ge(),{hideCaret:s,placeholder:a=r.jsx(F,{message:"Select an option..."}),selectedValue:o,onItemSelected:l,onOpenChange:i,onInputValueChange:c,onSelectionChange:d,selectionMode:u,minWidth:h="min-w-128",children:m,searchPlaceholder:g,showEmptyMessage:p,showSearchField:v,defaultInputValue:y,inputValue:x,isLoading:w,isAsync:k,valueClassName:C,floatingWidth:N=t?"auto":"matchTrigger",...M}=e,b=Kt({...e,clearInputOnItemSelection:!0,showEmptyMessage:p||v,floatingWidth:N,selectionMode:"single",role:"listbox",virtualFocus:v},n),{state:{selectedValues:S,isOpen:D,setIsOpen:$,activeIndex:P,setSelectedIndex:R,inputValue:L,setInputValue:G},collections:_,focusItem:j,listboxId:E,reference:z,refs:H,listContent:X,onInputChange:Ee}=b,{fieldProps:xe,inputProps:O}=ot({...M,focusRef:H.reference}),V=_.collection.get(S[0]),re=V?r.jsxs("span",{className:"flex items-center gap-10",children:[V.element.props.startIcon,r.jsx("span",{className:T("overflow-hidden overflow-ellipsis whitespace-nowrap",C),children:V.element.props.children})]}):r.jsx("span",{className:"italic",children:a}),oe=Pe({...e,endAdornment:!0}),{handleTriggerKeyDown:yn,handleListboxKeyboardNavigation:wn,handleListboxSearchFieldKeydown:jn}=qt(b),{findMatchingItem:bt}=Gn(),kn=ve=>{if(!D)return;const be=bt(ve,X,P);be!=null&&j("increment",be)},Cn=ve=>{if(D)return;const be=bt(ve,X,P);be!=null&&R(be)};return r.jsx(_t,{listbox:b,onKeyDownCapture:v?void 0:kn,onKeyDown:wn,onClose:v?()=>G(""):void 0,isLoading:w,searchField:v&&r.jsx(Xn,{size:e.size==="xs"||e.size==="sm"?"xs":"sm",placeholder:g,startAdornment:r.jsx(Qn,{}),className:"flex-shrink-0 px-8 pb-8 pt-4",autoFocus:!0,"aria-expanded":D?"true":"false","aria-haspopup":"listbox","aria-controls":D?E:void 0,"aria-autocomplete":"list",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:L,onChange:Ee,onKeyDown:ve=>{jn(ve)}}),children:r.jsx(lt,{fieldClassNames:oe,...xe,endAdornment:!s&&r.jsx(ia,{isLoading:w}),children:r.jsx("button",{...O,type:"button","data-selected-value":V==null?void 0:V.value,"aria-expanded":D?"true":"false","aria-haspopup":"listbox","aria-controls":D?E:void 0,ref:z,onKeyDown:yn,onKeyDownCapture:v?void 0:Cn,disabled:M.disabled,onClick:()=>{$(!D)},className:T(oe.input,!xe.unstyled&&h),children:re})})})}const dn=he.forwardRef(ca);function fn({children:e,...n}){const{field:{onChange:t,onBlur:s,value:a=null,ref:o},fieldState:{invalid:l,error:i}}=pe({name:n.name}),c={onSelectionChange:t,onBlur:s,selectedValue:a,invalid:l,errorMessage:i==null?void 0:i.message,name:n.name},d=n.errorMessage||(i==null?void 0:i.message);return r.jsx(dn,{ref:o,...se(c,n,{errorMessage:d}),children:e})}function ua({filter:e}){const{trans:n}=K();return r.jsx(fn,{size:"sm",name:`${e.key}.value`,selectionMode:"single",showSearchField:e.control.showSearchField,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,searchPlaceholder:e.control.searchPlaceholder?n(e.control.searchPlaceholder):void 0,children:e.control.options.map(t=>r.jsx(Ue,{value:t.key,children:r.jsx(F,{...t.label})},t.key))})}function da({filter:e}){return r.jsx(Vs,{min:e.control.min,max:e.control.max,size:"sm",name:`${e.key}.value`,granularity:"day",closeDialogOnSelection:!0})}const _e=f.forwardRef(({className:e,circle:n,size:t="md",src:s,link:a,label:o,fallback:l="generic",lazy:i=!0,...c},d)=>{let u=s?r.jsx("img",{ref:d,src:s,alt:o,loading:i?"lazy":void 0,className:"block h-full w-full object-cover"}):r.jsx("div",{className:"h-full w-full bg-alt dark:bg-chip",children:r.jsx(Jn,{viewBox:"0 0 48 48",className:"h-full w-full text-muted"})});o&&(u=r.jsx(Wt,{label:o,children:u}));const h={...c,className:T(e,"relative block overflow-hidden select-none flex-shrink-0",fa(t),n?"rounded-full":"rounded")};return a?r.jsx(Zn,{...h,to:a,children:u}):r.jsx("div",{...h,children:u})});function fa(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-40 h-40";case"xl":return"w-60 h-60";default:return e}}function ha(e,n,t){return Yt({queryKey:[e,n],queryFn:()=>ma(e,n),placeholderData:es,...t})}async function ma(e,n){return Ke.get(e,{params:n}).then(t=>t.data)}function hn(e,n,t){return Yt({queryKey:[e,n],queryFn:()=>ga(e,n),...t})}async function ga(e,n){return Ke.get(e,{params:n}).then(t=>t.data)}function pa({label:e,className:n,background:t,value:s,defaultValue:a="",placeholder:o=I("Select item..."),searchPlaceholder:l=I("Find an item..."),onChange:i,description:c,errorMessage:d,invalid:u,autoFocus:h,queryParams:m,endpoint:g,disabled:p,required:v}){var S;const y=f.useRef(null),[x,w]=f.useState(""),[k,C]=ee(s,a,i),N=ha(g,{query:x,...m}),{trans:M}=K(),b=Pe({size:"md"});return k?r.jsxs("div",{className:n,children:[r.jsx("div",{className:b.label,children:e}),r.jsx("div",{className:T("rounded-input border p-8",t,u&&"border-danger"),children:r.jsx(De,{initial:!1,mode:"wait",children:r.jsx(xa,{disabled:p,endpoint:g,modelId:k,queryParams:m,onEditClick:()=>{C(""),w(""),requestAnimationFrame(()=>{var D,$;(D=y.current)==null||D.focus(),($=y.current)==null||$.click()})}})})}),c&&!d&&r.jsx("div",{className:b.description,children:c}),d&&r.jsx("div",{className:b.error,children:d})]}):r.jsx(dn,{className:n,showSearchField:!0,invalid:u,errorMessage:d,description:c,color:"white",isAsync:!0,background:t,placeholder:M(o),searchPlaceholder:M(l),label:e,isLoading:N.isFetching,items:(S=N.data)==null?void 0:S.results,inputValue:x,onInputValueChange:w,selectionMode:"single",selectedValue:k,onSelectionChange:C,ref:y,autoFocus:h,disabled:p,required:v,children:D=>r.jsx(Ue,{value:D.id,description:D.description,startIcon:r.jsx(_e,{src:D.image}),children:D.name},D.id)})}function xa({modelId:e,onEditClick:n,endpoint:t,disabled:s,queryParams:a}){const{data:o,isLoading:l}=hn(`${t}/${e}`,a);return l||!(o!=null&&o.model)?r.jsx(va,{},"skeleton"):r.jsxs(fe.div,{className:T("flex items-center gap-10",s&&"pointer-events-none cursor-not-allowed text-disabled"),...ht,children:[o.model.image&&r.jsx(_e,{src:o.model.image}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm leading-4",children:o.model.name}),r.jsx("div",{className:"text-xs text-muted",children:o.model.description})]}),r.jsx(Wt,{label:r.jsx(F,{message:"Change item"}),children:r.jsx(Y,{className:"ml-auto text-muted",size:"sm",onClick:n,disabled:s,children:r.jsx(hs,{})})})]},"preview")}function va(){return r.jsxs(fe.div,{className:"flex items-center gap-10",...ht,children:[r.jsx(ce,{variant:"rect",size:"w-32 h-32"}),r.jsxs("div",{className:"max-h-[36px] flex-auto",children:[r.jsx(ce,{className:"text-xs"}),r.jsx(ce,{className:"max-h-8 text-xs"})]}),r.jsx(ce,{variant:"icon",size:"w-24 h-24"})]})}function ba({name:e,...n}){const{clearErrors:t}=ts(),{field:{onChange:s,value:a=""},fieldState:{invalid:o,error:l}}=pe({name:e});return r.jsx(pa,{value:a,onChange:i=>{s(i),t(e)},invalid:o,errorMessage:l==null?void 0:l.message,...n})}function ya({filter:e}){return r.jsx(ba,{name:`${e.key}.value`,endpoint:`normalized-models/${e.control.model}`})}const mn={"=":I("is"),"!=":I("is not"),">":I("is greater than"),">=":I("is greater than or equal to"),"<":I("is less than"),"<=":I("is less than or equal to"),has:I("Include"),doesntHave:I("Do not include"),between:I("Is between"),hasAll:I("Include all")};function wa({filter:e}){var t;const n=e.control;return r.jsxs(f.Fragment,{children:[r.jsx(fn,{selectionMode:"single",name:`${e.key}.operator`,className:"mb-14",size:"sm",required:!0,children:(t=e.operators)==null?void 0:t.map(s=>r.jsx(Ue,{value:s,children:r.jsx(F,{...mn[s]})},s))}),r.jsx(ns,{size:"sm",name:`${e.key}.value`,type:e.control.inputType,min:"minValue"in n?n.minValue:void 0,max:"maxValue"in n?n.maxValue:void 0,minLength:"minLength"in n?n.minLength:void 0,maxLength:"maxLength"in n?n.maxLength:void 0,required:!0})]})}function ja({className:e,children:n,size:t,color:s,radius:a,selectable:o,wrap:l=!0}){return r.jsx("div",{className:T("flex items-center gap-8",l&&"flex-wrap",e),children:f.Children.map(n,i=>{if(f.isValidElement(i))return f.cloneElement(i,{size:t,color:s,selectable:o,radius:a})})})}function st(e){return{id:e,name:`${e}`,description:`${e}`}}function ka(e,n){const t=f.useRef(null),s=$e(n),{displayWith:a=H=>H.name,validateWith:o,children:l,suggestions:i,isLoading:c,inputValue:d,onInputValueChange:u,onItemSelected:h,placeholder:m,onOpenChange:g,chipSize:p="sm",openMenuOnFocus:v=!0,showEmptyMessage:y,value:x,defaultValue:w,onChange:k,valueKey:C,isAsync:N,allowCustomValue:M=!0,showDropdownArrow:b,onChipClick:S,...D}=e,$=Pe({...e,flexibleHeight:!0}),[P,R]=Sa(e),[L,G]=f.useState(!1),_=r.jsx(He,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),j=b?r.jsx(Be,{}):null,{fieldProps:E,inputProps:z}=ot({...D,focusRef:s,endAdornment:c&&L?_:j});return r.jsx(lt,{fieldClassNames:$,...E,children:r.jsxs(Jt,{ref:t,className:T("flex flex-wrap items-center",$.input),onClick:()=>{var H;(H=s.current)==null||H.focus()},children:[r.jsx(Ca,{displayChipUsing:a,onChipClick:S,items:P,setItems:R,chipSize:p}),r.jsx(Ia,{showEmptyMessage:y,inputProps:z,inputValue:d,onInputValueChange:u,fieldRef:t,inputRef:s,chips:P,setChips:R,validateWith:o,isLoading:c,suggestions:i,placeholder:m,openMenuOnFocus:v,listboxIsOpen:L,setListboxIsOpen:G,allowCustomValue:M,children:l})]})})}function Ca({items:e,setItems:n,displayChipUsing:t,chipSize:s,onChipClick:a}){const o=Ve(),l=f.useCallback(i=>{const c=e.findIndex(u=>u.id===i),d=[...e];return c>-1&&(d.splice(c,1),n(d)),d},[e,n]);return r.jsx(ja,{className:"my-8 max-w-full flex-shrink-0 flex-wrap",size:s,selectable:!0,children:e.map(i=>r.jsx(ss,{errorMessage:i.errorMessage,adornment:i.image?r.jsx(_e,{circle:!0,src:i.image}):null,onClick:()=>a==null?void 0:a(i),onRemove:()=>{l(i.id).length?o==null||o.focusPrevious({tabbable:!0}):o==null||o.focusLast()},children:t(i)},i.id))})}function Ia(e){const{inputRef:n,fieldRef:t,validateWith:s,setChips:a,chips:o,suggestions:l,inputProps:i,placeholder:c,openMenuOnFocus:d,listboxIsOpen:u,setListboxIsOpen:h,allowCustomValue:m,isLoading:g}=e,p="outline-none text-sm mx-8 my-4 h-30 flex-auto",v=Ve(),y=f.useCallback(j=>{j=(j||[]).filter(E=>{const z=!E||!E.id||!E.name;return!(o.findIndex(X=>X.id===(E==null?void 0:E.id))>-1)&&!z}),j.length&&(s&&(j=j.map(E=>s(E))),a([...o,...j]))},[o,a,s]),x=Kt({...e,clearInputOnItemSelection:!0,isOpen:u,onOpenChange:h,items:l,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:j=>{R(j)}}),{state:{activeIndex:w,setActiveIndex:k,isOpen:C,setIsOpen:N,inputValue:M,setInputValue:b},refs:S,listboxId:D,collection:$,onInputChange:P}=x,R=j=>{const E=$.size&&w!=null?[...$.values()][w]:null;E!=null&&E.item?y([E.item]):m&&y([st(E?E.value:j)]),b(""),k(null),N(!1)};as(()=>{t.current&&S.reference.current!==t.current&&x.reference(t.current)},[t,x,S]);const{handleTriggerKeyDown:L,handleListboxKeyboardNavigation:G}=qt(x),_=le(()=>{d&&!C&&N(!0)});return r.jsx(_t,{listbox:x,mobileOverlay:rs,isLoading:g,onPointerDown:j=>{j.preventDefault()},children:r.jsx("input",{type:"text",className:T(p,"bg-transparent"),placeholder:c,...se(i,{ref:n,value:M,onChange:P,onPaste:j=>{const z=j.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(z){j.preventDefault();const H=window.getSelection();H!=null&&H.rangeCount&&(H.deleteFromDocument(),y(z.map(X=>st(X))))}},"aria-autocomplete":"list","aria-controls":C?D:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:j=>{const E=j.target;if(j.key==="Enter"){j.preventDefault(),R(E.value);return}if(j.key==="Escape"&&C&&(N(!1),b("")),j.key==="ArrowUp"&&C&&(w===0||w==null)){k(null);return}if(w!=null&&(j.key==="ArrowLeft"||j.key==="ArrowRight")){j.preventDefault();return}if((j.key==="ArrowLeft"||j.key==="Backspace"||j.key==="Delete")&&E.selectionStart===0&&w==null&&o.length){v==null||v.focusPrevious({tabbable:!0});return}L(j)||G(j)},onFocus:_,onClick:_})})})}function Sa({onChange:e,value:n,defaultValue:t,valueKey:s}){const a=f.useMemo(()=>Dt(n),[n]),o=f.useMemo(()=>Dt(t),[t]),l=f.useCallback(i=>{const c=s?i.map(d=>d[s]):i;e==null||e(c)},[e,s]);return ee(a||void 0,o||[],l)}function Dt(e){if(e!=null)return e.map(n=>typeof n!="object"?st(n):n)}const Da=he.forwardRef(ka);function Pa({children:e,...n}){const{field:{onChange:t,onBlur:s,value:a=[],ref:o},fieldState:{invalid:l,error:i}}=pe({name:n.name}),c={onChange:t,onBlur:s,value:a,invalid:l,errorMessage:i==null?void 0:i.message};return r.jsx(Da,{ref:o,...se(c,n),children:e})}function Ta({filter:e}){const{trans:n}=K();return r.jsx(Pa,{size:"sm",name:`${e.key}.value`,valueKey:"id",allowCustomValue:!1,showDropdownArrow:!0,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,displayWith:t=>{var s;return(s=e.control.options.find(a=>a.key===t.id))==null?void 0:s.label.message},suggestions:e.control.options.map(t=>({id:t.key,name:t.label.message})),children:t=>r.jsx(Ue,{value:t.id,children:r.jsx(F,{message:t.name})},t.id)})}const gn=f.forwardRef((e,n)=>{const{isInactive:t,filter:s,...a}=e;return t?r.jsx(Ea,{filter:s,...a,ref:n}):r.jsx(Na,{filter:s,...a,ref:n})}),Ea=f.forwardRef(({filter:e,...n},t)=>r.jsx(te,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:t,endIcon:r.jsx(Be,{}),...n,children:r.jsx(F,{...e.label})})),Na=f.forwardRef(({filter:e,children:n,...t},s)=>{const a=e.control.type===U.BooleanToggle;return r.jsxs(te,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!a&&r.jsx(Be,{}),ref:s,...t,children:[r.jsx("span",{className:T(!a&&"border-r border-r-primary-light mr-8 pr-8"),children:r.jsx(F,{...e.label})}),n]})});function Te(e){const{onValueChange:n,isInactive:t,filter:s,label:a}=e;return r.jsxs(ft,{offset:10,type:"popover",onClose:o=>{o!==void 0&&n(o)},children:[r.jsx(gn,{isInactive:t,filter:s,children:a}),r.jsx(Ra,{...e})]})}function Ra({filter:e,panel:n,value:t,operator:s}){const a=os({defaultValues:{[e.key]:{value:t,operator:s}}}),{close:o,formId:l}=ct();return r.jsxs(Le,{size:"xs",children:[r.jsx(ls,{children:r.jsx(F,{...e.label})}),r.jsx(dt,{padding:"px-14 pt-14 pb-4 max-h-288",children:r.jsxs(is,{form:a,id:l,onSubmit:i=>{o(i[e.key])},children:[e.description&&r.jsx("div",{className:"text-muted text-xs mb-14",children:r.jsx(F,{...e.description})}),n]})}),r.jsx(ut,{children:r.jsx(te,{form:l,type:"submit",variant:"flat",color:"primary",size:"xs",children:r.jsx(F,{message:"Apply"})})})]})}const Ma=f.memo(({value:e,...n})=>{const t=cs(n);return isNaN(e)&&(e=0),r.jsx(f.Fragment,{children:t.format(e)})},At);function za(e){switch(e.filter.control.type){case U.DateRangePicker:return r.jsx(Fa,{...e});case U.BooleanToggle:return r.jsx(Oa,{...e});case U.Select:return r.jsx($a,{...e});case U.ChipField:return r.jsx(Aa,{...e});case U.Input:return r.jsx(La,{...e});case U.SelectModel:return r.jsx(Ha,{...e});case U.Custom:const n=e.filter.control.listItem;return r.jsx(n,{...e});default:return null}}function Fa(e){const{value:n,filter:t}=e;let s;return n.preset!==void 0?s=r.jsx(F,{...gt[n.preset].label}):s=r.jsx(rn,{start:new Date(n.start),end:new Date(n.end),options:{dateStyle:"medium"}}),r.jsx(Te,{...e,label:s,panel:r.jsx(da,{filter:t})})}function Oa({filter:e,isInactive:n,onValueChange:t}){return r.jsx(gn,{onClick:()=>{t({value:e.control.defaultValue})},filter:e,isInactive:n})}function $a(e){const{filter:n,value:t}=e,s=n.control.options.find(a=>a.key===t);return r.jsx(Te,{...e,label:s?r.jsx(F,{...s.label}):null,panel:r.jsx(ua,{filter:n})})}function Aa(e){return r.jsx(Te,{...e,label:r.jsx(Va,{...e}),panel:r.jsx(Ta,{filter:e.filter})})}function Va(e){const{trans:n}=K(),{filter:t,value:s}=e,a=s.map(c=>t.control.options.find(d=>d.key===c)),o=3,l=s.length-o,i=r.jsx(f.Fragment,{children:a.filter(Boolean).slice(0,o).map((c,d)=>{let u="";return d!==0&&(u+=", "),u+=n(c.label),u})});return l>0?r.jsx(F,{message:":names + :count more",values:{names:i,count:l}}):i}function La(e){const{filter:n,value:t,operator:s}=e,a=s?r.jsx(F,{...mn[s]}):null,o=n.control.inputType==="number"?r.jsx(Ma,{value:t}):t;return r.jsx(Te,{...e,label:r.jsxs(f.Fragment,{children:[a," ",o]}),panel:r.jsx(wa,{filter:n})})}function Ha(e){const{value:n,filter:t}=e,{isLoading:s,data:a}=hn(`normalized-models/${t.control.model}/${n}`,void 0,{enabled:!!n}),o=r.jsxs(f.Fragment,{children:[r.jsx(ce,{variant:"avatar",size:"w-18 h-18 mr-6"}),r.jsx(ce,{variant:"rect",size:"w-50"})]}),l=r.jsxs(f.Fragment,{children:[r.jsx(_e,{size:"xs",src:a==null?void 0:a.model.image,className:"mr-6"}),a==null?void 0:a.model.name]}),i=s||!a?o:l;return r.jsx(Te,{...e,label:i,panel:r.jsx(ya,{filter:t})})}function Or({filters:e,pinnedFilters:n,className:t}){const{decodedFilters:s,remove:a,replaceAll:o}=qs(e,n);return s.length?r.jsx("div",{className:T("flex items-center gap-6 overflow-x-auto",t),children:s.map((l,i)=>{const c=e.find(u=>u.key===l.key);if(!c)return null;const d=u=>{const h=[...s];h.splice(i,1,{key:c.key,value:u.value,isInactive:!1,operator:u.operator||c.defaultOperator}),o(h)};return r.jsxs("div",{children:[!l.isInactive&&r.jsx(Y,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{a(l.key)},children:r.jsx(Gt,{})}),r.jsx(za,{filter:c,isInactive:l.isInactive,value:l.valueKey!=null?l.valueKey:l.value,operator:l.operator,onValueChange:d})]},l.key)})}):null}const $r=B(r.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),Pt=B(r.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");function at(e,n){const t=document.createElement("a");t.href=e,n&&(t.download=n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Ba(e){const n=xt(),[t,s]=f.useState(!e.value&&!e.defaultValue),a=e.onChange,[o,l]=ee(e.value||n,e.defaultValue||n,C=>{s(!1),a==null||a(C)}),{min:i,max:c,granularity:d,timezone:u,calendarIsOpen:h,setCalendarIsOpen:m,closeDialogOnSelection:g}=en(o,e),p=f.useCallback(()=>{s(!0),l(n),a==null||a(null),m(!1)},[n,l,a,m]),[v,y]=f.useState(()=>[Ce(o)]),x=f.useCallback(C=>{i&&C.compare(i)<0?C=i:c&&C.compare(c)>0&&(C=c);const N=o?o.set(C):ue(C,u);l(N),y([Ce(N)]),s(!1)},[l,i,c,o,u]),w=f.useCallback(C=>!t&&we(o,C),[o,t]),k=f.useCallback(C=>({onClick:()=>{x==null||x(C),g&&(m==null||m(!1))}}),[x,m,g]);return{selectedValue:o,setSelectedValue:l,calendarIsOpen:h,setCalendarIsOpen:m,dayIsActive:w,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:k,calendarDates:v,setCalendarDates:y,isPlaceholder:t,clear:p,setIsPlaceholder:s,min:i,max:c,granularity:d,timezone:u,closeDialogOnSelection:g}}function Ua({showCalendarFooter:e,...n}){const t=Ba(n),s=f.useRef(null),a=xt(),o=e&&r.jsx(ut,{padding:"px-14 pb-14",startAction:r.jsx(te,{disabled:t.isPlaceholder,variant:"text",color:"primary",onClick:()=>{t.clear()},children:r.jsx(F,{message:"Clear"})}),children:r.jsx(te,{variant:"text",color:"primary",onClick:()=>{t.setSelectedValue(a),t.setCalendarIsOpen(!1)},children:r.jsx(F,{message:"Today"})})}),l=r.jsx(ft,{offset:8,placement:"bottom-start",isOpen:t.calendarIsOpen,onOpenChange:t.setCalendarIsOpen,type:"popover",triggerRef:s,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:r.jsxs(Le,{size:"auto",children:[r.jsx(dt,{className:"flex items-start gap-40",padding:e?"px-24 pt-20 pb-10":null,children:r.jsx(an,{state:t,visibleMonths:1})}),o]})}),i={onClick:c=>{c.stopPropagation(),c.preventDefault(),Ka(c)?t.setCalendarIsOpen(!1):t.setCalendarIsOpen(!0)}};return r.jsxs(f.Fragment,{children:[r.jsx(pt,{ref:s,wrapperProps:i,endAdornment:r.jsx(Zt,{className:T(n.disabled&&"text-disabled")}),...n,children:r.jsx(Se,{segmentProps:i,state:t,value:t.selectedValue,onChange:t.setSelectedValue,isPlaceholder:t.isPlaceholder})}),l]})}function Ar(e){const{min:n,max:t}=e,{trans:s}=K(),{format:a}=de(),{field:{onChange:o,onBlur:l,value:i=null,ref:c},fieldState:{invalid:d,error:u}}=pe({name:e.name,rules:{validate:g=>{if(!g)return;const p=Me(g);if(n&&p.compare(n)<0)return s({message:"Enter a date after :date",values:{date:a(g)}});if(t&&p.compare(t)>0)return s({message:"Enter a date before :date",values:{date:a(g)}})}}}),h=i?Me(i):null,m={onChange:g=>{o(g&&g.toAbsoluteString())},onBlur:l,value:h,invalid:d,errorMessage:u==null?void 0:u.message,inputRef:c};return r.jsx(Ua,{...se(m,e)})}function Ka(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}const Vr=B(r.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),J=new Map,Ne=new Map,_a=new Map,W={status:"inactive"};function Ze({e,rect:n,deltaX:t,deltaY:s}){return{rect:n,x:e.clientX,y:e.clientY,deltaX:t??0,deltaY:s??0,nativeEvent:e}}let pn=null;function Tt(e){pn=e}function qa(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function Wa(e){const n=new IntersectionObserver(t=>{t.forEach(s=>{const{width:a,height:o,left:l,top:i}=s.boundingClientRect,[c,d]=[...e].find(([,h])=>h.ref.current===s.target)||[];if(c==null||d==null)return;const u={width:a,height:o,left:l,top:i};e.set(c,{...d,rect:u})}),n.disconnect()});[...e.values()].forEach(t=>{t.ref.current&&n.observe(t.ref.current)})}function Lr({id:e,disabled:n,ref:t,preview:s,hidePreview:a,...o}){const l=f.useRef(null),{addGlobalListener:i,removeAllGlobalListeners:c}=Bt(),d=f.useRef({lastPosition:{x:0,y:0}}).current,u=f.useRef(o);u.current=o,f.useLayoutEffect(()=>(n?J.delete(e):J.set(e,{...J.get(e),id:e,ref:t,type:u.current.type,getData:u.current.getData}),()=>{J.delete(e)}),[e,n,u,t]);const h=y=>{_a.forEach(x=>{var w;x.type===((w=J.get(e))==null?void 0:w.type)&&y(x)})},m=y=>{var N,M;const x=J.get(e),w=t.current,k=!l.current||!d.clickedEl||l.current.contains(d.clickedEl);if(pn||!w||!x||!k){y.preventDefault(),y.stopPropagation();return}Wa(Ne),Tt("drag"),a&&Ya(y),y.dataTransfer.effectAllowed="move",d.lastPosition={x:y.clientX,y:y.clientY},d.currentRect=qa(w.getBoundingClientRect());const C=Ze({rect:d.currentRect,e:y});s!=null&&s.current&&s.current(x,b=>{y.dataTransfer.setDragImage(b,0,0)}),W.status="dragging",W.dragTargetId=e,t.current&&(t.current.dataset.dragging="true"),(M=(N=u.current).onDragStart)==null||M.call(N,C,x),requestAnimationFrame(()=>{h(b=>{var S;return(S=b.onDragStart)==null?void 0:S.call(b,C,x)})}),i(window,"dragover",g,!0)},g=y=>{var M,b;if(y.preventDefault(),!d.currentRect)return;const x=y.clientX-d.lastPosition.x,w=y.clientY-d.lastPosition.y,k={...d.currentRect,left:d.currentRect.left+x,top:d.currentRect.top+w},C=Ze({rect:k,e:y,deltaX:x,deltaY:w}),N=J.get(e);N&&((b=(M=u.current).onDragMove)==null||b.call(M,C,N),h(S=>{var D;return(D=S.onDragMove)==null?void 0:D.call(S,C,N)})),d.lastPosition={x:y.clientX,y:y.clientY},d.currentRect=k};return{draggableProps:{draggable:!n,onDragStart:m,onDragEnd:y=>{var k,C;if(c(),!d.currentRect)return;Tt(null),ie&&ie.remove();const x=Ze({rect:d.currentRect,e:y}),w=J.get(e);w&&((C=(k=u.current).onDragEnd)==null||C.call(k,x,w),h(N=>{var M;return(M=N.onDragEnd)==null?void 0:M.call(N,x,w,W.status)})),requestAnimationFrame(()=>{W.dragTargetId=void 0,W.status="inactive",t.current&&delete t.current.dataset.dragging})},onPointerDown:y=>{d.clickedEl=y.target}},dragHandleRef:l}}let ie;function Ya(e){ie||(ie=new Image,document.body.append(ie),ie.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(ie,0,0)}async function*Ga(e){const n=[];for(const t of e.items)if(t.kind==="file"){const s=t.webkitGetAsEntry();s&&n.push(s)}for(const t of n)if(t.isFile){if(t.name===".DS_Store")continue;const s=await vn(t);yield new Xt(s,t.fullPath)}else t.isDirectory&&(yield*xn(t))}async function*xn(e){const n=e.createReader();let t;do{t=await new Promise((s,a)=>{n.readEntries(s,a)});for(const s of t)if(s.isFile){if(s.name===".DS_Store")continue;const a=await vn(s);yield new Xt(a,s.fullPath)}else s.isDirectory&&(yield*xn(s))}while(t.length>0)}function vn(e){return new Promise((n,t)=>e.file(n,t))}async function Xa(e){const n=[];for await(const t of e)n.push(t);return n}const Qa=400;function Hr({id:e,disabled:n,ref:t,...s}){const a=f.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=f.useRef(s);o.current=s,f.useLayoutEffect(()=>(Ne.set(e,{...Ne.get(e),disabled:n,id:e,ref:t}),()=>{Ne.delete(e)}),[e,o,n,t]);const l=m=>{var v;const g=o.current,p=g.allowDragEventsFromItself||t.current!==((v=m.ref)==null?void 0:v.current);return!!(m!=null&&m.type&&p&&g.types.includes(m.type)&&(!g.acceptsDrop||g.acceptsDrop(m)))},i=m=>{var p,v;const g=ye(m);g&&((v=(p=o.current).onDragLeave)==null||v.call(p,g))};return{droppableProps:n?{}:{onDragOver:m=>{var p,v;m.preventDefault(),m.stopPropagation();const g=ye(m);g&&l(g)&&((v=(p=o.current).onDragOver)==null||v.call(p,g,m))},onDragEnter:m=>{var p,v;if(m.stopPropagation(),a.dragOverElements.add(m.target),a.dragOverElements.size>1)return;const g=ye(m);g&&l(g)&&((v=(p=o.current).onDragEnter)==null||v.call(p,g),clearTimeout(a.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(a.dropActivateTimer=setTimeout(()=>{var y,x;g&&((x=(y=o.current).onDropActivate)==null||x.call(y,g))},Qa)))},onDragLeave:m=>{m.stopPropagation(),a.dragOverElements.delete(m.target);for(const p of a.dragOverElements)m.currentTarget.contains(p)||a.dragOverElements.delete(p);if(a.dragOverElements.size>0)return;const g=ye(m);g&&l(g)&&(i(m),clearTimeout(a.dropActivateTimer))},onDrop:async m=>{var p,v,y,x;m.preventDefault(),m.stopPropagation(),a.dragOverElements.clear(),i(m),clearTimeout(a.dropActivateTimer);const g=ye(m);if(g)if((v=(p=o.current).onDragLeave)==null||v.call(p,g),!l(g))W.status!=="inactive"&&(W.status="dropFail");else{const w=(x=(y=o.current).onDrop)==null?void 0:x.call(y,g);W.status!=="inactive"&&(W.status=w===!1?"dropFail":"dropSuccess")}}}}}function ye(e){if(W.dragTargetId!=null)return J.get(W.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Xa(Ga(e.dataTransfer))}}const Za="user",Br=B(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Fe.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Oe.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function me(e,n,t){var s,a=(s=t.initialDeps)!=null?s:[],o;return function(){var l;t.key&&t.debug!=null&&t.debug()&&(l=Date.now());var i=e(),c=i.length!==a.length||i.some(function(p,v){return a[v]!==p});if(!c)return o;a=i;var d;if(t.key&&t.debug!=null&&t.debug()&&(d=Date.now()),o=n.apply(void 0,i),t.key&&t.debug!=null&&t.debug()){var u=Math.round((Date.now()-l)*100)/100,h=Math.round((Date.now()-d)*100)/100,m=h/16,g=function(v,y){for(v=String(v);v.length<y;)v=" "+v;return v};console.info("%c⏱ "+g(h,5)+" /"+g(u,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*m,120))+"deg 100% 31%);",t==null?void 0:t.key)}return t==null||t.onChange==null||t.onChange(o),o}}function Je(e,n){if(e===void 0)throw new Error("Unexpected undefined"+(n?": "+n:""));return e}var Ja=function(n,t){return Math.abs(n-t)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var er=function(n){return n},tr=function(n){for(var t=Math.max(n.startIndex-n.overscan,0),s=Math.min(n.endIndex+n.overscan,n.count-1),a=[],o=t;o<=s;o++)a.push(o);return a},nr=function(n,t){var s=n.scrollElement;if(s){var a=function(i){var c=i.width,d=i.height;t({width:Math.round(c),height:Math.round(d)})};a(s.getBoundingClientRect());var o=new ResizeObserver(function(l){var i=l[0];if(i!=null&&i.borderBoxSize){var c=i.borderBoxSize[0];if(c){a({width:c.inlineSize,height:c.blockSize});return}}a(s.getBoundingClientRect())});return o.observe(s,{box:"border-box"}),function(){o.unobserve(s)}}},sr=function(n,t){var s=n.scrollElement;if(s){var a=function(){t(s[n.options.horizontal?"scrollLeft":"scrollTop"])};return a(),s.addEventListener("scroll",a,{passive:!0}),function(){s.removeEventListener("scroll",a)}}},ar=function(n,t,s){if(t!=null&&t.borderBoxSize){var a=t.borderBoxSize[0];if(a){var o=Math.round(a[s.options.horizontal?"inlineSize":"blockSize"]);return o}}return Math.round(n.getBoundingClientRect()[s.options.horizontal?"width":"height"])},rr=function(n,t,s){var a,o,l=t.adjustments,i=l===void 0?0:l,c=t.behavior,d=n+i;(a=s.scrollElement)==null||a.scrollTo==null||a.scrollTo((o={},o[s.options.horizontal?"left":"top"]=d,o.behavior=c,o))},or=function(n){var t=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var s=null,a=function(){return s||(typeof ResizeObserver<"u"?s=new ResizeObserver(function(l){l.forEach(function(i){t._measureElement(i.target,i)})}):null)};return{disconnect:function(){var l;return(l=a())==null?void 0:l.disconnect()},observe:function(l){var i;return(i=a())==null?void 0:i.observe(l,{box:"border-box"})},unobserve:function(l){var i;return(i=a())==null?void 0:i.unobserve(l)}}}(),this.range=null,this.setOptions=function(s){Object.entries(s).forEach(function(a){var o=a[0],l=a[1];typeof l>"u"&&delete s[o]}),t.options=Oe({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:er,rangeExtractor:tr,onChange:function(){},measureElement:ar,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},s)},this.notify=function(s){t.options.onChange==null||t.options.onChange(t,s)},this.maybeNotify=me(function(){return t.calculateRange(),[t.isScrolling,t.range?t.range.startIndex:null,t.range?t.range.endIndex:null]},function(s){t.notify(s)},{key:!1,debug:function(){return t.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){t.unsubs.filter(Boolean).forEach(function(s){return s()}),t.unsubs=[],t.scrollElement=null},this._didMount=function(){return t.measureElementCache.forEach(t.observer.observe),function(){t.observer.disconnect(),t.cleanup()}},this._willUpdate=function(){var s=t.options.getScrollElement();t.scrollElement!==s&&(t.cleanup(),t.scrollElement=s,t._scrollToOffset(t.scrollOffset,{adjustments:void 0,behavior:void 0}),t.unsubs.push(t.options.observeElementRect(t,function(a){t.scrollRect=a,t.maybeNotify()})),t.unsubs.push(t.options.observeElementOffset(t,function(a){t.scrollAdjustments=0,t.scrollOffset!==a&&(t.isScrollingTimeoutId!==null&&(clearTimeout(t.isScrollingTimeoutId),t.isScrollingTimeoutId=null),t.isScrolling=!0,t.scrollDirection=t.scrollOffset<a?"forward":"backward",t.scrollOffset=a,t.maybeNotify(),t.isScrollingTimeoutId=setTimeout(function(){t.isScrollingTimeoutId=null,t.isScrolling=!1,t.scrollDirection=null,t.maybeNotify()},t.options.scrollingDelay))})))},this.getSize=function(){return t.scrollRect[t.options.horizontal?"width":"height"]},this.memoOptions=me(function(){return[t.options.count,t.options.paddingStart,t.options.scrollMargin,t.options.getItemKey]},function(s,a,o,l){return t.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:a,scrollMargin:o,getItemKey:l}},{key:!1}),this.getFurthestMeasurement=function(s,a){for(var o=new Map,l=new Map,i=a-1;i>=0;i--){var c=s[i];if(!o.has(c.lane)){var d=l.get(c.lane);if(d==null||c.end>d.end?l.set(c.lane,c):c.end<d.end&&o.set(c.lane,!0),o.size===t.options.lanes)break}}return l.size===t.options.lanes?Array.from(l.values()).sort(function(u,h){return u.end-h.end})[0]:void 0},this.getMeasurements=me(function(){return[t.memoOptions(),t.itemSizeCache]},function(s,a){var o=s.count,l=s.paddingStart,i=s.scrollMargin,c=s.getItemKey,d=t.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,t.pendingMeasuredCacheIndexes):0;t.pendingMeasuredCacheIndexes=[];for(var u=t.measurementsCache.slice(0,d),h=d;h<o;h++){var m=c(h),g=t.options.lanes===1?u[h-1]:t.getFurthestMeasurement(u,h),p=g?g.end:l+i,v=a.get(m),y=typeof v=="number"?v:t.options.estimateSize(h),x=p+y,w=g?g.lane:h%t.options.lanes;u[h]={index:h,start:p,size:y,end:x,key:m,lane:w}}return t.measurementsCache=u,u},{key:!1,debug:function(){return t.options.debug}}),this.calculateRange=me(function(){return[t.getMeasurements(),t.getSize(),t.scrollOffset]},function(s,a,o){return t.range=s.length>0&&a>0?lr({measurements:s,outerSize:a,scrollOffset:o}):null},{key:!1,debug:function(){return t.options.debug}}),this.getIndexes=me(function(){return[t.options.rangeExtractor,t.calculateRange(),t.options.overscan,t.options.count]},function(s,a,o,l){return a===null?[]:s(Oe({},a,{overscan:o,count:l}))},{key:!1,debug:function(){return t.options.debug}}),this.indexFromElement=function(s){var a=t.options.indexAttribute,o=s.getAttribute(a);return o?parseInt(o,10):(console.warn("Missing attribute name '"+a+"={index}' on measured element."),-1)},this._measureElement=function(s,a){var o=t.measurementsCache[t.indexFromElement(s)];if(!o||!s.isConnected){t.measureElementCache.forEach(function(c,d){c===s&&(t.observer.unobserve(s),t.measureElementCache.delete(d))});return}var l=t.measureElementCache.get(o.key);l!==s&&(l&&t.observer.unobserve(l),t.observer.observe(s),t.measureElementCache.set(o.key,s));var i=t.options.measureElement(s,a,t);t.resizeItem(o,i)},this.resizeItem=function(s,a){var o,l=(o=t.itemSizeCache.get(s.key))!=null?o:s.size,i=a-l;i!==0&&(s.start<t.scrollOffset&&t._scrollToOffset(t.scrollOffset,{adjustments:t.scrollAdjustments+=i,behavior:void 0}),t.pendingMeasuredCacheIndexes.push(s.index),t.itemSizeCache=new Map(t.itemSizeCache.set(s.key,a)),t.notify(!1))},this.measureElement=function(s){s&&t._measureElement(s,void 0)},this.getVirtualItems=me(function(){return[t.getIndexes(),t.getMeasurements()]},function(s,a){for(var o=[],l=0,i=s.length;l<i;l++){var c=s[l],d=a[c];o.push(d)}return o},{key:!1,debug:function(){return t.options.debug}}),this.getVirtualItemForOffset=function(s){var a=t.getMeasurements();return Je(a[bn(0,a.length-1,function(o){return Je(a[o]).start},s)])},this.getOffsetForAlignment=function(s,a){var o=t.getSize();a==="auto"&&(s<=t.scrollOffset?a="start":s>=t.scrollOffset+o?a="end":a="start"),a==="start"?s=s:a==="end"?s=s-o:a==="center"&&(s=s-o/2);var l=t.options.horizontal?"scrollWidth":"scrollHeight",i=t.scrollElement?"document"in t.scrollElement?t.scrollElement.document.documentElement[l]:t.scrollElement[l]:0,c=i-t.getSize();return Math.max(Math.min(c,s),0)},this.getOffsetForIndex=function(s,a){a===void 0&&(a="auto"),s=Math.max(0,Math.min(s,t.options.count-1));var o=Je(t.getMeasurements()[s]);if(a==="auto")if(o.end>=t.scrollOffset+t.getSize()-t.options.scrollPaddingEnd)a="end";else if(o.start<=t.scrollOffset+t.options.scrollPaddingStart)a="start";else return[t.scrollOffset,a];var l=a==="end"?o.end+t.options.scrollPaddingEnd:o.start-t.options.scrollPaddingStart;return[t.getOffsetForAlignment(l,a),a]},this.isDynamicMode=function(){return t.measureElementCache.size>0},this.cancelScrollToIndex=function(){t.scrollToIndexTimeoutId!==null&&(clearTimeout(t.scrollToIndexTimeoutId),t.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(s,a){var o=a===void 0?{}:a,l=o.align,i=l===void 0?"start":l,c=o.behavior;t.cancelScrollToIndex(),c==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:c})},this.scrollToIndex=function(s,a){var o=a===void 0?{}:a,l=o.align,i=l===void 0?"auto":l,c=o.behavior;s=Math.max(0,Math.min(s,t.options.count-1)),t.cancelScrollToIndex(),c==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var d=t.getOffsetForIndex(s,i),u=d[0],h=d[1];t._scrollToOffset(u,{adjustments:void 0,behavior:c}),c!=="smooth"&&t.isDynamicMode()&&(t.scrollToIndexTimeoutId=setTimeout(function(){t.scrollToIndexTimeoutId=null;var m=t.measureElementCache.has(t.options.getItemKey(s));if(m){var g=t.getOffsetForIndex(s,h),p=g[0];Ja(p,t.scrollOffset)||t.scrollToIndex(s,{align:h,behavior:c})}else t.scrollToIndex(s,{align:h,behavior:c})}))},this.scrollBy=function(s,a){var o=a===void 0?{}:a,l=o.behavior;t.cancelScrollToIndex(),l==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.scrollOffset+s,{adjustments:void 0,behavior:l})},this.getTotalSize=function(){var s;return(((s=t.getMeasurements()[t.options.count-1])==null?void 0:s.end)||t.options.paddingStart)-t.options.scrollMargin+t.options.paddingEnd},this._scrollToOffset=function(s,a){var o=a.adjustments,l=a.behavior;t.options.scrollToFn(s,{behavior:l,adjustments:o},t)},this.measure=function(){t.itemSizeCache=new Map,t.notify(!1)},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(s){t.itemSizeCache.set(s.key,s.size)}),this.maybeNotify()},bn=function(n,t,s,a){for(;n<=t;){var o=(n+t)/2|0,l=s(o);if(l<a)n=o+1;else if(l>a)t=o-1;else return o}return n>0?n-1:0};function lr(e){for(var n=e.measurements,t=e.outerSize,s=e.scrollOffset,a=n.length-1,o=function(d){return n[d].start},l=bn(0,a,o,s),i=l;i<a&&n[i].end<s+t;)i++;return{startIndex:l,endIndex:i}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ir=typeof document<"u"?f.useLayoutEffect:f.useEffect;function cr(e){var n=f.useReducer(function(){return{}},{})[1],t=Fe({},e,{onChange:function(l,i){i?us.flushSync(n):n(),e.onChange==null||e.onChange(l,i)}}),s=f.useState(function(){return new or(t)}),a=s[0];return a.setOptions(t),f.useEffect(function(){return a._didMount()},[]),ir(function(){return a._willUpdate()}),a}function Ur(e){return cr(Fe({observeElementRect:nr,observeElementOffset:sr,scrollToFn:rr},e))}const ur=he.createContext(null);function ae(e,n){const{base_url:t}=$t(),s=f.useContext(ur);return f.useMemo(()=>{if(!e)return{};let a;e.url&&(a=ds(e.url)?e.url:`${t}/${e.url}`);const o={previewUrl:a,downloadUrl:`${t}/api/v1/file-entries/download/${(n==null?void 0:n.downloadHashes)||e.hash}`};return s&&(o.previewUrl&&(o.previewUrl=Et(o.previewUrl,{...s,thumbnail:n!=null&&n.thumbnail?"true":""},t)),o.downloadUrl=Et(o.downloadUrl,s,t)),o},[t,e,n==null?void 0:n.downloadHashes,n==null?void 0:n.thumbnail,s])}function Et(e,n,t){const s=new URL(e,t);return Object.entries(n).forEach(([a,o])=>{s.searchParams.append(a,o)}),s.toString()}const vt=he.createContext(null);function ne({message:e,className:n,allowDownload:t}){const{entries:s,activeIndex:a}=f.useContext(vt),o=s[a],l=e||r.jsx(F,{message:"No file preview available"}),{downloadUrl:i}=ae(o);return r.jsxs("div",{className:T(n,"shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded"),children:[r.jsx("div",{className:"text-lg",children:l}),t&&r.jsx("div",{className:"block mt-20 text-center",children:r.jsx(te,{variant:"flat",color:"primary",onClick:()=>{i&&at(i)},children:r.jsx(F,{message:"Download"})})})]})}function dr(e){const{entry:n,className:t}=e,{trans:s}=K(),{previewUrl:a}=ae(n);return a?r.jsx("img",{className:T(t,"shadow"),src:a,alt:s({message:"Preview for :name",values:{name:n.name}})}):r.jsx(ne,{...e})}const fr=5242880;function hr(e){const{entry:n,className:t}=e,{trans:s}=K(),[a,o]=f.useState(!1),[l,i]=f.useState(!0),[c,d]=f.useState(!1),[u,h]=f.useState(null),{previewUrl:m}=ae(n);return f.useEffect(()=>{n&&(m?n.file_size>=fr?(o(!0),i(!1)):mr(m).then(g=>{h(g.data)}).catch(()=>{d(!0)}).finally(()=>{i(!1)}):d(!0))},[n,m]),l?r.jsx(He,{isIndeterminate:!0,"aria-label":s({message:"Loading file contents"})}):a?r.jsx(ne,{...e,message:r.jsx(F,{message:"This file is too large to preview."})}):c?r.jsx(ne,{...e,message:r.jsx(F,{message:"There was an issue previewing this file"})}):r.jsx("pre",{className:T("rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full",t),children:r.jsx("div",{className:"container mx-auto",children:`${u}`})})}function mr(e){return Ke.get(e,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function gr(e){const{entry:n,className:t}=e,{previewUrl:s}=ae(n),a=f.useRef(null),[o,l]=f.useState(!1);return f.useEffect(()=>{var i;l(!((i=a.current)!=null&&i.canPlayType(n.mime)))},[n]),o||!s?r.jsx(ne,{...e}):r.jsx("video",{className:t,ref:a,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:r.jsx("source",{src:s,type:n.mime,onError:()=>{l(!0)}})})}function pr(e){const{entry:n,className:t}=e,{previewUrl:s}=ae(n),a=f.useRef(null),[o,l]=f.useState(!1);return f.useEffect(()=>{var i;l(!((i=a.current)!=null&&i.canPlayType(n.mime)))},[n]),o||!s?r.jsx(ne,{...e}):r.jsx("audio",{className:t,ref:a,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:r.jsx("source",{src:s,type:n.mime,onError:()=>{l(!0)}})})}function xr(e){const{entry:n,className:t}=e,{trans:s}=K(),{previewUrl:a}=ae(n);return a?r.jsx("iframe",{title:s({message:"Preview for :name",values:{name:n.name}}),className:T(t,"w-full h-full"),src:`${a}#toolbar=0`}):r.jsx(ne,{...e})}function et(e){const{entry:n,className:t}=e,{trans:s}=K(),a=f.useRef(null),[o,l]=f.useState(!1),i=f.useRef(),[c,d]=f.useState(!1),{previewUrl:u}=ae(n);return f.useEffect(()=>{u?n.file_size&&n.file_size>25e6?l(!0):a.current&&(a.current.onload=()=>{clearTimeout(i.current),d(!1)},vr(u,n).then(h=>{a.current&&(a.current.src=h)}),i.current=setTimeout(()=>{l(!0)},5e3)):l(!0)},[n,u]),o?r.jsx(ne,{...e}):r.jsxs("div",{className:T(t,"w-full h-full"),children:[c&&r.jsx(He,{}),r.jsx("iframe",{ref:a,title:s({message:"Preview for :name",values:{name:n.name}}),className:T("w-full h-full",c&&"hidden")})]})}async function vr(e,n){const t=new URL(e);if(!t.searchParams.has("shareable_link")){const{data:s}=await Ke.post(`file-entries/${n.id}/add-preview-token`);t.searchParams.append("preview_token",s.preview_token)}return br(t)}function br(e){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(e.toString())}`}const Nt={text:hr,video:gr,audio:pr,image:dr,pdf:xr,spreadsheet:et,powerPoint:et,word:et,"text/rtf":ne};function yr(e){const n=e==null?void 0:e.mime,t=e==null?void 0:e.type;return Nt[n]||Nt[t]||ne}const wr=B(r.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined"),jr=2*1024*1024;function kr({file:e,className:n,iconClassName:t,showImage:s=!0}){const{trans:a}=K(),{previewUrl:o}=ae(e,{thumbnail:!0});if(e.file_size&&e.file_size>jr&&!e.thumbnail&&(s=!1),s&&e.type==="image"&&o){const l=a({message:":fileName thumbnail",values:{fileName:e.name}});return r.jsx("img",{className:T(n,"object-cover"),src:o,alt:l,draggable:!1})}return r.jsx(fs,{className:t,type:e.type})}function Cr({entries:e,onClose:n,showHeader:t=!0,className:s,headerActionsLeft:a,allowDownload:o=!0,...l}){const i=rt("(max-width: 1024px)"),[c,d]=ee(l.activeIndex,l.defaultActiveIndex||0,l.onActiveIndexChange),u=e[c],h=f.useMemo(()=>({entries:e,activeIndex:c}),[e,c]),m=yr(u);if(!u)return n==null||n(),null;const g=e.length-1>c,p=()=>{d(c+1)},v=c>0,y=()=>{d(c-1)};return r.jsxs(vt.Provider,{value:h,children:[t&&r.jsx(Ir,{actionsLeft:a,isMobile:i,onClose:n,onNext:g?p:void 0,onPrevious:v?y:void 0,allowDownload:o}),r.jsxs("div",{className:T("overflow-hidden relative flex-auto",s),children:[i&&r.jsx(Y,{size:"lg",className:"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!v,onClick:y,children:r.jsx(nn,{})}),r.jsx(De,{initial:!1,children:r.jsx(fe.div,{className:"absolute inset-0 flex items-center justify-center",...ht,children:r.jsx(m,{className:"max-h-[calc(100%-30px)]",entry:u,allowDownload:o})},u.id)}),i&&r.jsx(Y,{size:"lg",className:"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!g,onClick:p,children:r.jsx(sn,{})})]})]})}function Ir({onNext:e,onPrevious:n,onClose:t,isMobile:s,actionsLeft:a,allowDownload:o}){const{entries:l,activeIndex:i}=f.useContext(vt),c=l[i],{downloadUrl:d}=ae(c),m=s?r.jsx(Y,{onClick:()=>{d&&at(d)},children:r.jsx(Pt,{})}):r.jsx(te,{startIcon:r.jsx(Pt,{}),variant:"text",onClick:()=>{d&&at(d)},children:r.jsx(F,{message:"Download"})});return r.jsxs("div",{className:"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted",children:[r.jsxs("div",{className:"flex items-center gap-4 w-1/3 justify-start",children:[a,o?m:void 0]}),r.jsxs("div",{className:"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main",children:[r.jsx(kr,{file:c,iconClassName:"w-16 h-16",showImage:!1}),r.jsx("div",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:c.name})]}),r.jsxs("div",{className:"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap",children:[!s&&r.jsxs(f.Fragment,{children:[r.jsx(Y,{disabled:!n,onClick:n,children:r.jsx(wr,{})}),r.jsx("div",{children:i+1}),r.jsx("div",{children:"/"}),r.jsx("div",{children:l.length}),r.jsx(Y,{disabled:!e,onClick:e,children:r.jsx(ms,{})}),r.jsx("div",{className:"bg-divider w-1 h-24 mx-20"})]}),r.jsx(Y,{radius:"rounded-none",onClick:t,children:r.jsx(Gt,{})})]})]})}function Kr(e){return r.jsx(Le,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:r.jsx(Sr,{...e})})}function Sr(e){const{close:n}=ct();return r.jsx(Cr,{onClose:n,...e})}const Dr={key:"type",label:I("Type"),description:I("Type of the file"),defaultOperator:Ie.eq,control:{type:U.Select,defaultValue:"05",options:[{key:"02",label:I("Text"),value:"text"},{key:"03",label:I("Audio"),value:"audio"},{key:"04",label:I("Video"),value:"video"},{key:"05",label:I("Image"),value:"image"},{key:"06",label:I("PDF"),value:"pdf"},{key:"07",label:I("Spreadsheet"),value:"spreadsheet"},{key:"08",label:I("Word Document"),value:"word"},{key:"09",label:I("Photoshop"),value:"photoshop"},{key:"10",label:I("Archive"),value:"archive"},{key:"11",label:I("Folder"),value:"folder"}]}},_r=[Dr,{key:"public",label:I("Visibility"),description:I("Whether file is publicly accessible"),defaultOperator:Ie.eq,control:{type:U.Select,defaultValue:"01",options:[{key:"01",label:I("Private"),value:!1},{key:"02",label:I("Public"),value:!0}]}},Hs({description:I("Date file was uploaded")}),Bs({description:I("Date file was last changed")}),{key:"owner_id",label:I("Uploader"),description:I("User that this file was uploaded by"),defaultOperator:Ie.eq,control:{type:U.SelectModel,model:Za}}],qr=B(r.jsx("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"}),"LinkOutlined"),Wr=B(r.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined"),Yr=B(r.jsx("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"}),"UnfoldMoreOutlined");export{mt as $,$r as A,Qe as B,Ta as C,Er as D,Ur as E,Ie as F,ha as G,_r as H,wa as I,Kr as J,nn as K,cn as L,Br as M,ya as N,ba as O,qr as P,Yr as Q,Wr as R,dn as S,Fr as T,Za as U,ae as V,kr as W,Z as X,Cr as Y,ur as Z,Dr as _,Mr as a,Xs as a0,pn as a1,Qs as a2,ze as a3,ia as a4,_a as a5,Ma as a6,Zt as a7,rn as a8,ys as a9,Ms as aa,Fs as ab,gt as ac,aa as ad,tn as ae,wr as af,xs as ag,Rr as b,Nr as c,U as d,Hs as e,sn as f,qs as g,da as h,ua as i,Or as j,at as k,Pt as l,_e as m,Ar as n,zr as o,ja as p,Lr as q,Hr as r,Wa as s,Ne as t,Bs as u,Pa as v,Vr as w,on as x,fn as y,Da as z};
//# sourceMappingURL=UnfoldMore-1baa7d6a.js.map
