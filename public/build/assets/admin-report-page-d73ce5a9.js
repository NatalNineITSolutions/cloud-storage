import{a as g,k as j,b as h,j as t,r as i,al as D,A as b,n as m,y as d,z as y,d as u,v as N,B as R,E as v,T as S}from"./main-78dd9d73.js";import{T as F,a as w,b as I}from"./TrendingUp-24d59067.js";import{a6 as x,a7 as P,a8 as V,a9 as p,aa as T,ab as A,ac as E}from"./UnfoldMore-7d2388c8.js";import{F as k}from"./admin-routes-68a1758f.js";import{D as z}from"./Edit-8561ef4d.js";import"./use-resume-subscription-83148082.js";const f="admin/reports";function C(e={}){return g({queryKey:[f,e],queryFn:()=>M(e),placeholderData:j})}function M({types:e,dateRange:n}){const s={};return e&&(s.types=e.join(",")),n&&(s.startDate=n.start.toAbsoluteString(),s.endDate=n.end.toAbsoluteString(),s.timezone=n.start.timeZone),h.get(f,{params:s}).then(a=>a.data)}const B="gap-12 md:gap-24 mb-12 md:mb-24";function q({report:e,isLoading:n}){return e==null||e.pageViews.total,t.jsx(i.Fragment,{})}function H({report:e,isLoading:n}){return t.jsx("div",{className:`flex h-[97px] flex-shrink-0 items-center overflow-x-auto ${B}`,children:e==null?void 0:e.map(s=>t.jsx(L,{datum:s,isLoading:n},s.name))})}function L({datum:e,isLoading:n=!1}){let s;if(i.isValidElement(e.icon))s=i.cloneElement(e.icon,{size:"lg"});else{const a=D(e.icon);s=t.jsx(a,{size:"lg"})}return t.jsxs("div",{className:"rounded-panel flex h-full flex-auto items-center gap-18 whitespace-nowrap border p-20",children:[t.jsx("div",{className:"flex-shrink-0 rounded-lg bg-primary-light/20 p-10 text-primary",children:s}),t.jsxs("div",{className:"flex-auto",children:[t.jsx("div",{className:"flex items-center justify-between gap-20",children:t.jsx("div",{className:"text-lg font-bold text-main",children:t.jsx(b,{initial:!1,mode:"wait",children:n?t.jsx(m.div,{...d,children:t.jsx(y,{className:"min-w-24"})},"skeleton"):t.jsx(m.div,{...d,children:t.jsx(Q,{datum:e})},"value")})})}),t.jsxs("div",{className:"flex items-center justify-between gap-20",children:[t.jsx("h2",{className:"text-sm text-muted",children:e.name}),(e.percentageChange!=null||e.previousValue!=null)&&t.jsx("div",{className:"flex items-center gap-10",children:t.jsx(G,{datum:e})})]})]})]},e.name)}function Q({datum:e}){switch(e.type){case"fileSize":return t.jsx(k,{bytes:e.currentValue});case"percentage":return t.jsx(x,{value:e.currentValue,style:"percent",maximumFractionDigits:1});default:return t.jsx(x,{value:e.currentValue})}}function G({datum:e}){const n=K(e);let s;return n>0?s=t.jsx(F,{size:"md",className:"text-positive"}):n===0?s=t.jsx(w,{className:"text-muted"}):s=t.jsx(I,{className:"text-danger"}),t.jsxs(i.Fragment,{children:[s,t.jsxs("div",{className:"text-sm font-semibold text-muted",children:[n,"%"]})]})}function K({percentageChange:e,previousValue:n,currentValue:s}){return e!=null||n==null||s==null?e??0:n===0?100:Math.round((s-n)/n*100)}const O={month:"short",day:"2-digit"};function U({value:e,onChange:n,disabled:s,compactOnMobile:a=!0,enableCompare:r=!1,granularity:o="minute"}){const l=u();return t.jsxs(N,{type:"popover",onClose:c=>{c&&n(c)},children:[t.jsx(R,{variant:"outline",color:"chip",endIcon:t.jsx(P,{}),disabled:s,children:t.jsx(V,{start:e.start,end:e.end,options:l&&a?O:z.short})}),t.jsx(Z,{value:e,enableCompare:r,granularity:o})]})}function Z({value:e,enableCompare:n,granularity:s}){const a=u(),r=p({granularity:s,defaultValue:{start:e.start,end:e.end,preset:e.preset},closeDialogOnSelection:!1}),o=!!e.compareStart&&!!e.compareEnd,l=p({granularity:s,defaultValue:o?{start:e.compareStart,end:e.compareEnd,preset:e.comparePreset}:T[0].getRangeValue(r.selectedValue)});return t.jsx(A,{state:r,compareState:n?l:void 0,compareVisibleDefault:o,showInlineDatePickerField:!a})}function ee(){const[e,n]=i.useState(()=>E[2].getRangeValue()),{isLoading:s,data:a}=C({dateRange:e}),r=t.jsx(S,{message:"Visitors report"});return t.jsxs("div",{className:"min-h-full gap-12 overflow-x-hidden p-12 md:gap-24 md:p-24",children:[t.jsxs("div",{className:"mb-24 items-center justify-between gap-24 md:flex",children:[t.jsx(v,{children:r}),t.jsx("h1",{className:"mb-24 text-3xl font-light md:mb-0",children:r}),t.jsx(U,{value:e,onChange:n})]}),t.jsx(H,{report:a==null?void 0:a.headerReport}),t.jsx(q,{report:a==null?void 0:a.visitorsReport,isLoading:s})]})}export{ee as default};
//# sourceMappingURL=admin-report-page-d73ce5a9.js.map
