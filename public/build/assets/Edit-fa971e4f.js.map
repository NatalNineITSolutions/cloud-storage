{"version":3,"file":"Edit-fa971e4f.js","sources":["../../../common/resources/client/icons/material/ChevronRight.tsx","../../../common/resources/client/ui/breadcrumbs/breadcrumb-item.tsx","../../../common/resources/client/icons/material/MoreHoriz.tsx","../../../common/resources/client/ui/breadcrumbs/breadcrumb.tsx","../../../common/resources/client/icons/material/Edit.tsx"],"sourcesContent":["import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const ChevronRightIcon = createSvgIcon(\r\n  <path d=\"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z\" />\r\n, 'ChevronRightOutlined');\r\n","import React, {HTMLAttributes, ReactElement, ReactNode} from 'react';\r\nimport clsx from 'clsx';\r\nimport {ChevronRightIcon} from '../../icons/material/ChevronRight';\r\nimport type {BreadcrumbSizeStyle} from './breadcrumb';\r\n\r\nexport interface BreadcrumbItemProps {\r\n  sizeStyle?: BreadcrumbSizeStyle;\r\n  isMenuTrigger?: boolean;\r\n  isMenuItem?: boolean;\r\n  children: ReactNode | ((state: {isMenuItem?: boolean}) => ReactNode);\r\n  isCurrent?: boolean;\r\n  onSelected?: () => void;\r\n  isClickable?: boolean;\r\n  isDisabled?: boolean;\r\n  className?: string;\r\n  isLink?: boolean;\r\n}\r\n\r\nexport function BreadcrumbItem(props: BreadcrumbItemProps) {\r\n  const {\r\n    isCurrent,\r\n    sizeStyle,\r\n    isMenuTrigger,\r\n    isClickable,\r\n    isDisabled,\r\n    onSelected,\r\n    className,\r\n    isMenuItem,\r\n    isLink,\r\n  } = props;\r\n\r\n  const children =\r\n    typeof props.children === 'function'\r\n      ? props.children({isMenuItem})\r\n      : props.children;\r\n\r\n  if (isMenuItem) {\r\n    return children as ReactElement;\r\n  }\r\n\r\n  const domProps: HTMLAttributes<HTMLDivElement> = isMenuTrigger\r\n    ? {}\r\n    : {\r\n        tabIndex: isLink && !isDisabled ? 0 : undefined,\r\n        role: isLink ? 'link' : undefined,\r\n        'aria-disabled': isLink ? isDisabled : undefined,\r\n        'aria-current': isCurrent && isLink ? 'page' : undefined,\r\n        onClick: () => onSelected?.(),\r\n      };\r\n\r\n  return (\r\n    <li\r\n      className={clsx(\r\n        `relative inline-flex min-w-0 flex-shrink-0 items-center justify-start ${sizeStyle?.font}`,\r\n        (!isClickable || isDisabled) && 'pointer-events-none',\r\n        !isCurrent && isDisabled && 'text-disabled'\r\n      )}\r\n    >\r\n      <div\r\n        {...domProps}\r\n        className={clsx(\r\n          className,\r\n          'cursor-pointer overflow-hidden whitespace-nowrap rounded px-8',\r\n          !isMenuTrigger && 'py-4 hover:bg-hover',\r\n          !isMenuTrigger && isLink && 'outline-none focus-visible:ring'\r\n        )}\r\n      >\r\n        {children}\r\n      </div>\r\n      {isCurrent === false && (\r\n        <ChevronRightIcon\r\n          size={sizeStyle?.icon}\r\n          className={clsx(isDisabled ? 'text-disabled' : 'text-muted')}\r\n        />\r\n      )}\r\n    </li>\r\n  );\r\n}\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const MoreHorizIcon = createSvgIcon(\r\n  <path d=\"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\r\n, 'MoreHorizOutlined');\r\n","import React, {\r\n  cloneElement,\r\n  ReactElement,\r\n  ReactNode,\r\n  useCallback,\r\n  useRef,\r\n} from 'react';\r\nimport {\r\n  useLayoutEffect,\r\n  useResizeObserver,\r\n  useValueEffect,\r\n} from '@react-aria/utils';\r\nimport clsx from 'clsx';\r\nimport {IconButton} from '../buttons/icon-button';\r\nimport {BreadcrumbItem, BreadcrumbItemProps} from './breadcrumb-item';\r\nimport {MoreHorizIcon} from '../../icons/material/MoreHoriz';\r\nimport {ButtonSize} from '../buttons/button-size';\r\nimport {Menu, MenuItem, MenuTrigger} from '../navigation/menu/menu-trigger';\r\nimport {IconSize} from '../../icons/svg-icon';\r\nimport {useTrans} from '../../i18n/use-trans';\r\n\r\nconst MIN_VISIBLE_ITEMS = 1;\r\nconst MAX_VISIBLE_ITEMS = 10;\r\n\r\nexport interface BreadcrumbsProps {\r\n  children?: ReactNode;\r\n  isDisabled?: boolean;\r\n  size?: 'sm' | 'md' | 'lg' | 'xl';\r\n  className?: string;\r\n  currentIsClickable?: boolean;\r\n  isNavigation?: boolean;\r\n}\r\n\r\nexport function Breadcrumb(props: BreadcrumbsProps) {\r\n  const {\r\n    size = 'md',\r\n    children,\r\n    isDisabled,\r\n    className,\r\n    currentIsClickable,\r\n    isNavigation,\r\n  } = props;\r\n  const {trans} = useTrans();\r\n  const style = sizeStyle(size);\r\n\r\n  // Not using React.Children.toArray because it mutates the key prop.\r\n  const childArray: ReactElement<BreadcrumbItemProps>[] = [];\r\n  React.Children.forEach(children, child => {\r\n    if (React.isValidElement(child)) {\r\n      childArray.push(child as ReactElement<BreadcrumbItemProps>);\r\n    }\r\n  });\r\n\r\n  const domRef = useRef<HTMLDivElement>(null);\r\n  const listRef = useRef<HTMLOListElement>(null);\r\n\r\n  const [visibleItems, setVisibleItems] = useValueEffect(childArray.length);\r\n\r\n  const updateOverflow = useCallback(() => {\r\n    const computeVisibleItems = (itemCount: number) => {\r\n      // Refs can be null at runtime.\r\n      const currListRef: HTMLUListElement | null = listRef.current;\r\n      if (!currListRef) {\r\n        return;\r\n      }\r\n\r\n      const listItems = Array.from(currListRef.children) as HTMLLIElement[];\r\n      if (!listItems.length) return;\r\n\r\n      const containerWidth = currListRef.offsetWidth;\r\n      const isShowingMenu = childArray.length > itemCount;\r\n      let calculatedWidth = 0;\r\n      let newVisibleItems = 0;\r\n      let maxVisibleItems = MAX_VISIBLE_ITEMS;\r\n\r\n      calculatedWidth += listItems.shift()!.offsetWidth;\r\n      newVisibleItems++;\r\n\r\n      if (isShowingMenu) {\r\n        calculatedWidth += listItems.shift()?.offsetWidth ?? 0;\r\n        maxVisibleItems--;\r\n      }\r\n\r\n      if (calculatedWidth >= containerWidth) {\r\n        newVisibleItems--;\r\n      }\r\n\r\n      // Ensure the last breadcrumb isn't truncated when we measure it.\r\n      if (listItems.length > 0) {\r\n        const last = listItems.pop();\r\n        last!.style.overflow = 'visible';\r\n\r\n        calculatedWidth += last!.offsetWidth;\r\n        if (calculatedWidth < containerWidth) {\r\n          newVisibleItems++;\r\n        }\r\n\r\n        last!.style.overflow = '';\r\n      }\r\n\r\n      // eslint-disable-next-line no-restricted-syntax\r\n      for (const breadcrumb of listItems.reverse()) {\r\n        calculatedWidth += breadcrumb.offsetWidth;\r\n        if (calculatedWidth < containerWidth) {\r\n          newVisibleItems++;\r\n        }\r\n      }\r\n\r\n      return Math.max(\r\n        MIN_VISIBLE_ITEMS,\r\n        Math.min(maxVisibleItems, newVisibleItems),\r\n      );\r\n    };\r\n\r\n    // eslint-disable-next-line func-names\r\n    setVisibleItems(function* () {\r\n      // Update to show all items.\r\n      yield childArray.length;\r\n\r\n      // Measure, and update to show the items that fit.\r\n      const newVisibleItems = computeVisibleItems(childArray.length);\r\n      yield newVisibleItems;\r\n\r\n      // If the number of items is less than the number of children,\r\n      // then update again to ensure that the menu fits.\r\n      if (newVisibleItems! < childArray.length && newVisibleItems! > 1) {\r\n        yield computeVisibleItems(newVisibleItems!);\r\n      }\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [listRef, children, setVisibleItems]);\r\n\r\n  useResizeObserver({ref: domRef, onResize: updateOverflow});\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useLayoutEffect(updateOverflow, [children]);\r\n\r\n  let contents = childArray;\r\n  if (childArray.length > visibleItems) {\r\n    const selectedKey = childArray.length - 1;\r\n\r\n    const menuItem = (\r\n      <BreadcrumbItem key=\"menu\" sizeStyle={style} isMenuTrigger>\r\n        <MenuTrigger selectionMode=\"single\" selectedValue={selectedKey}>\r\n          <IconButton aria-label=\"â€¦\" disabled={isDisabled} size={style.btn}>\r\n            <MoreHorizIcon />\r\n          </IconButton>\r\n          <Menu>\r\n            {childArray.map((child, index) => {\r\n              const isLast = selectedKey === index;\r\n              return (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={index}\r\n                  onSelected={() => {\r\n                    if (!isLast) {\r\n                      child.props.onSelected?.();\r\n                    }\r\n                  }}\r\n                >\r\n                  {cloneElement(child, {isMenuItem: true})}\r\n                </MenuItem>\r\n              );\r\n            })}\r\n          </Menu>\r\n        </MenuTrigger>\r\n      </BreadcrumbItem>\r\n    );\r\n\r\n    contents = [menuItem];\r\n    const breadcrumbs = [...childArray];\r\n    let endItems = visibleItems;\r\n    if (visibleItems > 1) {\r\n      contents.unshift(breadcrumbs.shift()!);\r\n      endItems--;\r\n    }\r\n    contents.push(...breadcrumbs.slice(-endItems));\r\n  }\r\n\r\n  const lastIndex = contents.length - 1;\r\n  const breadcrumbItems = contents.map((child, index) => {\r\n    const isCurrent = index === lastIndex;\r\n    const isClickable = !isCurrent || currentIsClickable;\r\n\r\n    return cloneElement<BreadcrumbItemProps>(child, {\r\n      key: child.key || index,\r\n      isCurrent,\r\n      sizeStyle: style,\r\n      isClickable,\r\n      isDisabled,\r\n      isLink: isNavigation && child.key !== 'menu',\r\n    });\r\n  });\r\n\r\n  const Element = isNavigation ? 'nav' : 'div';\r\n\r\n  return (\r\n    <Element\r\n      className={clsx(className, 'w-full min-w-0')} // prevent flex parent overflow\r\n      aria-label={trans({message: 'Breadcrumbs'})}\r\n      ref={domRef}\r\n    >\r\n      <ol\r\n        ref={listRef}\r\n        className={clsx('flex flex-nowrap justify-start', style.minHeight)}\r\n      >\r\n        {breadcrumbItems}\r\n      </ol>\r\n    </Element>\r\n  );\r\n}\r\n\r\nfunction sizeStyle(size: BreadcrumbsProps['size']): BreadcrumbSizeStyle {\r\n  switch (size) {\r\n    case 'sm':\r\n      return {font: 'text-sm', icon: 'sm', btn: 'sm', minHeight: 'min-h-36'};\r\n    case 'lg':\r\n      return {font: 'text-lg', icon: 'md', btn: 'md', minHeight: 'min-h-42'};\r\n    case 'xl':\r\n      return {font: 'text-xl', icon: 'md', btn: 'md', minHeight: 'min-h-42'};\r\n    default:\r\n      return {font: 'text-base', icon: 'md', btn: 'md', minHeight: 'min-h-42'};\r\n  }\r\n}\r\n\r\nexport interface BreadcrumbSizeStyle {\r\n  font: string;\r\n  icon: IconSize;\r\n  btn: ButtonSize;\r\n  minHeight: string;\r\n}\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const EditIcon = createSvgIcon(\r\n  <path d=\"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z\" />\r\n, 'EditOutlined');\r\n"],"names":["ChevronRightIcon","createSvgIcon","jsx","BreadcrumbItem","props","isCurrent","sizeStyle","isMenuTrigger","isClickable","isDisabled","onSelected","className","isMenuItem","isLink","children","domProps","jsxs","clsx","MoreHorizIcon","MIN_VISIBLE_ITEMS","MAX_VISIBLE_ITEMS","Breadcrumb","size","currentIsClickable","isNavigation","trans","useTrans","style","childArray","React","child","domRef","useRef","listRef","visibleItems","setVisibleItems","useValueEffect","updateOverflow","useCallback","computeVisibleItems","itemCount","currListRef","listItems","containerWidth","isShowingMenu","calculatedWidth","newVisibleItems","maxVisibleItems","_a","last","breadcrumb","useResizeObserver","useLayoutEffect","contents","selectedKey","MenuTrigger","IconButton","Menu","index","isLast","MenuItem","_b","cloneElement","breadcrumbs","endItems","lastIndex","breadcrumbItems","Element","EditIcon"],"mappings":"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"}