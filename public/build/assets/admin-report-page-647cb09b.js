import{d as g,k as h,e as j,j as t,r as l,aq as b,A as D,o as m,E as d,G as N,f as u,x as y,B as R,cE as S,a4 as F,H as v,T as w}from"./main-1f8acdba.js";import{T as A,a as I,b as P}from"./TrendingUp-56f7b861.js";import{a1 as x,a2 as V,a3 as T,a4 as p,a5 as E,a6 as k,a7 as C}from"./ArrowBack-1cb088fd.js";import{F as z}from"./admin-routes-46b3bb22.js";import"./Edit-d993be71.js";import"./use-resume-subscription-6e23ad24.js";const f="admin/reports";function M(e={}){return g({queryKey:[f,e],queryFn:()=>q(e),placeholderData:h})}function q({types:e,dateRange:n}){const s={};return e&&(s.types=e.join(",")),n&&(s.startDate=n.start.toAbsoluteString(),s.endDate=n.end.toAbsoluteString(),s.timezone=n.start.timeZone),j.get(f,{params:s}).then(a=>a.data)}const B="gap-12 md:gap-24 mb-12 md:mb-24";function H({report:e,isLoading:n}){return e==null||e.pageViews.total,t.jsx(l.Fragment,{})}function _({report:e,isLoading:n}){return t.jsx("div",{className:`flex h-[97px] flex-shrink-0 items-center overflow-x-auto ${B}`,children:e==null?void 0:e.map(s=>t.jsx(G,{datum:s,isLoading:n},s.name))})}function G({datum:e,isLoading:n=!1}){let s;if(l.isValidElement(e.icon))s=l.cloneElement(e.icon,{size:"lg"});else{const a=b(e.icon);s=t.jsx(a,{size:"lg"})}return t.jsxs("div",{className:"rounded-panel flex h-full flex-auto items-center gap-18 whitespace-nowrap border p-20",children:[t.jsx("div",{className:"flex-shrink-0 rounded-lg bg-primary-light/20 p-10 text-primary",children:s}),t.jsxs("div",{className:"flex-auto",children:[t.jsx("div",{className:"flex items-center justify-between gap-20",children:t.jsx("div",{className:"text-lg font-bold text-main",children:t.jsx(D,{initial:!1,mode:"wait",children:n?t.jsx(m.div,{...d,children:t.jsx(N,{className:"min-w-24"})},"skeleton"):t.jsx(m.div,{...d,children:t.jsx(L,{datum:e})},"value")})})}),t.jsxs("div",{className:"flex items-center justify-between gap-20",children:[t.jsx("h2",{className:"text-sm text-muted",children:e.name}),(e.percentageChange!=null||e.previousValue!=null)&&t.jsx("div",{className:"flex items-center gap-10",children:t.jsx(Q,{datum:e})})]})]})]},e.name)}function L({datum:e}){switch(e.type){case"fileSize":return t.jsx(z,{bytes:e.currentValue});case"percentage":return t.jsx(x,{value:e.currentValue,style:"percent",maximumFractionDigits:1});default:return t.jsx(x,{value:e.currentValue})}}function Q({datum:e}){const n=U(e);let s;return n>0?s=t.jsx(A,{size:"md",className:"text-positive"}):n===0?s=t.jsx(I,{className:"text-muted"}):s=t.jsx(P,{className:"text-danger"}),t.jsxs(l.Fragment,{children:[s,t.jsxs("div",{className:"text-sm font-semibold text-muted",children:[n,"%"]})]})}function U({percentageChange:e,previousValue:n,currentValue:s}){return e!=null||n==null||s==null?e??0:n===0?100:Math.round((s-n)/n*100)}const K={month:"short",day:"2-digit"};function O({value:e,onChange:n,disabled:s,compactOnMobile:a=!0,enableCompare:r=!1,granularity:i="minute"}){const o=u();return t.jsxs(y,{type:"popover",onClose:c=>{c&&n(c)},children:[t.jsx(R,{variant:"outline",color:"chip",endIcon:t.jsx(V,{}),disabled:s,children:t.jsx(T,{start:e.start,end:e.end,options:o&&a?K:S.short})}),t.jsx(W,{value:e,enableCompare:r,granularity:i})]})}function W({value:e,enableCompare:n,granularity:s}){const a=u(),r=p({granularity:s,defaultValue:{start:e.start,end:e.end,preset:e.preset},closeDialogOnSelection:!1}),i=!!e.compareStart&&!!e.compareEnd,o=p({granularity:s,defaultValue:i?{start:e.compareStart,end:e.compareEnd,preset:e.comparePreset}:E[0].getRangeValue(r.selectedValue)});return t.jsx(k,{state:r,compareState:n?o:void 0,compareVisibleDefault:i,showInlineDatePickerField:!a})}function te(){const[e,n]=l.useState(()=>C[2].getRangeValue()),{isLoading:s,data:a}=M({dateRange:e});console.log("analadata",a);const r=t.jsx(w,{message:"Visitors report"}),{user:i}=F(),o=(i==null?void 0:i.user_type)==="super_admin",c=(i==null?void 0:i.first_name)||"User";return t.jsxs("div",{className:"min-h-full gap-12 overflow-x-hidden p-12 md:gap-24 md:p-24",children:[t.jsxs("div",{className:"mb-24 items-center justify-between gap-24 md:flex",children:[t.jsx(v,{children:r}),o&&t.jsx("h1",{className:"mb-24 text-3xl font-light md:mb-0",children:r}),!o&&t.jsx(t.Fragment,{children:t.jsxs("h1",{className:"mb-24 text-3xl font-light md:mb-0",children:["Welcome back ",t.jsx("b",{children:c})]})}),t.jsx(O,{value:e,onChange:n})]}),t.jsx(_,{report:a==null?void 0:a.headerReport}),t.jsx(H,{report:a==null?void 0:a.visitorsReport,isLoading:s})]})}export{te as default};
//# sourceMappingURL=admin-report-page-647cb09b.js.map
