import{u as fe,j as e,c as y,C as _n,T as r,O as tt,m as x,a as De,k as Fn,b as $,R as I,r as d,d as be,e as zn,I as p,f as k,g as z,$ as ks,A as Ke,h as Dt,i as Rt,l as An,n as ze,o as U,D as Q,p as se,q as X,s as O,F as ne,t as In,B as v,v as P,w as D,x as Ae,S as Ns,y as Ge,z as He,P as Vt,E as Cs,G as R,H as T,J as V,K as re,L as xe,M as _s,N as Fs,Q as de,U as he,V as g,W as qt,X as Ie,Y as Bs,Z as W,_ as H,a0 as Pn,a1 as En,a2 as $n,a3 as at,a4 as F,a5 as Mn,a6 as Ln,a7 as Ot,a8 as os,a9 as zs,aa as As,ab as Re,ac as ke,ad as nt,ae as ve,af as Bt,ag as Ut,ah as vt,ai as cs,aj as Tn,ak as ie,al as Ht,am as Dn,an as Rn,ao as ds,ap as us,aq as Vn,ar as ce,as as rt,at as qn,au as it,av as lt,aw as Qe,ax as On,ay as yt,az as Me,aA as K,aB as ot,aC as Je,aD as Ye,aE as Wt,aF as Kt,aG as ss,aH as Gt,aI as Bn,aJ as Un,aK as Qt,aL as Hn,aM as Jt,aN as Wn,aO as Kn,aP as Gn,aQ as Qn,aR as Jn,aS as Ve,aT as Yn,aU as Zn,aV as Xn,aW as er,aX as sr,aY as ct,aZ as tr,a_ as ar,a$ as nr,b0 as rr,b1 as ir,b2 as lr,b3 as or,b4 as cr,b5 as dr,b6 as ur,b7 as mr,b8 as Yt,b9 as xr,ba as hr,bb as gr,bc as J,bd as pr}from"./main-512891a4.js";import{D as jr,a as fr,b as br,c as vr,F as ae,d as oe,e as ms,u as xs,S as hs,K as Is,f as gs,g as dt,I as yr,N as wr,h as Sr,C as kr,i as Nr,B as Cr,j as _r,T as Fr,A as pe,k as zr,l as Ar,m as Zt,n as Us,o as q,p as Ir,q as Pr,r as Er,s as $r,t as $e,v as Ps,w as Es,x as Hs,y as G,U as Mr,M as Xt,z as Lr,E as Tr,G as Dr,H as Rr,J as Vr,L as qr,O as Or,P as ea,Q as Br,R as Ur}from"./UnfoldMore-0121ab8e.js";import{F as ue,E as Ne,B as Hr,a as wt}from"./Edit-2020f921.js";import{u as sa,a as Wr}from"./use-resume-subscription-ff75954a.js";function Kr({className:s,isCompactMode:t}){const{version:a}=fe();return e.jsxs("div",{className:y(s,"relative flex flex-col gap-20 overflow-y-auto border-r bg-alt px-12 pb-16 pt-26 text-sm font-medium text-muted"),children:[e.jsx(_n,{matchDescendants:n=>n==="/admin",menu:"admin-sidebar",orientation:"vertical",onlyShowIcons:t,itemClassName:({isActive:n})=>y("block w-full rounded-button py-12 px-16",n?"bg-primary/6 text-primary font-semibold":"hover:bg-hover"),gap:"gap-8"}),!t&&e.jsx("div",{className:"mt-auto gap-14 px-16 text-xs",children:e.jsx(r,{message:"Version: :number",values:{number:a}})})]})}function Gr(){return e.jsxs(jr,{name:"admin",leftSidenavCanBeCompact:!0,children:[e.jsx(fr,{size:"sm",menuPosition:"admin-navbar"}),e.jsx(br,{position:"left",size:"sm",children:e.jsx(Kr,{})}),e.jsx(vr,{children:e.jsx("div",{className:"bg dark:bg-alt",children:e.jsx(tt,{})})})]})}const Qr=[{key:"email_verified_at",label:x("Email"),description:x("Email verification status"),defaultOperator:ae.ne,control:{type:oe.Select,defaultValue:"01",options:[{key:"01",label:x("is confirmed"),value:{value:null,operator:ae.ne}},{key:"02",label:x("is not confirmed"),value:{value:null,operator:ae.eq}}]}},ms({description:x("Date user registered or was created")}),xs({description:x("Date user was last updated")}),{key:"subscriptions",label:x("Subscription"),description:x("Whether user is subscribed or not"),defaultOperator:ae.eq,control:{type:oe.Select,defaultValue:"01",options:[{key:"01",label:x("is subscribed"),value:{value:"*",operator:ae.has}},{key:"02",label:x("is not subscribed"),value:{value:"*",operator:ae.doesntHave}}]}}],Z=(s,t)=>{const a=s.split("/");return t&&a.push(t),a};function Jr(s,t,a,n){return De({queryKey:Z(s,t),queryFn:({signal:i})=>Yr(s,t,n,i),placeholderData:Fn,...a})}async function Yr(s,t,a,n){t.query&&await new Promise(l=>setTimeout(l,300));const i=await $.get(s,{params:t,signal:t.query?n:void 0}).then(l=>l.data);return a==null||a(i),i}const ta=I.createContext(null);function ut(){return d.useContext(ta)}function Zr(s){return"next_cursor"in s?s.next_cursor!=null:"last_page"in s?s.current_page<s.last_page:s.data.length>0&&s.data.length>=s.per_page}const Xr=15,ei=[{key:10},{key:15},{key:20},{key:50},{key:100}];function si({query:s,onPerPageChange:t,onPageChange:a,className:n}){var u;const i=be(),l=zn(),o=(u=s.data)==null?void 0:u.pagination;if(!o)return null;const c=t?e.jsx(hs,{minWidth:"min-w-auto",selectionMode:"single",disabled:s.isLoading,labelPosition:"side",size:"xs",label:e.jsx(r,{message:"Items per page"}),selectedValue:o.per_page||Xr,onSelectionChange:m=>t(m),children:ei.map(m=>e.jsx(p,{value:m.key,children:m.key},m.key))}):null;return e.jsxs("div",{className:y("flex h-54 select-none items-center justify-end gap-20 px-20",n),children:[!i&&c,o.from&&o.to&&"total"in o&&e.jsx("div",{className:"text-sm",children:e.jsx(r,{message:":from - :to of :total",values:{from:o.from,to:o.to,total:l.format(o.total)}})}),e.jsxs("div",{className:"text-muted",children:[e.jsx(k,{disabled:s.isFetching||o.current_page<2,onClick:()=>{a==null||a((o==null?void 0:o.current_page)-1)},children:e.jsx(Is,{})}),e.jsx(k,{disabled:s.isFetching||!Zr(o),onClick:()=>{a==null||a((o==null?void 0:o.current_page)+1)},children:e.jsx(gs,{})})]})]})}const ti=z(e.jsx("path",{d:"M7 6h10l-5.01 6.3L7 6zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAltOutlined"),St={variants:{open:{height:"auto",visibility:"visible",transitionEnd:{overflow:"auto"}},closed:{height:0,overflow:"hidden",transitionEnd:{visibility:"hidden"}}},transition:{type:"tween",duration:.2}},ps=I.forwardRef(({variant:s="default",mode:t="single",children:a,className:n,isLazy:i,...l},o)=>{const[c,u]=ks(l.expandedValues,l.defaultExpandedValues||[],l.onExpandedChange),m=I.Children.count(a);return e.jsx("div",{className:y(s==="outline"&&"space-y-10",n),ref:o,role:"presentation",children:e.jsx(Ke,{children:e.jsx(Dt,{children:I.Children.map(a,(h,j)=>d.isValidElement(h)?d.cloneElement(h,{key:h.key||j,value:h.props.value||j,isFirst:j===0,isLast:j===m-1,mode:t,variant:s,expandedValues:c,setExpandedValues:u,isLazy:i}):null)})})})});function Le({children:s,label:t,disabled:a,bodyClassName:n,labelClassName:i,buttonPadding:l="py-10 pl-14 pr-10",startIcon:o,description:c,endAppend:u,chevronPosition:m="right",isFirst:h,isLast:j,...b}){const{expandedValues:S,setExpandedValues:C,variant:f,value:N,mode:_,isLazy:A}=b,E=d.useRef(null),B=!a&&S.includes(N),M=d.useRef(!1);B&&(M.current=!0);const L=Rt(),te=d.useId(),Ee=`${te}-button`,le=`${te}-panel`,vs=ys=>{switch(ys.key){case"ArrowDown":L==null||L.focusNext();break;case"ArrowUp":L==null||L.focusPrevious();break;case"Home":L==null||L.focusFirst();break;case"End":L==null||L.focusLast();break}},we=()=>{const ys=S.indexOf(N);if(ys>-1){const bt=[...S];bt.splice(ys,1),C(bt)}else C(_==="single"?[N]:[...S,N])},ft=e.jsx("div",{className:y(f==="minimal"&&""),children:e.jsx(An,{"aria-hidden":"true",size:"md",className:y(a?"text-disabled":"text-muted",B&&"rotate-180 transition-transform")})});return e.jsxs("div",{className:y(f==="default"&&"border-b",f==="outline"&&"rounded-panel border",a&&"text-disabled"),children:[e.jsxs("h3",{className:y("flex w-full items-center justify-between text-sm",a&&"pointer-events-none",h&&f==="default"&&"border-t",B&&f!=="minimal"?"border-b":"border-b border-b-transparent",f==="outline"?B?"rounded-panel-t":"rounded-panel":void 0),children:[e.jsxs("button",{disabled:a,"aria-expanded":B,id:Ee,"aria-controls":le,type:"button",ref:E,onKeyDown:vs,onClick:()=>{a||we()},className:y("flex flex-auto items-center gap-10 text-left outline-none hover:bg-hover focus-visible:bg-primary/focus",l),children:[m==="left"&&ft,o&&d.cloneElement(o,{size:"md",className:y(o.props.className,a?"text-disabled":"text-muted")}),e.jsxs("div",{className:"flex-auto overflow-hidden overflow-ellipsis",children:[e.jsx("div",{className:i,"data-testid":"accordion-label",children:t}),c&&e.jsx("div",{className:"text-xs text-muted",children:c})]}),m==="right"&&ft]}),u&&e.jsx("div",{className:"flex-shrink-0 px-4 text-sm text-muted",children:u})]}),e.jsx(ze.div,{"aria-labelledby":te,role:"region",variants:St.variants,transition:St.transition,initial:!1,animate:B?"open":"closed",children:e.jsx("div",{className:y("p-16",n),children:!A||M?s:null})})]})}function ai({filter:s}){return null}function ni({filters:s}){const{decodedFilters:t}=dt(s),{formId:a}=U(),[n,i]=d.useState(()=>t.map(c=>c.key)),l=e.jsx(v,{size:"xs",variant:"outline",className:"mr-auto",onClick:()=>{i([])},children:e.jsx(r,{message:"Clear"})}),o=e.jsx(v,{size:"xs",variant:"flat",color:"primary",className:"ml-auto",type:"submit",form:a,children:e.jsx(r,{message:"Apply"})});return e.jsxs(Q,{className:"min-w-[300px]",maxWidth:"max-w-400",size:"auto",children:[e.jsx(se,{padding:"px-14 py-10",leftAdornment:l,rightAdornment:o,children:e.jsx(r,{message:"Filter"})}),e.jsx(X,{padding:"p-0",children:e.jsx(ri,{filters:s,expandedFilters:n,setExpandedFilters:i})})]})}function ri({filters:s,expandedFilters:t,setExpandedFilters:a}){const{decodedFilters:n,replaceAll:i}=dt(s),l={};s.forEach(m=>{const h=n.find(j=>j.key===m.key);l[m.key]=(h==null?void 0:h.value)!==void 0?h:{value:m.control.defaultValue,operator:m.defaultOperator}});const o=O({defaultValues:l}),{formId:c,close:u}=U();return e.jsx(ne,{form:o,id:c,onSubmit:m=>{const h=Object.entries(m).filter(([j,b])=>t.includes(j)&&b!==void 0).map(([j,b])=>({key:j,...b}));i(h),u()},children:e.jsx(ps,{mode:"multiple",expandedValues:t,onExpandedChange:a,children:s.map(m=>e.jsxs(Le,{startIcon:e.jsx(In,{checked:t.includes(m.key)}),value:m.key,label:e.jsx(r,{...m.label}),bodyClassName:"max-h-288 overflow-y-auto compact-scrollbar",children:[m.description&&e.jsx("div",{className:y("text-xs text-muted",m.control.type!==oe.BooleanToggle&&"mb-14"),children:e.jsx(r,{...m.description})}),e.jsx(ii,{filter:m})]},m.key))})})}function ii({filter:s}){switch(s.control.type){case oe.Select:return e.jsx(Nr,{filter:s});case oe.ChipField:return e.jsx(kr,{filter:s});case oe.DateRangePicker:return e.jsx(Sr,{filter:s});case oe.SelectModel:return e.jsx(wr,{filter:s});case oe.Input:return e.jsx(yr,{filter:s});case oe.BooleanToggle:return e.jsx(ai,{filter:s});case"custom":const t=s.control.panel;return e.jsx(t,{filter:s});default:return null}}function li({filters:s,icon:t=e.jsx(ti,{}),color:a="primary",variant:n="outline",size:i="sm",disabled:l,className:o}){const c=be(),u=e.jsx(v,{variant:n,color:a,startIcon:t,disabled:l,size:i,className:o,children:e.jsx(r,{message:"Filter"})}),m=e.jsx(k,{color:a,size:"sm",variant:n,disabled:l,className:o,children:t});return e.jsxs(P,{type:"popover",children:[c?m:u,e.jsx(ni,{filters:s})]})}function oi({actions:s,filters:t,filtersLoading:a,searchPlaceholder:n=x("Type to search..."),searchValue:i="",onSearchChange:l}){const{trans:o}=D();return e.jsxs(aa,{children:[e.jsx(Ae,{inputTestId:"datatable-search",className:"flex-auto max-w-440 mr-auto",inputWrapperClassName:"mr-24 md:mr-0",placeholder:o(n),startAdornment:e.jsx(Ns,{}),value:i,onChange:c=>{l(c.target.value)}}),t&&e.jsx(li,{filters:t,disabled:a}),s]})}function aa({children:s,...t}){return e.jsx("div",{className:"mb-24 flex items-center gap-8 md:gap-12 text-muted relative h-42",...t,children:s})}function ci({actions:s,selectedItemsCount:t}){return e.jsxs(aa,{"data-testid":"datatable-selected-header",children:[e.jsx("div",{className:"mr-auto",children:e.jsx(r,{message:"[one 1 item|other :count items] selected",values:{count:t}})}),s]})}function di(){return e.jsxs(ze.div,{className:"flex items-center gap-6 h-30",...Ge,children:[e.jsx(He,{variant:"rect",size:"h-full w-144",radius:"rounded-md"}),e.jsx(He,{variant:"rect",size:"h-full w-112",radius:"rounded-md"}),e.jsx(He,{variant:"rect",size:"h-full w-172",radius:"rounded-md"})]},"filter-list-skeleton")}function na({filters:s,filtersLoading:t,columns:a,searchPlaceholder:n,queryParams:i,endpoint:l,actions:o,selectedActions:c,emptyStateMessage:u,tableDomProps:m,onRowAction:h,enableSelection:j=!0,selectionStyle:b="checkbox",children:S,cellHeight:C,collapseTableOnMobile:f=!0}){var vs;const N=be(),{trans:_}=D(),{encodedFilters:A}=dt(s),[E,B]=d.useState({perPage:15}),[M,L]=d.useState([]),te=Jr(l,{...E,...i,[Cr]:A},void 0,()=>L([])),Ee=!!(E.query||E.filters||A),le=(vs=te.data)==null?void 0:vs.pagination;return e.jsxs(ta.Provider,{value:{selectedRows:M,setSelectedRows:L,endpoint:l,params:E,setParams:B,query:te},children:[S,e.jsx(Ke,{initial:!1,mode:"wait",children:M.length?e.jsx(ci,{selectedItemsCount:M.length,actions:c},"selected"):e.jsx(oi,{searchPlaceholder:n,searchValue:E.query,onSearchChange:we=>B({...E,query:we}),actions:o,filters:s,filtersLoading:t},"default")}),s&&e.jsx("div",{className:"mb-14",children:e.jsx(Ke,{initial:!1,mode:"wait",children:t&&A?e.jsx(di,{}):e.jsx(ze.div,{...Ge,children:e.jsx(_r,{filters:s})},"filter-list")})}),e.jsxs("div",{className:y("relative rounded-panel",(!N||!f)&&"border"),children:[te.isFetching&&e.jsx(Vt,{isIndeterminate:!0,className:"absolute left-0 top-0 z-10 w-full","aria-label":_({message:"Loading"}),size:"xs"}),e.jsx("div",{className:"relative overflow-x-auto md:overflow-hidden",children:e.jsx(Fr,{...m,columns:a,data:(le==null?void 0:le.data)||[],sortDescriptor:E,onSortChange:we=>{B({...E,...we})},selectedRows:M,enableSelection:j,selectionStyle:b,onSelectionChange:L,onAction:h,collapseOnMobile:f,cellHeight:C})}),(te.isFetched||te.isPlaceholderData)&&!(le!=null&&le.data.length)?e.jsx("div",{className:"pt-50",children:d.cloneElement(u,{isFiltering:Ee})}):void 0,e.jsx(si,{query:te,onPageChange:we=>B({...E,page:we}),onPerPageChange:we=>B({...E,perPage:we})})]})]})}function Pe({title:s,headerContent:t,headerItemsAlign:a="items-end",className:n,...i}){const l=d.useId();return e.jsxs("div",{className:y("p-12 md:p-24",n),children:[s&&e.jsxs("div",{className:y("mb-16",t&&`flex ${a} gap-4`),children:[e.jsx(Cs,{children:s}),e.jsx("h1",{className:"text-3xl font-light first:capitalize",id:l,children:s}),t]}),e.jsx(na,{...i,tableDomProps:{"aria-labelledby":s?l:void 0}})]})}function ui(){const{endpoint:s,selectedRows:t,setSelectedRows:a}=ut();return R({mutationFn:()=>mi(s,t),onSuccess:async()=>{await T.invalidateQueries({queryKey:Z(s)}),V(x("Deleted [one 1 record|other :count records]",{values:{count:t.length}})),a([])},onError:n=>re(n,x("Could not delete records"))})}function mi(s,t){return $.delete(`${s}/${t.join(",")}`).then(a=>a.data)}function qe(){return e.jsxs(P,{type:"modal",children:[e.jsx(v,{variant:"flat",color:"danger",className:"ml-auto",children:e.jsx(r,{message:"Delete"})}),e.jsx(xi,{})]})}function xi(){const s=ui(),{selectedRows:t}=ut(),{close:a}=U();return e.jsx(xe,{isLoading:s.isPending,title:e.jsx(r,{message:"Delete [one 1 item|other :count items]?",values:{count:t.length}}),body:e.jsx(r,{message:"This will permanently remove the items and cannot be undone."}),confirm:e.jsx(r,{message:"Delete"}),isDanger:!0,onConfirm:()=>{s.mutate(void 0,{onSuccess:()=>a()})}})}function je({isFiltering:s,title:t,filteringTitle:a,image:n,size:i,className:l}){const o=be();return i||(i=o?"sm":"md"),e.jsx(_s,{className:l,size:i,image:e.jsx(Fs,{src:n}),title:s&&a?a:t,description:s&&a?e.jsx(r,{message:"Try another search query or different filters"}):void 0})}const ns=""+new URL("team-4364fe09.svg",import.meta.url).href,Oe=I.forwardRef(({children:s,to:t,elementType:a,onClick:n},i)=>be()?e.jsx(k,{ref:i,variant:"flat",color:"primary",className:"flex-shrink-0",size:"sm",to:t,elementType:a,onClick:n,children:e.jsx(pe,{})}):e.jsx(v,{ref:i,startIcon:e.jsx(pe,{}),variant:"flat",color:"primary",size:"sm",to:t,elementType:a,onClick:n,children:s}));function hi(s){return R({mutationFn:t=>gi(s,t),onError:t=>re(t)})}function gi(s,t){return $.post(s,t).then(a=>a.data)}function pi(){const{close:s}=U();return e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Csv export"})}),e.jsx(X,{children:e.jsx(r,{message:`Your request is being processed. We'll email you when the report is ready to download. In\r
            certain cases, it might take a little longer, depending on the number of items beings\r
            exported and the volume of activity.`})}),e.jsx(de,{children:e.jsx(v,{variant:"flat",color:"primary",onClick:s,children:e.jsx(r,{message:"Got it"})})})]})}function ra({endpoint:s,payload:t}){const[a,n]=d.useState(!1),i=hi(s);return e.jsxs(d.Fragment,{children:[e.jsx(k,{variant:"outline",color:"primary",size:"sm",className:"flex-shrink-0",disabled:i.isPending,onClick:()=>{i.mutate(t,{onSuccess:l=>{l.downloadPath?zr(l.downloadPath):n(!0)}})},children:e.jsx(Ar,{})}),e.jsx(P,{type:"modal",isOpen:a,onOpenChange:n,children:e.jsx(pi,{})})]})}function Ze({image:s,label:t,description:a,labelClassName:n,avatarSize:i="md"}){return e.jsxs("div",{className:"flex items-center gap-12",children:[s&&e.jsx(Zt,{size:i,className:"flex-shrink-0",src:s}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("div",{className:y(n,"overflow-hidden overflow-ellipsis"),children:t}),a&&e.jsx("div",{className:"overflow-hidden overflow-ellipsis text-xs text-muted",children:a})]})]})}const ia=z(e.jsx("path",{d:"m20 17.17-3.37-3.38c.64.22 1.23.48 1.77.76.97.51 1.58 1.52 1.6 2.62zm1.19 4.02-1.41 1.41-2.61-2.6H4v-2.78c0-1.12.61-2.15 1.61-2.66 1.29-.66 2.87-1.22 4.67-1.45L1.39 4.22 2.8 2.81l18.39 18.38zM15.17 18l-3-3H12c-2.37 0-4.29.73-5.48 1.34-.32.16-.52.5-.52.88V18h9.17zM12 6c1.1 0 2 .9 2 2 0 .86-.54 1.59-1.3 1.87l1.48 1.48C15.28 10.64 16 9.4 16 8c0-2.21-1.79-4-4-4-1.4 0-2.64.72-3.35 1.82l1.48 1.48C10.41 6.54 11.14 6 12 6z"}),"PersonOffOutlined");function ji(s,t){return R({mutationFn:a=>fi(t,a),onSuccess:async()=>{V(x("User suspended")),await T.invalidateQueries({queryKey:["users"]})},onError:a=>he(a,s)})}function fi(s,t){return $.post(`users/${s}/ban`,t).then(a=>a.data)}function bi({user:s}){const{trans:t}=D(),{close:a,formId:n}=U(),i=O({defaultValues:{permanent:!0}}),l=i.watch("permanent"),o=ji(i,s.id);return e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Suspend “:name“",values:{name:s.display_name}})}),e.jsx(X,{children:e.jsxs(ne,{id:n,form:i,onSubmit:c=>o.mutate(c,{onSuccess:()=>a()}),children:[e.jsx(Us,{name:"ban_until",label:e.jsx(r,{message:"Suspend until"}),disabled:l}),e.jsx(q,{name:"permanent",className:"mt-12",children:e.jsx(r,{message:"Permanent"})}),e.jsx(g,{className:"mt-24",name:"comment",inputElementType:"textarea",maxLength:250,label:e.jsx(r,{message:"Reason"}),placeholder:t(x("Optional"))})]})}),e.jsxs(de,{children:[e.jsx(v,{onClick:()=>a(),children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{form:n,variant:"flat",color:"primary",type:"submit",disabled:o.isPending,children:e.jsx(r,{message:"Suspend"})})]})]})}function vi(s){return R({mutationFn:()=>yi(s),onSuccess:()=>{V(x("User unsuspended")),T.invalidateQueries({queryKey:["users"]})},onError:t=>re(t)})}function yi(s){return $.delete(`users/${s}/unban`).then(t=>t.data)}function wi(){return R({mutationFn:s=>Si(s),onSuccess:async s=>{V(x(`Impersonating User "${s.user.display_name}"`)),window.location.href="/"},onError:s=>re(s)})}function Si(s){return $.post(`admin/users/impersonate/${s.userId}`,s).then(t=>t.data)}const ki=z(e.jsx("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"}),"LoginOutlined"),kt=[{key:"name",allowsSorting:!0,sortingKey:"email",width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(r,{message:"User"}),body:s=>e.jsx(Ze,{image:s.avatar,label:s.display_name,description:s.email})},{key:"subscribed",header:()=>e.jsx(r,{message:"Subscribed"}),width:"w-96",body:s=>{var t;return(t=s.subscriptions)!=null&&t.length?e.jsx(qt,{className:"text-positive icon-md"}):e.jsx(Ie,{className:"text-danger icon-md"})}},{key:"roles",header:()=>e.jsx(r,{message:"Roles"}),body:s=>e.jsx(Ir,{radius:"rounded",size:"xs",children:s==null?void 0:s.roles.map(t=>e.jsx(Bs,{selectable:!0,children:e.jsx(W,{className:y("capitalize"),target:"_blank",to:`/admin/roles/${t.id}/edit`,children:e.jsx(r,{message:t.name})})},t.id))})},{key:"firstName",allowsSorting:!0,header:()=>e.jsx(r,{message:"First name"}),body:s=>s.first_name},{key:"lastName",allowsSorting:!0,header:()=>e.jsx(r,{message:"Last name"}),body:s=>s.last_name},{key:"createdAt",allowsSorting:!0,width:"w-96",header:()=>e.jsx(r,{message:"Created at"}),body:s=>e.jsx("time",{children:e.jsx(ue,{date:s.created_at})})},{key:"actions",header:()=>e.jsx(r,{message:"Actions"}),width:"w-128 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(W,{to:`${s.id}/edit`,children:e.jsx(H,{label:e.jsx(r,{message:"Edit user"}),children:e.jsx(k,{size:"md",children:e.jsx(Ne,{})})})}),s.banned_at?e.jsx(Ni,{user:s}):e.jsxs(P,{type:"modal",children:[e.jsx(H,{label:e.jsx(r,{message:"Suspend user"}),children:e.jsx(k,{size:"md",children:e.jsx(ia,{})})}),e.jsx(bi,{user:s})]}),e.jsx(Ci,{user:s})]})}];function Ni({user:s}){const t=vi(s.id);return e.jsxs(P,{type:"modal",onClose:a=>{a&&t.mutate()},children:[e.jsx(H,{label:e.jsx(r,{message:"Remove suspension"}),children:e.jsx(k,{size:"md",color:"danger",children:e.jsx(ia,{})})}),e.jsx(xe,{isDanger:!0,title:e.jsx(r,{message:"Suspend “:name“",values:{name:s.display_name}}),body:e.jsx(r,{message:"Are you sure you want to remove suspension from this user?"}),confirm:e.jsx(r,{message:"Unsuspend"})})]})}function Ci({user:s}){const t=wi();return e.jsxs(P,{type:"modal",children:[e.jsx(H,{label:e.jsx(r,{message:"Login as user"}),children:e.jsx(k,{size:"md",children:e.jsx(ki,{})})}),e.jsx(xe,{title:e.jsx(r,{message:"Login as “:name“",values:{name:s.display_name}}),isLoading:t.isPending,body:e.jsx(r,{message:"Are you sure you want to login as this user?"}),confirm:e.jsx(r,{message:"Login"}),onConfirm:()=>{t.mutate({userId:s.id})}})]})}function _i(){const{billing:s}=fe(),t=s.enable?kt:kt.filter(a=>a.key!=="subscribed");return e.jsx(d.Fragment,{children:e.jsx(Pe,{endpoint:"users",title:e.jsx(r,{message:"Users"}),filters:Qr,columns:t,actions:e.jsx(Fi,{}),queryParams:{with:"subscriptions,bans"},selectedActions:e.jsx(qe,{}),emptyStateMessage:e.jsx(je,{image:ns,title:e.jsx(r,{message:"No users have been created yet"}),filteringTitle:e.jsx(r,{message:"No matching users"})})})})}function Fi(){return e.jsxs(d.Fragment,{children:[e.jsx(ra,{endpoint:"users/csv/export"}),e.jsx(Oe,{elementType:W,to:"new",children:e.jsx(r,{message:"Add new user"})})]})}const zi=s=>(t,a,n)=>{const i=n.subscribe;return n.subscribe=(o,c,u)=>{let m=o;if(c){const h=(u==null?void 0:u.equalityFn)||Object.is;let j=o(n.getState());m=b=>{const S=o(b);if(!h(j,S)){const C=j;c(j=S,C)}},u!=null&&u.fireImmediately&&c(j,j)}return i(m)},s(t,a,n)},Ai=zi;function la(s,t){return s.reduce((a,n,i)=>{const l=Math.floor(i/t);return a[l]||(a[l]=[]),a[l].push(n),a},[])}const Ii={preview:{defaultRoute:"/",navigationRoutes:[]},sections:{general:{label:x("General"),position:1,buildBreadcrumb:()=>[{label:x("General"),location:"general"}]},themes:{label:x("Themes"),position:2,buildBreadcrumb:(s,t)=>{var l;const a=s.split("/").filter(o=>!!o),[,,,n]=a,i=[{label:x("Themes"),location:"themes"}];return n!=null&&i.push({label:(l=t.appearance.themes.all[+n])==null?void 0:l.name,location:`themes/${n}`}),a.at(-1)==="font"&&i.push({label:x("Font"),location:`themes/${n}/font`}),a.at(-1)==="radius"&&i.push({label:x("Rounding"),location:`themes/${n}/radius`}),i}},menus:{label:x("Menus"),position:3,buildBreadcrumb:(s,t)=>{const a=s.split("/").filter(o=>!!o),[,,...n]=a,i=[{label:x("Menus"),location:"menus"}],l=la(n,2);return l.forEach(([o,c],u)=>{var m,h;if(o==="menus"&&c!=null)i.push({label:(m=t.settings.menus[+c])==null?void 0:m.name,location:`menus/${c}`});else if(o==="items"&&c!=null){const[,j]=l[u-1];i.push({label:(h=t.settings.menus[+j].items[+c])==null?void 0:h.label,location:`menus/${j}/${c}`})}}),i},config:{availableRoutes:["/","/login","/register","/contact","/billing/pricing","/account-settings","/admin","/admin/appearance","/admin/settings","/admin/plans","/admin/subscriptions","/admin/users","/admin/roles","/admin/pages","/admin/tags","/admin/files","/admin/localizations","/admin/ads","/admin/settings/authentication","/admin/settings/branding","/admin/settings/cache","/admin/settings/providers","/api-docs"],positions:["admin-navbar","admin-sidebar","custom-page-navbar","auth-page-footer","auth-dropdown","account-settings-page","billing-page","checkout-page-navbar","checkout-page-footer","pricing-table-page","contact-us-page","notifications-page","footer","footer-secondary"]}},"custom-code":{label:x("Custom Code"),position:4,buildBreadcrumb:()=>[{label:x("Custom code"),location:"custom-code"}]}}},oa={preview:{defaultRoute:"drive",navigationRoutes:["s","drive"]},sections:{menus:{config:{positions:["drive-navbar","drive-sidebar","homepage-navbar","shareable-link-page","footer","footer-secondary"],availableRoutes:["/drive","/drive/shares","/drive/recent","/drive/starred","/drive/trash"]}}}},ca=Pn.all([Ii,oa]),$s=En()(Ai($n((s,t)=>({defaults:null,iframeWindow:null,config:ca,setDefaults:a=>{s(n=>{n.defaults={...a}})},setIframeWindow:a=>{s(()=>({iframeWindow:a}))},preview:{navigate:a=>{var o;const n=(o=t().config)==null?void 0:o.sections[a],i=(n==null?void 0:n.previewRoute)||"/",l=t().iframeWindow;i&&Ue(l,{type:"navigate",to:i})},setValues:a=>{const n=t().iframeWindow;Ue(n,{type:"setValues",values:a})},setThemeFont:a=>{const n=t().iframeWindow;Ue(n,{type:"setThemeFont",value:a})},setThemeValue:(a,n)=>{const i=t().iframeWindow;Ue(i,{type:"setThemeValue",name:a,value:n})},setActiveTheme:a=>{const n=t().iframeWindow;Ue(n,{type:"setActiveTheme",themeId:a})},setCustomCode:(a,n)=>{const i=t().iframeWindow;Ue(i,{type:"setCustomCode",mode:a,value:n})},setHighlight:a=>{s(()=>{var l;let n=null;const i=(l=t().iframeWindow)==null?void 0:l.document;i&&a&&(n=i.querySelector(a)),n&&requestAnimationFrame(()=>{n&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})})}}}))));function Ue(s,t){s&&s.postMessage({source:"be-appearance-editor",...t},"*")}function Y(){return $s.getState()}function Pi(){return R({mutationFn:s=>Ei(s),onSuccess:async()=>{await T.invalidateQueries({queryKey:["admin/appearance/values"]}),V(x("Changes saved"))},onError:s=>re(s)})}function Ei(s){return $.post("admin/appearance",{changes:s}).then(t=>t.data)}function $i(){return De({queryKey:["admin/appearance/values"],queryFn:()=>Mi(),staleTime:1/0})}function Mi(){return $.get("admin/appearance/values").then(s=>s.data)}function Li(){const{pathname:s}=at(),{getValues:t}=F(),[a,n]=d.useState(null);return d.useEffect(()=>{var l;const[,,i]=s.split("/").filter(o=>!!o);if(i){const o=(l=Y().config)==null?void 0:l.sections[i];if(o){n([{label:x("Appearance"),location:""},...o.buildBreadcrumb(s,t())]);return}}n(null)},[s,t]),!a||a.length<2?null:e.jsxs("div",{className:"flex items-center border-b h-60 flex-shrink-0",children:[e.jsx(k,{iconSize:"md",radius:"rounded-none",className:"text-muted h-full w-50 flex-shrink-0",elementType:W,to:`/admin/appearance/${a[a.length-2].location}`,children:e.jsx(Is,{})}),e.jsxs("div",{className:"border-l p-10 min-w-0",children:[e.jsx("div",{className:"text-xs text-muted",children:e.jsx(r,{message:"Customizing"})}),e.jsx("div",{className:"flex items-center gap-4 text-sm mt-2",children:a.map((i,l)=>{const o=a.length-1===l,c=l===0,u=e.jsx(Mn,{value:i.label});return c?null:e.jsxs(d.Fragment,{children:[e.jsx("div",{className:y("whitespace-nowrap overflow-hidden overflow-ellipsis min-w-0",o&&"text-primary",o?"flex-shrink-0":"flex-auto"),children:u}),!o&&e.jsx(gs,{className:"icon-sm text-muted flex-shrink-0"})]},l)})})]})]})}function Ti(){const{isAppearanceEditorActive:s}=Ln(),{data:t}=$i(),{base_url:a}=fe(),n=d.useRef(null),{pathname:i}=at();return d.useEffect(()=>{t!=null&&t.defaults&&!Y().defaults&&Y().setDefaults(t.defaults)},[t]),d.useEffect(()=>{n.current&&Y().setIframeWindow(n.current.contentWindow)},[]),d.useEffect(()=>{const l=i.split("/")[3];Y().preview.navigate(l)},[i]),s?e.jsx(Ot,{to:"/admin"}):e.jsxs("div",{className:"h-screen items-center md:flex",children:[e.jsx(Cs,{children:e.jsx(r,{message:"Appearance"})}),e.jsx(Di,{values:t==null?void 0:t.values}),e.jsx("div",{className:"relative h-full flex-auto",children:e.jsx("iframe",{ref:n,className:"h-full w-full max-md:hidden",src:`${a}?appearanceEditor=true`})})]})}function Di({values:s}){const t=e.jsx("div",{className:"flex h-full flex-auto items-center justify-center",children:e.jsx(zs,{isIndeterminate:!0,"aria-label":"Loading editor"})});return e.jsx("div",{className:"relative z-10 h-full w-full border-r bg shadow-lg @container md:w-320",children:s?e.jsx(Ri,{defaultValues:s}):t})}function Ri({defaultValues:s}){const t=O({defaultValues:s}),{watch:a,reset:n}=t,i=Pi();return d.useEffect(()=>{const l=a(o=>{Y().preview.setValues(o)});return()=>l.unsubscribe()},[a]),e.jsxs(ne,{className:"flex h-full flex-col",form:t,onSubmit:l=>{i.mutate(l,{onSuccess:()=>n(l)})},children:[e.jsx(Vi,{isLoading:i.isPending}),e.jsx(Li,{}),e.jsx("div",{className:"flex-auto overflow-y-auto px-14 py-20",children:e.jsx(os,{children:e.jsx(tt,{})})})]})}function Vi({isLoading:s}){const{formState:{dirtyFields:t}}=F(),a=Object.keys(t).length;return e.jsxs("div",{className:"flex h-50 flex-shrink-0 items-center border-b pr-10",children:[e.jsx(k,{border:"border-r",className:"text-muted",elementType:W,to:"..",children:e.jsx(Ie,{})}),e.jsx("div",{className:"pl-10",children:e.jsx(r,{message:"Appearance editor"})}),e.jsx(v,{variant:"flat",color:"primary",className:"ml-auto block",disabled:!a||s,type:"submit",children:a?e.jsx(r,{message:"Save"}):e.jsx(r,{message:"Saved"})})]})}const Se=d.forwardRef(({startIcon:s,children:t,className:a,description:n,...i},l)=>e.jsxs(As,{ref:l,display:"flex",className:y("relative mb-10 h-54 w-full items-center gap-10 rounded-input border bg px-14 text-sm hover:bg-hover",a),variant:null,...i,children:[s,e.jsxs("span",{className:"block min-w-0",children:[e.jsx("span",{className:"block",children:t}),n&&e.jsx("span",{className:"block overflow-hidden overflow-ellipsis whitespace-nowrap text-xs text-muted",children:n})]}),e.jsx(gs,{"aria-hidden":!0,className:"ml-auto text-muted icon-sm"})]}));function qi(){const s=Re(),{trans:t}=D(),{fields:a,append:n}=ke({name:"settings.menus",keyName:"key"});return e.jsxs(d.Fragment,{children:[e.jsx("div",{children:a.map((i,l)=>e.jsx(Se,{to:`${l}`,elementType:W,children:i.name},i.key))}),e.jsx("div",{className:"text-right",children:e.jsx(v,{variant:"outline",color:"primary",startIcon:e.jsx(pe,{}),size:"xs",onClick:()=>{const i=nt(10);n({name:t(x("New menu :number",{values:{number:a.length+1}})),id:i,positions:[],items:[]}),s(`${a.length}`)},children:e.jsx(r,{message:"Create menu"})})})]})}function da(){const s=ca.sections.menus.config;return s?s.availableRoutes.map(t=>({id:t,label:t,action:t,type:"route",target:"_self"})):[]}function ua(s){return s&&s.charAt(0).toUpperCase()+s.slice(1)}function ma({title:s=e.jsx(r,{message:"Add menu item"})}){const{data:t}=ve(["menuItemCategories"]),a=(t==null?void 0:t.menuItemCategories)||[],n=da();return e.jsxs(Q,{size:"sm",children:[e.jsx(se,{children:s}),e.jsx(X,{children:e.jsxs(ps,{variant:"outline",children:[e.jsx(Le,{label:e.jsx(r,{message:"Link"}),bodyClassName:"max-h-240 overflow-y-auto",children:e.jsx(Oi,{})}),e.jsx(Le,{label:e.jsx(r,{message:"Route"}),bodyClassName:"max-h-240 overflow-y-auto",children:e.jsx(Nt,{items:n})}),a.map(i=>e.jsx(Le,{label:e.jsx(r,{message:i.name}),children:e.jsx(Nt,{items:i.items})},i.name))]})})]})}function Oi(){const s=O({defaultValues:{id:nt(6),type:"link",target:"_blank"}}),{close:t}=U();return e.jsxs(ne,{form:s,onSubmit:a=>{t(a)},children:[e.jsx(g,{required:!0,name:"label",label:e.jsx(r,{message:"Label"}),className:"mb-20"}),e.jsx(g,{required:!0,type:"url",name:"action",placeholder:"https://",label:e.jsx(r,{message:"Url"}),className:"mb-20"}),e.jsx("div",{className:"text-right",children:e.jsx(v,{type:"submit",variant:"flat",color:"primary",size:"xs",children:e.jsx(r,{message:"Add to menu"})})})]})}function Nt({items:s}){const{close:t}=U();return e.jsx(Bt,{children:s.map(a=>e.jsx(Ut,{startIcon:e.jsx(pe,{size:"sm"}),onSelected:()=>{if(a.label){const n=a.label.split("/").pop();a.label=n?ua(n):a.label,a.id=nt(6)}t(a)},children:a.label},a.id))})}const Bi=z(e.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"DragIndicatorOutlined"),Ui=""+new URL("dropdown-menu-3e584075.svg",import.meta.url).href;function Hi(s,t,a){const n=vt(t,0,s.length-1),i=vt(a,0,s.length-1);if(n===i)return s;const l=s[n],o=i<n?-1:1;for(let c=n;c!==i;c+=o)s[c]=s[c+o];return s[i]=l,s}function Wi(s,t,a){const n=s.slice();return n.splice(a<0?n.length+a:a,0,n.splice(t,1)[0]),n}let w=null;function Ki({item:s,items:t,type:a,ref:n,onSortEnd:i,onSortStart:l,onDragEnd:o,preview:c,disabled:u,onDropPositionChange:m,previewVariant:h="liveSort"}){const j=d.useRef(null);d.useEffect(()=>{w&&w.sortables.length!==t.length&&(w.sortables=[...t],w.activeIndex=t.indexOf(s))},[t,s]);const{draggableProps:b,dragHandleRef:S}=Pr({id:s,ref:n,type:a,preview:c,disabled:u,onDragStart:()=>{var f;j.current=null,w={sortables:[...t],activeSortable:s,activeIndex:t.indexOf(s),finalIndex:t.indexOf(s),dropPosition:null,scrollParent:n.current?Tn(n.current):void 0,scrollListener:()=>{$r($e)}},h==="liveSort"&&Qi(),l==null||l(),(f=w.scrollParent)==null||f.addEventListener("scroll",w.scrollListener)},onDragEnd:()=>{var f;w&&(h==="liveSort"&&Ji(),w.dropPosition=null,m==null||m(w.dropPosition),w.activeIndex!==w.finalIndex&&(i==null||i(w.activeIndex,w.finalIndex)),(f=w.scrollParent)==null||f.removeEventListener("scroll",w.scrollListener),Ct(),o==null||o(),w=null)},getData:()=>{}}),{droppableProps:C}=Er({id:s,ref:n,types:[a],disabled:u,allowDragEventsFromItself:!0,onDragOver:(f,N)=>{var B;if(!w||h!=="line")return;const _=w.dropPosition;let A=null;const E=(B=$e.get(s))==null?void 0:B.rect;if(E){const M=E.top+E.height/2;N.clientY<=M?A="before":N.clientY>=M&&(A="after")}if(A!==_){const M=w.sortables.indexOf(s);if(w.dropPosition=A,m==null||m(w.dropPosition),Ct(),n.current)if(w.dropPosition==="after")Ds(n.current,"bottom");else if(M===0)Ds(n.current,"top");else{const Ee=w.sortables[M-1],le=$e.get(Ee);le!=null&&le.ref.current&&Ds(le.ref.current,"bottom")}const L=t.indexOf(s);if(w.activeIndex===L){w.finalIndex=w.activeIndex;return}(M>w.activeIndex?"after":"before")==="after"?w.finalIndex=w.dropPosition==="before"?L-1:L:w.finalIndex=w.dropPosition==="after"?L+1:L}},onDragEnter:()=>{if(!w||h==="line")return;const f=w.sortables.indexOf(s),N=w.sortables.indexOf(w.activeSortable);Hi(w.sortables,N,f);const _=w.sortables.map(A=>{var E;return(E=$e.get(A))==null?void 0:E.rect});w.sortables.forEach((A,E)=>{if(!w)return;const B=Wi(_,f,w.activeIndex),M=_[E],L=B[E],te=$e.get(A);if(te!=null&&te.ref.current&&L&&M){const Ee=L.left-M.left,le=L.top-M.top;te.ref.current.style.transform=`translate3d(${Ee}px, ${le}px, 0)`}}),w.finalIndex=f},onDragLeave:()=>{!w||h!=="line"||(w.dropPosition=null,m==null||m(w.dropPosition))}});return{sortableProps:{...cs(b,C)},dragHandleRef:S}}const Gi="transform 0.2s cubic-bezier(0.2, 0, 0, 1)";function Qi(){w&&w.sortables.forEach((s,t)=>{const a=$e.get(s);a!=null&&a.ref.current&&(a.ref.current.style.transition=Gi,(w==null?void 0:w.activeIndex)===t&&(a.ref.current.style.opacity="0.4"))})}function Ji(){w&&w.sortables.forEach(s=>{const t=$e.get(s);t!=null&&t.ref.current&&(t.ref.current.style.transform="",t.ref.current.style.transition="",t.ref.current.style.opacity="",t.ref.current.style.zIndex="")})}function Ct(){w!=null&&w.linePreviewEl&&(w.linePreviewEl.style.borderBottomColor="",w.linePreviewEl.style.borderTopColor="",w.linePreviewEl=void 0)}function Ds(s,t){const a="rgb(var(--be-primary))";t==="top"?s.style.borderTopColor=a:s.style.borderBottomColor=a,w&&(w.linePreviewEl=s)}function Yi(){const{menuIndex:s}=ie(),t=Re(),{getValues:a}=F(),n=`settings.menus.${s}`,i=a(n);return d.useEffect(()=>{i?Y().preview.setHighlight(`[data-menu-id="${i.id}"]`):t("/admin/appearance/menus")},[t,i]),i?e.jsx(Zi,{formPath:n}):null}function Zi({formPath:s}){const{site:{has_mobile_app:t}}=fe(),a=$s(l=>{var o;return(o=l.config)==null?void 0:o.sections.menus.config}),n=d.useMemo(()=>{const l=[...a==null?void 0:a.positions];return t&&l.push("mobile-app-about"),l.map(o=>({key:o,name:o.replaceAll("-"," ")}))},[a,t]),i=ke({name:`${s}.items`,keyName:"key"});return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-30 pb-30 border-b",children:[e.jsx(g,{name:`${s}.name`,label:e.jsx(r,{message:"Menu name"}),className:"mb-20",autoFocus:!0}),e.jsx(Ps,{chipSize:"sm",name:`${s}.positions`,valueKey:"id",label:e.jsx(r,{message:"Menu positions"}),description:e.jsx(r,{message:"Where should this menu appear on the site"}),children:n.map(l=>e.jsx(p,{value:l.key,capitalizeFirst:!0,children:l.name},l.key))})]}),e.jsx(Xi,{fieldArray:i}),e.jsx("div",{className:"text-right",children:e.jsx(el,{})})]})}function Xi({fieldArray:{append:s,fields:t,move:a}}){const n=Re();return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-16 justify-between flex-shrink-0",children:[e.jsx(r,{message:"Menu items"}),e.jsxs(P,{type:"popover",placement:"right",offset:20,onClose:i=>{i&&(s({...i}),n(`items/${t.length}`))},children:[e.jsx(v,{variant:"outline",color:"primary",size:"xs",startIcon:e.jsx(pe,{}),children:e.jsx(r,{message:"Add"})}),e.jsx(ma,{})]})]}),e.jsxs("div",{className:"mt-20 flex-shrink-0",children:[t.map((i,l)=>e.jsx(sl,{item:i,items:t,index:l,onSortEnd:(o,c)=>{a(o,c)}},i.key)),t.length?null:e.jsx(_s,{size:"xs",className:"my-40",image:e.jsx(Fs,{src:Ui}),title:e.jsx(r,{message:"No menu items yet"}),description:e.jsx(r,{message:"Click “add“ button to start adding links, pages, routes and other items to this menu. "})})]})]})}function el(){const s=Re(),{menuIndex:t}=ie(),{fields:a,remove:n}=ke({name:"settings.menus",keyName:"key"});if(!t)return null;const i=a[+t];return e.jsxs(P,{type:"modal",onClose:l=>{if(l){const o=a.findIndex(c=>c.id===i.id);n(o),s("/admin/appearance/menus")}},children:[e.jsx(v,{variant:"outline",color:"danger",size:"xs",startIcon:e.jsx(Es,{}),children:e.jsx(r,{message:"Delete menu"})}),e.jsx(xe,{isDanger:!0,title:e.jsx(r,{message:"Delete menu"}),body:e.jsx(r,{message:"Are you sure you want to delete “:name“?",values:{name:i.name}}),confirm:e.jsx(r,{message:"Delete"})})]})}function sl({item:s,items:t,index:a,onSortEnd:n}){const i=d.useRef(null),{sortableProps:l,dragHandleRef:o}=Ki({item:s,items:t,type:"menuEditorSortable",ref:i,onSortEnd:n,previewVariant:"liveSort"}),c=s.icon&&Ht(s.icon),u=e.jsxs("div",{className:"text-muted flex items-center gap-4 text-xs",children:[c&&e.jsx(c,{size:"sm"}),"(",e.jsx(r,{message:"No label..."}),")"]});return e.jsx(d.Fragment,{children:e.jsx(Se,{elementType:W,to:`items/${a}`,ref:i,...l,children:e.jsxs("div",{className:"flex items-center gap-10",children:[e.jsx(k,{ref:o,size:"sm",children:e.jsx(Bi,{className:"text-muted hover:cursor-move"})}),e.jsx("div",{children:s.label||u})]})})})}const tl=I.forwardRef(({valueListKey:s="permissions",...t},a)=>{const{data:n}=ve([s]),i=(n==null?void 0:n.permissions)||(n==null?void 0:n.workspacePermissions),[l,o]=ks(t.value,[],t.onChange),[c,u]=d.useState(!1);if(!i)return null;const m=xa(i,l,c),h=j=>{const b=[...l],S=b.findIndex(C=>C.id===j.id);S>-1&&b.splice(S,1,j),o(b)};return e.jsxs(d.Fragment,{children:[e.jsx(ps,{variant:"outline",ref:a,children:m.map(({groupName:j,items:b,anyChecked:S})=>e.jsx(Le,{label:e.jsx(r,{message:xt(j)}),startIcon:S?e.jsx(Dn,{size:"sm"}):void 0,children:e.jsx(Bt,{children:b.map(C=>{const f=l.findIndex(_=>_.id===C.id),N=f>-1;return e.jsxs("div",{children:[e.jsx(Ut,{onSelected:()=>{if(N){const _=[...l];_.splice(f,1),o(_)}else o([...l,C])},endSection:e.jsx(Hs,{tabIndex:-1,checked:N,onChange:()=>{}}),description:e.jsx(r,{message:C.description}),children:e.jsx(r,{message:C.display_name||C.name})}),N&&e.jsx(al,{permission:C,onChange:h})]},C.id)})})},j))}),e.jsx(Hs,{className:"mt-30",checked:c,onChange:j=>{u(j.target.checked)},children:e.jsx(r,{message:"Show advanced permissions"})})]})});function al({permission:s,onChange:t}){var n;if(!((n=s==null?void 0:s.restrictions)!=null&&n.length))return null;const a=(i,l)=>{const o=Rn(s,c=>{const u=c.restrictions.find(m=>m.name===i);u&&(u.value=l)});t==null||t(o)};return e.jsx("div",{className:"px-40 py-20",children:s.restrictions.map((i,l)=>{const o=l===s.restrictions.length-1,c=e.jsx(r,{message:xt(i.name)}),u=i.description?e.jsx(r,{message:i.description}):void 0;return i.type==="bool"?e.jsx(Hs,{description:u,className:y(!o&&"mb-30"),checked:!!i.value,onChange:m=>{a(i.name,m.target.checked)},children:c},i.name):e.jsx(Ae,{size:"sm",label:c,description:u,type:"number",className:y(!o&&"mb-30"),value:i.value||"",onChange:m=>{a(i.name,m.target.value===""?void 0:parseInt(m.target.value))}},i.name)})})}function mt(s){const{field:{onChange:t,value:a=[],ref:n}}=ds({name:s.name}),i={onChange:t,value:a};return e.jsx(tl,{ref:n,...cs(i,s)})}const xt=s=>ua(s.replace("_"," "));function xa(s,t,a){const n=[];return s.forEach(i=>{const l=t.findIndex(c=>c.id===i.id);if(!a&&i.advanced)return;let o=n.find(c=>c.groupName===i.group);if(o||(o={groupName:i.group,anyChecked:!1,items:[]},n.push(o)),l>-1){const c={...i,restrictions:nl(i.restrictions,t[l].restrictions)};o.anyChecked=!0,o.items.push(c)}else o.items.push(i)}),n}function nl(s,t){return s==null?void 0:s.map(a=>{const n=t.find(i=>i.name===a.name);return n?{...a,value:n.value}:a})}const Rs={grid:"flex flex-wrap gap-24",button:"flex flex-col items-center rounded hover:bg-hover h-90 aspect-square"},rl=[...Array(60).keys()],il=I.lazy(()=>us(()=>import("./icon-list-97973e06.js"),["./icon-list-97973e06.js","./main-512891a4.js","./main-ff1e4628.css","./UnfoldMore-0121ab8e.js","./Edit-2020f921.js","./Info-949d1edd.js","./OpenInNew-aeea6951.js","./TaskAlt-d3332cd0.js","./TrendingUp-4c4fdba9.js","./use-resume-subscription-ff75954a.js"],import.meta.url));function ll({onIconSelected:s}){const{trans:t}=D(),[a,n]=I.useState("");return e.jsxs("div",{className:"py-4",children:[e.jsx(Ae,{className:"mb-20",value:a,onChange:i=>{n(i.target.value)},placeholder:t({message:"Search icons..."})}),e.jsx(Ke,{mode:"wait",children:e.jsx(d.Suspense,{fallback:e.jsx(ze.div,{...Ge,className:Rs.grid,children:rl.map((i,l)=>e.jsx("div",{className:Rs.button,children:e.jsx(He,{variant:"rect"})},l))}),children:e.jsx(ze.div,{...Ge,className:Rs.grid,children:e.jsx(il,{searchQuery:a,onIconSelected:s})})})})]})}function ol(){return e.jsxs(Q,{size:"w-850",className:"min-h-dialog",children:[e.jsx(se,{children:e.jsx(r,{message:"Select icon"})}),e.jsx(X,{children:e.jsx(cl,{})})]})}function cl(){const{close:s}=U();return e.jsx(ll,{onIconSelected:t=>{s(t)}})}function dl(s){const t=d.useRef();return d.useEffect(()=>{t.current=s},[s]),t.current}function ht({formPathPrefix:s,hideRoleAndPermissionFields:t}){const{trans:a}=D(),n=i=>s?`${s}.${i}`:i;return e.jsxs(d.Fragment,{children:[e.jsx(g,{className:"mb-20",name:n("label"),label:e.jsx(r,{message:"Label"}),placeholder:a(x("No label...")),startAppend:e.jsx(ul,{prefixName:n})}),e.jsx(ml,{prefixName:n}),!t&&e.jsxs(d.Fragment,{children:[e.jsx(xl,{prefixName:n}),e.jsx(hl,{prefixName:n})]}),e.jsx(gl,{prefixName:n})]})}function ul({prefixName:s,...t}){const{watch:a,setValue:n}=F(),i=s("icon"),l=a(i),o=l&&Ht(l);return e.jsxs(P,{type:"modal",onClose:c=>{(c||c===null)&&n(i,c,{shouldDirty:!0})},children:[e.jsx(k,{className:"text-muted icon-sm",variant:"outline",size:"md",...t,children:o?e.jsx(o,{}):e.jsx(Ne,{})}),e.jsx(ol,{})]})}function ml({prefixName:s}){const t=F(),a=t.watch(s("type")),n=dl(a),{data:i}=ve(["menuItemCategories"]),l=(i==null?void 0:i.menuItemCategories)||[],o=l.find(m=>m.type===a),{trans:c}=D(),u=da();return d.useEffect(()=>{n&&n!==a&&t.setValue(s("action"),"")},[a,n,t,s]),e.jsxs(d.Fragment,{children:[e.jsxs(G,{className:"mb-20",name:s("type"),selectionMode:"single",label:e.jsx(r,{message:"Type"}),children:[e.jsx(p,{value:"link",children:e.jsx(r,{message:"Custom link"})}),e.jsx(p,{value:"route",children:e.jsx(r,{message:"Site page"})}),l.map(m=>e.jsx(p,{value:m.type,children:m.name},m.type))]}),a==="link"&&e.jsx(g,{className:"mb-20",required:!0,type:"url",name:s("action"),placeholder:c({message:"Enter a url..."}),label:e.jsx(r,{message:"Url"})}),a==="route"&&e.jsx(G,{className:"mb-20",required:!0,items:u,name:s("action"),label:e.jsx(r,{message:"Page"}),searchPlaceholder:c(x("Search pages")),showSearchField:!0,selectionMode:"single",children:m=>e.jsx(p,{value:m.id,children:m.label},m.id)}),o&&e.jsx(G,{className:"mb-20",required:!0,items:o.items,name:s("action"),showSearchField:!0,searchPlaceholder:c(x("Search...")),selectionMode:"single",label:e.jsx(r,{message:o.name}),children:m=>e.jsx(p,{value:m.action,children:e.jsx(r,{message:m.label})})})]})}function xl({prefixName:s}){const{data:t}=ve(["roles","permissions"]),a=(t==null?void 0:t.roles)||[],{trans:n}=D();return e.jsx(Ps,{className:"mb-20",placeholder:n({message:"Add role..."}),label:e.jsx(r,{message:"Only show if user has role"}),name:s("roles"),chipSize:"sm",suggestions:a,valueKey:"id",displayWith:i=>{var l;return(l=a.find(o=>o.id===i.id))==null?void 0:l.name},children:i=>e.jsx(p,{value:i.id,capitalizeFirst:!0,children:e.jsx(r,{message:i.name})},i.id)})}function hl({prefixName:s}){const{data:t}=ve(["roles","permissions"]),{trans:a}=D(),n=d.useMemo(()=>xa((t==null?void 0:t.permissions)||[],[],!1),[t==null?void 0:t.permissions]);return e.jsx(Ps,{label:e.jsx(r,{message:"Only show if user has permissions"}),placeholder:a({message:"Add permission..."}),chipSize:"sm",suggestions:n,name:s("permissions"),valueKey:"name",children:({groupName:i,items:l})=>e.jsx(Vn,{label:xt(i),children:l.map(o=>e.jsx(p,{value:o.name,description:e.jsx(r,{message:o.description}),children:e.jsx(r,{message:o.display_name||o.name})},o.name))},i)})}function gl({prefixName:s}){return F().watch(s("type"))!=="link"?null:e.jsxs(G,{className:"mt-20",selectionMode:"single",name:s("target"),label:e.jsx(r,{message:"Open link in"}),children:[e.jsx(p,{value:"_self",children:e.jsx(r,{message:"Same window"})}),e.jsx(p,{value:"_blank",children:e.jsx(r,{message:"New window"})})]})}function pl(){const{menuIndex:s,menuItemIndex:t}=ie(),a=ce(),{getValues:n}=F(),i=`settings.menus.${s}.items.${t}`,l=n(i);return d.useEffect(()=>{l&&Y().preview.setHighlight(`[data-menu-item-id="${l.id}"]`)},[a,l]),!l||t==null?null:e.jsx(jl,{formPath:i})}function jl({formPath:s}){return e.jsxs(d.Fragment,{children:[e.jsx(ht,{formPathPrefix:s}),e.jsx("div",{className:"text-right mt-40",children:e.jsx(fl,{})})]})}function fl(){const s=ce(),{menuIndex:t,menuItemIndex:a}=ie(),{fields:n,remove:i}=ke({name:`settings.menus.${+t}.items`});if(!a)return null;const l=n[+a];return e.jsxs(P,{type:"modal",onClose:o=>{o&&a&&(i(+a),s(`/admin/appearance/menus/${t}`))},children:[e.jsx(v,{variant:"outline",color:"danger",size:"xs",startIcon:e.jsx(Es,{}),children:e.jsx(r,{message:"Delete this item"})}),e.jsx(xe,{isDanger:!0,title:e.jsx(r,{message:"Delete menu item"}),body:e.jsx(r,{message:"Are you sure you want to delete “:name“?",values:{name:l.label}}),confirm:e.jsx(r,{message:"Delete"})})]})}function bl(){return e.jsxs(d.Fragment,{children:[e.jsx(es,{label:e.jsx(r,{message:"Favicon"}),description:e.jsx(r,{message:"This will generate different size favicons. Image should be at least 512x512 in size."}),type:"favicon"}),e.jsx(es,{label:e.jsx(r,{message:"Light logo"}),description:e.jsx(r,{message:"Will be used on dark backgrounds."}),type:"logo_light"}),e.jsx(es,{label:e.jsx(r,{message:"Dark logo"}),description:e.jsx(r,{message:"Will be used on light backgrounds. Will default to light logo if left empty."}),type:"logo_dark"}),e.jsx(es,{label:e.jsx(r,{message:"Mobile light logo"}),description:e.jsx(r,{message:"Will be used on light backgrounds on mobile. Will default to desktop logo if left empty."}),type:"logo_light_mobile"}),e.jsx(es,{label:e.jsx(r,{message:"Mobile dark logo"}),description:e.jsx(r,{message:"Will be used on dark backgrounds on mobile. Will default to desktop if left empty."}),type:"logo_dark_mobile"}),e.jsx(vl,{}),e.jsx(yl,{})]})}function es({label:s,description:t,type:a}){const n=$s(i=>{var l;return(l=i.defaults)==null?void 0:l.settings.branding[a]});return e.jsx(rt,{name:`settings.branding.${a}`,className:"border-b pb-30 mb-30",label:s,description:t,diskPrefix:"branding_media",defaultValue:n,onChange:()=>{Y().preview.setHighlight('[data-logo="navbar"]')}})}function vl(){return e.jsx(g,{name:"appearance.env.app_name",required:!0,className:"mt-20",label:e.jsx(r,{message:"Site name"})})}function yl(){return e.jsx(g,{name:"settings.branding.site_description",className:"mt-20",inputElementType:"textarea",rows:4,label:e.jsx(r,{message:"Site description"})})}function wl(s=1,t=1e4){const a=new Uint32Array(1);window.crypto.getRandomValues(a);const n=a[0]/(4294967295+1);return s=Math.ceil(s),t=Math.floor(t),Math.floor(n*(t-s+1))+s}function Sl(){const{trans:s}=D(),t=Re(),{data:{themes:a}}=qn(),{fields:n,append:i}=ke({name:"appearance.themes.all",keyName:"key"});return d.useEffect(()=>{a.selectedThemeId&&Y().preview.setActiveTheme(a.selectedThemeId)},[a.selectedThemeId]),e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"mb-20",children:e.jsx(v,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(pe,{}),onClick:()=>{var o;const l=(o=Y().defaults)==null?void 0:o.appearance.themes.light;i({id:wl(),name:s(x("New theme")),values:l}),t(`${n.length+1}`)},children:e.jsx(r,{message:"New theme"})})}),n.map((l,o)=>e.jsx(Se,{to:`${o}`,elementType:it,children:l.name},l.key))]})}const kl=I.lazy(()=>us(()=>import("./ace-editor-87d17c10.js"),["./ace-editor-87d17c10.js","./main-512891a4.js","./main-ff1e4628.css","./index-4ec42de8.js"],import.meta.url));function ha({defaultValue:s,mode:t="html",title:a,onSave:n,isSaving:i,footerStartAction:l,beautify:o,editorRef:c}){const[u,m]=d.useState(s),[h,j]=d.useState(!0);return e.jsxs(Q,{size:"fullscreen",className:"h-full w-full",children:[e.jsx(se,{children:a}),e.jsx(X,{className:"relative flex-auto",padding:"p-0",children:e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"flex h-400 w-full items-center justify-center",children:e.jsx(zs,{"aria-label":"Loading editor...",isIndeterminate:!0,size:"md"})}),children:e.jsx(kl,{beautify:o,mode:t,onChange:b=>m(b),defaultValue:u||"",onIsValidChange:j,editorRef:c})})}),e.jsx(Nl,{disabled:!h||i,value:u,onSave:n,startAction:l})]})}function Nl({disabled:s,value:t,onSave:a,startAction:n}){const{close:i}=U();return e.jsxs(de,{dividerTop:!0,startAction:n,children:[e.jsx(v,{onClick:()=>i(),children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{disabled:s,variant:"flat",color:"primary",onClick:()=>{a?a(t):i(t)},children:e.jsx(r,{message:"Save"})})]})}function Cl(){return e.jsxs(d.Fragment,{children:[e.jsx(_t,{mode:"css"}),e.jsx(_t,{mode:"html"})]})}function _t({mode:s}){const{getValues:t}=F(),{setValue:a}=F(),n=s==="html"?e.jsx(r,{message:"Custom HTML & JavaScript"}):e.jsx(r,{message:"Custom CSS"});return e.jsxs(P,{type:"modal",onClose:i=>{i!=null&&(a(`appearance.custom_code.${s}`,i,{shouldDirty:!0}),Y().preview.setCustomCode(s,i))},children:[e.jsx(Se,{children:n}),e.jsx(ha,{title:n,defaultValue:t(`appearance.custom_code.${s}`)||"",mode:s})]})}const _l=""+new URL("articles-e4d78a19.svg",import.meta.url).href,Fl=s=>{const t=s.customPages.types.length>1?[{control:{type:oe.Select,defaultValue:"default",options:s.customPages.types.map(a=>({value:a.type,label:a.label,key:a.type}))},key:"type",label:x("Type"),description:x("Type of the page"),defaultOperator:ae.eq}]:[];return[{key:"user_id",label:x("User"),description:x("User page was created by"),defaultOperator:ae.eq,control:{type:oe.SelectModel,model:Mr}},...t,ms({description:x("Date page was created")}),xs({description:x("Date page was last updated")})]},zl=[{key:"slug",allowsSorting:!0,width:"flex-2 min-w-200",visibleInMode:"all",header:()=>e.jsx(r,{message:"Slug"}),body:s=>e.jsx(W,{target:"_blank",to:`/pages/${s.slug}`,className:lt,children:s.slug})},{key:"user_id",allowsSorting:!0,width:"flex-2 min-w-140",header:()=>e.jsx(r,{message:"Owner"}),body:s=>s.user&&e.jsx(Ze,{image:s.user.avatar,label:s.user.display_name,description:s.user.email})},{key:"type",maxWidth:"max-w-100",header:()=>e.jsx(r,{message:"Type"}),body:s=>e.jsx(r,{message:s.type})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(r,{message:"Last updated"}),body:s=>e.jsx(ue,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(r,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:s=>e.jsx(k,{size:"md",className:"text-muted",elementType:W,to:`${s.id}/edit`,children:e.jsx(Ne,{})})}];function Al(){const s=d.useContext(Qe),t=d.useMemo(()=>Fl(s),[s]);return e.jsx(Pe,{endpoint:"custom-pages",title:e.jsx(r,{message:"Custom pages"}),filters:t,columns:zl,queryParams:{with:"user"},actions:e.jsx(Il,{}),selectedActions:e.jsx(qe,{}),emptyStateMessage:e.jsx(je,{image:_l,title:e.jsx(r,{message:"No pages have been created yet"}),filteringTitle:e.jsx(r,{message:"No matching pages"})})})}function Il(){return e.jsx(Oe,{elementType:W,to:"new",children:e.jsx(r,{message:"New page"})})}const Pl=[{label:x("General"),to:"general"},On().settings.billing.integrated&&{label:x("Subscriptions"),to:"subscriptions"},{label:x("Authentication"),to:"authentication"},{label:x("Uploading"),to:"uploading"},{label:x("Outgoing email"),to:"outgoing-email"},{label:x("Cache"),to:"cache"}].filter(Boolean),ga=Pl;function El({className:s}){const t=be();return e.jsxs("div",{className:y(s,"container mx-auto min-h-full items-start gap-30 p-24 md:flex"),children:[e.jsx(Cs,{children:e.jsx(r,{message:"Settings"})}),t?e.jsx($l,{}):e.jsx(Ml,{}),e.jsx("div",{className:"relative max-w-500 flex-auto md:px-30",children:e.jsx(tt,{})})]})}function $l(){const{pathname:s}=at(),t=Re(),a=s.split("/").pop();return e.jsx(hs,{minWidth:"min-w-none",className:"mb-24 w-full bg-paper",selectionMode:"single",selectedValue:a,onSelectionChange:n=>{t(n)},children:ga.map(n=>e.jsx(p,{value:n.to,children:e.jsx(r,{...n.label})},n.to))})}function Ml(){return e.jsx("div",{className:"sticky top-24 w-240 flex-shrink-0",children:ga.map(s=>e.jsx(it,{to:s.to,className:({isActive:t})=>y("mb-8 block whitespace-nowrap rounded-button p-14 text-sm transition-bg-color",t?"bg-primary/6 font-semibold text-primary":"hover:bg-hover"),children:e.jsx(r,{...s.label})},s.to))})}function js(){return De({queryKey:["fetchAdminSettings"],queryFn:()=>Ll(),staleTime:1/0})}function Ll(){return $.get("settings").then(s=>s.data)}const Vs=s=>s instanceof Date,Tl=s=>Object.keys(s).length===0,Ws=s=>s!=null&&typeof s=="object",Ft=(s,...t)=>Object.prototype.hasOwnProperty.call(s,...t),qs=s=>Ws(s)&&Tl(s),Dl=()=>Object.create(null),Ks=(s,t)=>{if(s===t)return{};if(!Ws(s)||!Ws(t))return t;const a=Object.keys(s).reduce((n,i)=>(Ft(t,i)||(n[i]=void 0),n),Dl());return Vs(s)||Vs(t)?s.valueOf()==t.valueOf()?{}:t:Object.keys(t).reduce((n,i)=>{if(!Ft(s,i))return n[i]=t[i],n;const l=Ks(s[i],t[i]);return qs(l)&&!Vs(l)&&(qs(s[i])||!qs(t[i]))||(n[i]=l),n},a)};function pa(s){const{data:t}=js();return R({mutationFn:a=>{var l,o,c,u,m,h,j,b,S;(o=(l=a.client)==null?void 0:l.cookie_notice)!=null&&o.button&&(a.client.cookie_notice.button=JSON.stringify(a.client.cookie_notice.button)),(u=(c=a.client)==null?void 0:c.registration)!=null&&u.policies&&(a.client.registration.policies=JSON.stringify(a.client.registration.policies)),(h=(m=a.client)==null?void 0:m.artistPage)!=null&&h.tabs&&(a.client.artistPage.tabs=JSON.stringify(a.client.artistPage.tabs)),(b=(j=a.client)==null?void 0:j.title_page)!=null&&b.sections&&(a.client.title_page.sections=JSON.stringify(a.client.title_page.sections)),(S=a.client)!=null&&S.incoming_email&&(a.client.incoming_email=JSON.stringify(a.client.incoming_email));const n=a.client?Ks(t.client,a.client):null,i=a.server?Ks(t.server,a.server):null;return Rl({client:n,server:i,files:a.files})},onSuccess:()=>{V(x("Settings updated"),{position:"bottom-right"}),T.invalidateQueries({queryKey:["fetchAdminSettings"]})},onError:a=>he(a,s)})}function Rl({client:s,server:t,files:a}){const n=new FormData;return s&&n.set("client",JSON.stringify(yt.dot(s))),t&&n.set("server",JSON.stringify(yt.dot(t))),Object.entries(a||{}).forEach(([i,l])=>{n.set(i,l)}),$.post("settings",n,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i.data)}function me({title:s,description:t,children:a,transformValues:n}){const{data:i}=js();return e.jsxs("section",{children:[e.jsxs("div",{className:"mb-40",children:[e.jsx("h2",{className:"mb-4 text-xl",children:s}),e.jsx("div",{className:"text-sm text-muted",children:t})]}),i?e.jsx(Vl,{defaultValues:i,transformValues:n,children:a}):e.jsx(zs,{isIndeterminate:!0,"aria-label":"Loading settings..."})]})}function Vl({children:s,defaultValues:t,transformValues:a}){const n=O({defaultValues:t}),i=pa(n);return e.jsxs(d.Fragment,{children:[e.jsxs(ne,{form:n,onBeforeSubmit:()=>{const l=n.formState.errors,o=Object.keys(l).filter(c=>c.endsWith("_group"));n.clearErrors(o)},onSubmit:l=>{l=a?a(l):l,i.mutate(l)},children:[s,e.jsx("div",{className:"mt-40",children:e.jsx(v,{type:"submit",variant:"flat",color:"primary",disabled:i.isPending,children:e.jsx(r,{message:"Update"})})})]}),i.isPending&&e.jsx(Vt,{size:"xs",className:"absolute -bottom-14 left-30 w-full",isIndeterminate:!0,"aria-label":"Saving settings..."})]})}function Ms({link:s,className:t}){const{site:a}=fe();return a.hide_docs_button?null:e.jsx("div",{className:y("flex items-center gap-8",t)})}function ql(){return e.jsx(me,{title:e.jsx(r,{message:"General"}),description:e.jsx(r,{message:"Configure site url, homepage, theme and other general settings."}),children:e.jsx(Ol,{})})}function Ol(){const{data:s}=js();if(!s)return null;let t=null;const a=s.server,n=a.newAppUrl&&a.newAppUrl!==a.app_url;return n&&(t=e.jsx("div",{className:"mt-20 text-sm text-danger",children:e.jsx(r,{values:{baseUrl:a.app_url,currentUrl:a.newAppUrl,b:i=>e.jsx("b",{children:i})},message:"Base site url is set as <b>:baseUrl</b> in configuration, but current url is <b>:currentUrl</b>. It is recommended to set the primary url you want to use in configuration file and then redirect all other url versions to this primary version via cpanel or .htaccess file."})})),e.jsxs(d.Fragment,{children:[e.jsx(g,{invalid:!!n,name:"server.app_url",label:e.jsx(r,{message:"Primary site url"}),description:e.jsx(Ms,{link:"https://support.vebto.com/help-center/articles/35/primary-site-url"})}),t]})}const ja=z(e.jsx("path",{stroke:"#E0E0E0",d:"M24,44c-7.168,0-13-5.816-13-12.971C11,24,24,4,24,4s13,20,13,27.029C37,38.184,31.168,44,24,44z"}));class Bl{getStringForLocale(t,a){let n=this.strings[a];n||(n=Ul(a,this.strings,this.defaultLocale),this.strings[a]=n);let i=n[t];if(!i)throw new Error(`Could not find intl message ${t} in ${a} locale`);return i}constructor(t,a="en-US"){this.strings={...t},this.defaultLocale=a}}function Ul(s,t,a="en-US"){if(t[s])return t[s];let n=Hl(s);if(t[n])return t[n];for(let i in t)if(i.startsWith(n+"-"))return t[i];return t[a]}function Hl(s){return Intl.Locale?new Intl.Locale(s).language:s.split("-")[0]}function Wl(s){return s&&s.__esModule?s.default:s}var fa={},ba={};ba={alpha:"ألفا",blue:"أزرق",brightness:"السطوع",green:"أخضر",hue:"درجة اللون",lightness:"الإضاءة",red:"أحمر",saturation:"التشبع"};var va={};va={alpha:"Алфа",blue:"Синьо",brightness:"Яркост",green:"Зелено",hue:"Оттенък",lightness:"Лекота",red:"Червено",saturation:"Наситеност"};var ya={};ya={alpha:"Alfa",blue:"Modrá",brightness:"Jas",green:"Zelená",hue:"Odstín",lightness:"Světlost",red:"Červená",saturation:"Sytost"};var wa={};wa={alpha:"Alfa",blue:"Blå",brightness:"Lysstyrke",green:"Grøn",hue:"Tone",lightness:"Lyshed",red:"Rød",saturation:"Farvemætning"};var Sa={};Sa={alpha:"Alpha",blue:"Blau",brightness:"Helligkeit",green:"Grün",hue:"Farbton",lightness:"Leuchtkraft",red:"Rot",saturation:"Sättigung"};var ka={};ka={alpha:"Άλφα",blue:"Μπλε",brightness:"Φωτεινότητα",green:"Πράσινο",hue:"Τόνος",lightness:"Φωτεινότητα",red:"Κόκκινο",saturation:"Κορεσμός"};var Na={};Na={hue:"Hue",saturation:"Saturation",lightness:"Lightness",brightness:"Brightness",red:"Red",green:"Green",blue:"Blue",alpha:"Alpha"};var Ca={};Ca={alpha:"Alpha",blue:"Azul",brightness:"Brillo",green:"Verde",hue:"Tono",lightness:"Luminosidad",red:"Rojo",saturation:"Saturación"};var _a={};_a={alpha:"Alfa",blue:"Sinine",brightness:"Heledus",green:"Roheline",hue:"Värv",lightness:"Valgus",red:"Punane",saturation:"Küllastus"};var Fa={};Fa={alpha:"Alpha",blue:"Sininen",brightness:"Kirkkaus",green:"Vihreä",hue:"Sävy",lightness:"Valomäärä",red:"Punainen",saturation:"Värikylläisyys"};var za={};za={alpha:"Alpha",blue:"Bleu",brightness:"Luminosité",green:"Vert",hue:"Teinte",lightness:"Luminosité",red:"Rouge",saturation:"Saturation"};var Aa={};Aa={alpha:"אלפא",blue:"כחול",brightness:"בהירות",green:"ירוק",hue:"גוון",lightness:"כמות אור",red:"אדום",saturation:"רוויה"};var Ia={};Ia={alpha:"Alfa",blue:"Plava",brightness:"Svjetlina",green:"Zelena",hue:"Nijansa",lightness:"Osvijetljenost",red:"Crvena",saturation:"Zasićenost"};var Pa={};Pa={alpha:"Alfa",blue:"Kék",brightness:"Fényesség",green:"Zöld",hue:"Színárnyalat",lightness:"Világosság",red:"Piros",saturation:"Telítettség"};var Ea={};Ea={alpha:"Alfa",blue:"Blu",brightness:"Luminosità",green:"Verde",hue:"Tonalità",lightness:"Luminosità",red:"Rosso",saturation:"Saturazione"};var $a={};$a={alpha:"アルファ",blue:"青",brightness:"明るさ",green:"緑",hue:"色相",lightness:"明度",red:"赤",saturation:"彩度"};var Ma={};Ma={alpha:"알파",blue:"파랑",brightness:"명도",green:"초록",hue:"색조",lightness:"밝기",red:"빨강",saturation:"채도"};var La={};La={alpha:"Alfa",blue:"Mėlyna",brightness:"Ryškumas",green:"Žalia",hue:"Atspalvis",lightness:"Šviesumas",red:"Raudona",saturation:"Įsotinimas"};var Ta={};Ta={alpha:"Alfa",blue:"Zila",brightness:"Spilgtums",green:"Zaļa",hue:"Nokrāsa",lightness:"Gaišums",red:"Sarkana",saturation:"Piesātinājums"};var Da={};Da={alpha:"Alfa",blue:"Blå",brightness:"Lysstyrke",green:"Grønn",hue:"Fargetone",lightness:"Lyshet",red:"Rød",saturation:"Metning"};var Ra={};Ra={alpha:"Alfa",blue:"Blauw",brightness:"Helderheid",green:"Groen",hue:"Kleurtoon",lightness:"Lichtsterkte",red:"Rood",saturation:"Verzadiging"};var Va={};Va={alpha:"Alfa",blue:"Niebieski",brightness:"Jasność",green:"Zielony",hue:"Odcień",lightness:"Jaskrawość",red:"Czerwony",saturation:"Nasycenie"};var qa={};qa={alpha:"Alfa",blue:"Azul",brightness:"Brilho",green:"Verde",hue:"Matiz",lightness:"Luminosidade",red:"Vermelho",saturation:"Saturação"};var Oa={};Oa={alpha:"Alfa",blue:"Azul",brightness:"Luminosidade",green:"Verde",hue:"Tonalidade",lightness:"Claridade",red:"Vermelho",saturation:"Saturação"};var Ba={};Ba={alpha:"Alfa",blue:"Albastru",brightness:"Luminozitate",green:"Verde",hue:"Nuanță",lightness:"Luminozitate",red:"Roșu",saturation:"Saturație"};var Ua={};Ua={alpha:"Альфа",blue:"Синий",brightness:"Яркость",green:"Зеленый",hue:"Оттенок",lightness:"Освещенность",red:"Красный",saturation:"Насыщенность"};var Ha={};Ha={alpha:"Alfa",blue:"Modrá",brightness:"Jas",green:"Zelená",hue:"Odtieň",lightness:"Svetlosť",red:"Červená",saturation:"Sýtosť"};var Wa={};Wa={alpha:"Alfa",blue:"Modra",brightness:"Svetlost",green:"Zelena",hue:"Barva",lightness:"Lahkost",red:"Rdeča",saturation:"Nasičenost"};var Ka={};Ka={alpha:"Alfa",blue:"Plava",brightness:"Osvetljenost",green:"Zelena",hue:"Nijansa",lightness:"Osvetljenje",red:"Crvena",saturation:"Zasićenje"};var Ga={};Ga={alpha:"Alfa",blue:"Blått",brightness:"Ljusstyrka",green:"Grönt",hue:"Nyans",lightness:"Ljushet",red:"Rött",saturation:"Mättnad"};var Qa={};Qa={alpha:"Alfa",blue:"Mavi",brightness:"Parlaklık",green:"Yeşil",hue:"Ton",lightness:"Canlılık",red:"Kırmızı",saturation:"Doygunluk"};var Ja={};Ja={alpha:"Альфа",blue:"Синій",brightness:"Яскравість",green:"Зелений",hue:"Тон",lightness:"Освітленість",red:"Червоний",saturation:"Насиченість"};var Ya={};Ya={alpha:"Alpha",blue:"蓝色",brightness:"亮度",green:"绿色",hue:"色相",lightness:"明亮度",red:"红色",saturation:"饱和度"};var Za={};Za={alpha:"Alpha",blue:"藍色",brightness:"亮度",green:"綠色",hue:"色相",lightness:"明亮",red:"紅色",saturation:"飽和度"};fa={"ar-AE":ba,"bg-BG":va,"cs-CZ":ya,"da-DK":wa,"de-DE":Sa,"el-GR":ka,"en-US":Na,"es-ES":Ca,"et-EE":_a,"fi-FI":Fa,"fr-FR":za,"he-IL":Aa,"hr-HR":Ia,"hu-HU":Pa,"it-IT":Ea,"ja-JP":$a,"ko-KR":Ma,"lt-LT":La,"lv-LV":Ta,"nb-NO":Da,"nl-NL":Ra,"pl-PL":Va,"pt-BR":qa,"pt-PT":Oa,"ro-RO":Ba,"ru-RU":Ua,"sk-SK":Ha,"sl-SI":Wa,"sr-SP":Ka,"sv-SE":Ga,"tr-TR":Qa,"uk-UA":Ja,"zh-CN":Ya,"zh-TW":Za};const Kl=new Bl(Wl(fa));function Be(s){let t=Ce.parse(s)||_e.parse(s)||Fe.parse(s);if(t)return t;throw new Error("Invalid color value: "+s)}class gt{toHexInt(){return this.toFormat("rgb").toHexInt()}getChannelValue(t){if(t in this)return this[t];throw new Error("Unsupported color channel: "+t)}withChannelValue(t,a){if(t in this){let n=this.clone();return n[t]=a,n}throw new Error("Unsupported color channel: "+t)}getChannelName(t,a){return Kl.getStringForLocale(t,a)}getColorSpaceAxes(t){let{xChannel:a,yChannel:n}=t,i=a||this.getColorChannels().find(c=>c!==n),l=n||this.getColorChannels().find(c=>c!==i),o=this.getColorChannels().find(c=>c!==i&&c!==l);return{xChannel:i,yChannel:l,zChannel:o}}}class Ce extends gt{static parse(t){let a=[];if(/^#[\da-f]+$/i.test(t)&&[4,5,7,9].includes(t.length)){const l=(t.length<6?t.replace(/[^#]/gi,"$&$&"):t).slice(1).split("");for(;l.length>0;)a.push(parseInt(l.splice(0,2).join(""),16));a[3]=a[3]!==void 0?a[3]/255:void 0}const n=t.match(/^rgba?\((.*)\)$/);n!=null&&n[1]&&(a=n[1].split(",").map(l=>Number(l.trim())),a=a.map((l,o)=>Me(l,0,o<3?255:1)));var i;return a.length<3?void 0:new Ce(a[0],a[1],a[2],(i=a[3])!==null&&i!==void 0?i:1)}toString(t){switch(t){case"hex":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")).toUpperCase();case"hexa":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")+Math.round(this.alpha*255).toString(16).padStart(2,"0")).toUpperCase();case"rgb":return`rgb(${this.red}, ${this.green}, ${this.blue})`;case"css":case"rgba":return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hex":case"hexa":case"rgb":case"rgba":return this;case"hsb":case"hsba":return this.toHSB();case"hsl":case"hsla":return this.toHSL();default:throw new Error("Unsupported color conversion: rgb -> "+t)}}toHexInt(){return this.red<<16|this.green<<8|this.blue}toHSB(){const t=this.red/255,a=this.green/255,n=this.blue/255,i=Math.min(t,a,n),l=Math.max(t,a,n),o=l-i,c=l===0?0:o/l;let u=0;if(o!==0){switch(l){case t:u=(a-n)/o+(a<n?6:0);break;case a:u=(n-t)/o+2;break;case n:u=(t-a)/o+4;break}u/=6}return new _e(K(u*360,2),K(c*100,2),K(l*100,2),this.alpha)}toHSL(){const t=this.red/255,a=this.green/255,n=this.blue/255,i=Math.min(t,a,n),l=Math.max(t,a,n),o=(l+i)/2,c=l-i;let u,m;if(c===0)u=m=0;else{switch(m=c/(o<.5?l+i:2-l-i),l){case t:u=(a-n)/c+(a<n?6:0);break;case a:u=(n-t)/c+2;break;case n:u=(t-a)/c+4;break}u/=6}return new Fe(K(u*360,2),K(m*100,2),K(o*100,2),this.alpha)}clone(){return new Ce(this.red,this.green,this.blue,this.alpha)}getChannelRange(t){switch(t){case"red":case"green":case"blue":return{minValue:0,maxValue:255,step:1,pageSize:17};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,a){let n,i=this.getChannelValue(t);switch(t){case"red":case"green":case"blue":n={style:"decimal"};break;case"alpha":n={style:"percent"};break;default:throw new Error("Unknown color channel: "+t)}return new ot(a,n).format(i)}getColorSpace(){return"rgb"}getColorChannels(){return Ce.colorChannels}constructor(t,a,n,i){super(),this.red=t,this.green=a,this.blue=n,this.alpha=i}}Ce.colorChannels=["red","green","blue"];const Gl=/hsb\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsba\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;class _e extends gt{static parse(t){let a;if(a=t.match(Gl)){var n;const[i,l,o,c]=((n=a[1])!==null&&n!==void 0?n:a[2]).split(",").map(u=>Number(u.trim().replace("%","")));return new _e(Xa(i,360),Me(l,0,100),Me(o,0,100),Me(c??1,0,1))}}toString(t){switch(t){case"css":return this.toHSL().toString("css");case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsb":return`hsb(${this.hue}, ${K(this.saturation,2)}%, ${K(this.brightness,2)}%)`;case"hsba":return`hsba(${this.hue}, ${K(this.saturation,2)}%, ${K(this.brightness,2)}%, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hsb":case"hsba":return this;case"hsl":case"hsla":return this.toHSL();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsb -> "+t)}}toHSL(){let t=this.saturation/100,a=this.brightness/100,n=a*(1-t/2);return t=n===0||n===1?0:(a-n)/Math.min(n,1-n),new Fe(K(this.hue,2),K(t*100,2),K(n*100,2),this.alpha)}toRGB(){let t=this.hue,a=this.saturation/100,n=this.brightness/100,i=(l,o=(l+t/60)%6)=>n-a*n*Math.max(Math.min(o,4-o,1),0);return new Ce(Math.round(i(5)*255),Math.round(i(3)*255),Math.round(i(1)*255),this.alpha)}clone(){return new _e(this.hue,this.saturation,this.brightness,this.alpha)}getChannelRange(t){switch(t){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"brightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,a){let n,i=this.getChannelValue(t);switch(t){case"hue":n={style:"unit",unit:"degree",unitDisplay:"narrow"};break;case"saturation":case"brightness":n={style:"percent"},i/=100;break;case"alpha":n={style:"percent"};break;default:throw new Error("Unknown color channel: "+t)}return new ot(a,n).format(i)}getColorSpace(){return"hsb"}getColorChannels(){return _e.colorChannels}constructor(t,a,n,i){super(),this.hue=t,this.saturation=a,this.brightness=n,this.alpha=i}}_e.colorChannels=["hue","saturation","brightness"];const Ql=/hsl\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsla\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;function Xa(s,t){return(s%t+t)%t}class Fe extends gt{static parse(t){let a;if(a=t.match(Ql)){var n;const[i,l,o,c]=((n=a[1])!==null&&n!==void 0?n:a[2]).split(",").map(u=>Number(u.trim().replace("%","")));return new Fe(Xa(i,360),Me(l,0,100),Me(o,0,100),Me(c??1,0,1))}}toString(t){switch(t){case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsl":return`hsl(${this.hue}, ${K(this.saturation,2)}%, ${K(this.lightness,2)}%)`;case"css":case"hsla":return`hsla(${this.hue}, ${K(this.saturation,2)}%, ${K(this.lightness,2)}%, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hsl":case"hsla":return this;case"hsb":case"hsba":return this.toHSB();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsl -> "+t)}}toHSB(){let t=this.saturation/100,a=this.lightness/100,n=a+t*Math.min(a,1-a);return t=n===0?0:2*(1-a/n),new _e(K(this.hue,2),K(t*100,2),K(n*100,2),this.alpha)}toRGB(){let t=this.hue,a=this.saturation/100,n=this.lightness/100,i=a*Math.min(n,1-n),l=(o,c=(o+t/30)%12)=>n-i*Math.max(Math.min(c-3,9-c,1),-1);return new Ce(Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255),this.alpha)}clone(){return new Fe(this.hue,this.saturation,this.lightness,this.alpha)}getChannelRange(t){switch(t){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"lightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,a){let n,i=this.getChannelValue(t);switch(t){case"hue":n={style:"unit",unit:"degree",unitDisplay:"narrow"};break;case"saturation":case"lightness":n={style:"percent"},i/=100;break;case"alpha":n={style:"percent"};break;default:throw new Error("Unknown color channel: "+t)}return new ot(a,n).format(i)}getColorSpace(){return"hsl"}getColorChannels(){return Fe.colorChannels}constructor(t,a,n,i){super(),this.hue=t,this.saturation=a,this.lightness=n,this.alpha=i}}Fe.colorChannels=["hue","saturation","lightness"];Be("#ffffff");Be("hsl(0, 100%, 50%)");const Jl=Be("#000000"),Yl=Be("#FFFFFF");Jl.toHexInt();Yl.toHexInt();function Zl(s){return Be(s).toString("rgb").replace("rgb(","").replace(")","").replace(/, ?/g," ")}function Xl(s){try{return Be(`rgb(${s.split(" ").join(",")})`).toString("hex")}catch{return s}}const eo=z(e.jsx("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined");function so(){const{getValues:s,setValue:t}=F(),{themeIndex:a}=ie(),n=s(`appearance.themes.all.${+a}`);return e.jsxs(P,{type:"modal",onClose:i=>{i&&s("appearance.themes.all").forEach((l,o)=>{if(l.id===i.id){t(`appearance.themes.all.${o}`,i,{shouldDirty:!0});return}if(i.default_light){t(`appearance.themes.all.${o}`,{...l,default_light:!1},{shouldDirty:!0});return}if(i.default_dark){t(`appearance.themes.all.${o}`,{...l,default_dark:!1},{shouldDirty:!0});return}})},children:[e.jsx(v,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(eo,{}),children:e.jsx(r,{message:"Settings"})}),e.jsx(to,{theme:n})]})}function to({theme:s}){const t=O({defaultValues:s}),{close:a,formId:n}=U();return d.useEffect(()=>{const i=t.watch((l,{name:o})=>{o==="default_light"&&l.default_light&&t.setValue("default_dark",!1),o==="default_dark"&&l.default_dark&&t.setValue("default_light",!1)});return()=>i.unsubscribe()},[t]),e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Update settings"})}),e.jsx(X,{children:e.jsxs(ne,{form:t,id:n,onSubmit:i=>{a(i)},children:[e.jsx(g,{name:"name",label:e.jsx(r,{message:"Name"}),className:"mb-30",autoFocus:!0}),e.jsx(q,{name:"is_dark",className:"mb-20 pb-20 border-b",description:e.jsx(r,{message:"Whether this theme has light text on dark background."}),children:e.jsx(r,{message:"Dark theme"})}),e.jsx(q,{name:"default_light",className:"mb-30",description:e.jsx(r,{message:"When light mode is selected, this theme will be used."}),children:e.jsx(r,{message:"Default for light mode"})}),e.jsx(q,{name:"default_dark",description:e.jsx(r,{message:"When dark mode is selected, this theme will be used."}),children:e.jsx(r,{message:"Default for dark mode"})})]})}),e.jsxs(de,{children:[e.jsx(v,{onClick:()=>{a()},children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{variant:"flat",color:"primary",type:"submit",form:n,disabled:!t.formState.isDirty,children:e.jsx(r,{message:"Save"})})]})]})}const ao=z(e.jsx("path",{d:"M6 13c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91zm14 0c0-4.42-3.58-8-8-8-.06 0-.12.01-.18.01l1.09-1.09L11.5 2.5 8 6l3.5 3.5 1.41-1.41-1.08-1.08c.06 0 .12-.01.17-.01 3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93z"}),"RestartAltOutlined");function no(){const s=ce(),{themeIndex:t}=ie(),[a,n]=d.useState(!1),{setValue:i,getValues:l}=F(),{fields:o,remove:c}=ke({name:"appearance.themes.all"}),u=()=>{if(o.length<=1){V.danger(x("At least one theme is required"));return}t&&(s("/admin/appearance/themes"),c(+t),i("appearance.themes.selectedThemeId",null))};return e.jsxs(d.Fragment,{children:[e.jsxs(Je,{onItemSelected:m=>{if(m==="delete")n(!0);else if(m==="reset"){const h=`appearance.themes.all.${+t}`,j=l(`${h}.is_dark`)?Y().defaults.appearance.themes.dark:Y().defaults.appearance.themes.light;Object.entries(j).forEach(([b,S])=>{Y().preview.setThemeValue(b,S)}),Y().preview.setThemeFont(null),i(`${h}.values`,j,{shouldDirty:!0}),i(`${h}.font`,void 0,{shouldDirty:!0})}},children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(Xt,{})}),e.jsxs(Ye,{children:[e.jsx(p,{value:"reset",startIcon:e.jsx(ao,{}),children:e.jsx(r,{message:"Reset colors"})}),e.jsx(p,{value:"delete",startIcon:e.jsx(Es,{}),children:e.jsx(r,{message:"Delete"})})]})]}),e.jsx(P,{type:"modal",isOpen:a,onClose:m=>{m&&u(),n(!1)},children:e.jsx(xe,{isDanger:!0,title:e.jsx(r,{message:"Delete theme"}),body:e.jsx(r,{message:"Are you sure you want to delete this theme?"}),confirm:e.jsx(r,{message:"Delete"})})})]})}function Xe(){return(Xe=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s[n]=a[n])}return s}).apply(this,arguments)}function Ls(s,t){if(s==null)return{};var a,n,i={},l=Object.keys(s);for(n=0;n<l.length;n++)t.indexOf(a=l[n])>=0||(i[a]=s[a]);return i}function rs(s){var t=d.useRef(s),a=d.useRef(function(n){t.current&&t.current(n)});return t.current=s,a.current}var is=function(s,t,a){return t===void 0&&(t=0),a===void 0&&(a=1),s>a?a:s<t?t:s},ts=function(s){return"touches"in s},Gs=function(s){return s&&s.ownerDocument.defaultView||self},zt=function(s,t,a){var n=s.getBoundingClientRect(),i=ts(t)?function(l,o){for(var c=0;c<l.length;c++)if(l[c].identifier===o)return l[c];return l[0]}(t.touches,a):t;return{left:is((i.pageX-(n.left+Gs(s).pageXOffset))/n.width),top:is((i.pageY-(n.top+Gs(s).pageYOffset))/n.height)}},At=function(s){!ts(s)&&s.preventDefault()},en=I.memo(function(s){var t=s.onMove,a=s.onKey,n=Ls(s,["onMove","onKey"]),i=d.useRef(null),l=rs(t),o=rs(a),c=d.useRef(null),u=d.useRef(!1),m=d.useMemo(function(){var S=function(N){At(N),(ts(N)?N.touches.length>0:N.buttons>0)&&i.current?l(zt(i.current,N,c.current)):f(!1)},C=function(){return f(!1)};function f(N){var _=u.current,A=Gs(i.current),E=N?A.addEventListener:A.removeEventListener;E(_?"touchmove":"mousemove",S),E(_?"touchend":"mouseup",C)}return[function(N){var _=N.nativeEvent,A=i.current;if(A&&(At(_),!function(B,M){return M&&!ts(B)}(_,u.current)&&A)){if(ts(_)){u.current=!0;var E=_.changedTouches||[];E.length&&(c.current=E[0].identifier)}A.focus(),l(zt(A,_,c.current)),f(!0)}},function(N){var _=N.which||N.keyCode;_<37||_>40||(N.preventDefault(),o({left:_===39?.05:_===37?-.05:0,top:_===40?.05:_===38?-.05:0}))},f]},[o,l]),h=m[0],j=m[1],b=m[2];return d.useEffect(function(){return b},[b]),I.createElement("div",Xe({},n,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:i,onKeyDown:j,tabIndex:0,role:"slider"}))}),pt=function(s){return s.filter(Boolean).join(" ")},sn=function(s){var t=s.color,a=s.left,n=s.top,i=n===void 0?.5:n,l=pt(["react-colorful__pointer",s.className]);return I.createElement("div",{className:l,style:{top:100*i+"%",left:100*a+"%"}},I.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},ee=function(s,t,a){return t===void 0&&(t=0),a===void 0&&(a=Math.pow(10,t)),Math.round(a*s)/a},ro=function(s){return uo(Qs(s))},Qs=function(s){return s[0]==="#"&&(s=s.substring(1)),s.length<6?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?ee(parseInt(s[3]+s[3],16)/255,2):1}:{r:parseInt(s.substring(0,2),16),g:parseInt(s.substring(2,4),16),b:parseInt(s.substring(4,6),16),a:s.length===8?ee(parseInt(s.substring(6,8),16)/255,2):1}},io=function(s){return co(oo(s))},lo=function(s){var t=s.s,a=s.v,n=s.a,i=(200-t)*a/100;return{h:ee(s.h),s:ee(i>0&&i<200?t*a/100/(i<=100?i:200-i)*100:0),l:ee(i/2),a:ee(n,2)}},Js=function(s){var t=lo(s);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},oo=function(s){var t=s.h,a=s.s,n=s.v,i=s.a;t=t/360*6,a/=100,n/=100;var l=Math.floor(t),o=n*(1-a),c=n*(1-(t-l)*a),u=n*(1-(1-t+l)*a),m=l%6;return{r:ee(255*[n,c,o,o,u,n][m]),g:ee(255*[u,n,n,c,o,o][m]),b:ee(255*[o,o,u,n,n,c][m]),a:ee(i,2)}},ws=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},co=function(s){var t=s.r,a=s.g,n=s.b,i=s.a,l=i<1?ws(ee(255*i)):"";return"#"+ws(t)+ws(a)+ws(n)+l},uo=function(s){var t=s.r,a=s.g,n=s.b,i=s.a,l=Math.max(t,a,n),o=l-Math.min(t,a,n),c=o?l===t?(a-n)/o:l===a?2+(n-t)/o:4+(t-a)/o:0;return{h:ee(60*(c<0?c+6:c)),s:ee(l?o/l*100:0),v:ee(l/255*100),a:i}},mo=I.memo(function(s){var t=s.hue,a=s.onChange,n=pt(["react-colorful__hue",s.className]);return I.createElement("div",{className:n},I.createElement(en,{onMove:function(i){a({h:360*i.left})},onKey:function(i){a({h:is(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":ee(t),"aria-valuemax":"360","aria-valuemin":"0"},I.createElement(sn,{className:"react-colorful__hue-pointer",left:t/360,color:Js({h:t,s:100,v:100,a:1})})))}),xo=I.memo(function(s){var t=s.hsva,a=s.onChange,n={backgroundColor:Js({h:t.h,s:100,v:100,a:1})};return I.createElement("div",{className:"react-colorful__saturation",style:n},I.createElement(en,{onMove:function(i){a({s:100*i.left,v:100-100*i.top})},onKey:function(i){a({s:is(t.s+100*i.left,0,100),v:is(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ee(t.s)+"%, Brightness "+ee(t.v)+"%"},I.createElement(sn,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Js(t)})))}),tn=function(s,t){if(s===t)return!0;for(var a in s)if(s[a]!==t[a])return!1;return!0},ho=function(s,t){return s.toLowerCase()===t.toLowerCase()||tn(Qs(s),Qs(t))};function go(s,t,a){var n=rs(a),i=d.useState(function(){return s.toHsva(t)}),l=i[0],o=i[1],c=d.useRef({color:t,hsva:l});d.useEffect(function(){if(!s.equal(t,c.current.color)){var m=s.toHsva(t);c.current={hsva:m,color:t},o(m)}},[t,s]),d.useEffect(function(){var m;tn(l,c.current.hsva)||s.equal(m=s.fromHsva(l),c.current.color)||(c.current={hsva:l,color:m},n(m))},[l,s,n]);var u=d.useCallback(function(m){o(function(h){return Object.assign({},h,m)})},[]);return[l,u]}var po=typeof window<"u"?d.useLayoutEffect:d.useEffect,jo=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},It=new Map,fo=function(s){po(function(){var t=s.current?s.current.ownerDocument:document;if(t!==void 0&&!It.has(t)){var a=t.createElement("style");a.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,It.set(t,a);var n=jo();n&&a.setAttribute("nonce",n),t.head.appendChild(a)}},[])},bo=function(s){var t=s.className,a=s.colorModel,n=s.color,i=n===void 0?a.defaultColor:n,l=s.onChange,o=Ls(s,["className","colorModel","color","onChange"]),c=d.useRef(null);fo(c);var u=go(a,i,l),m=u[0],h=u[1],j=pt(["react-colorful",t]);return I.createElement("div",Xe({},o,{ref:c,className:j}),I.createElement(xo,{hsva:m,onChange:h}),I.createElement(mo,{hue:m.h,onChange:h,className:"react-colorful__last-control"}))},vo={defaultColor:"000",toHsva:ro,fromHsva:function(s){return io({h:s.h,s:s.s,v:s.v,a:1})},equal:ho},yo=function(s){return I.createElement(bo,Xe({},s,{colorModel:vo}))},wo=/^#?([0-9A-F]{3,8})$/i,So=function(s){var t=s.color,a=t===void 0?"":t,n=s.onChange,i=s.onBlur,l=s.escape,o=s.validate,c=s.format,u=s.process,m=Ls(s,["color","onChange","onBlur","escape","validate","format","process"]),h=d.useState(function(){return l(a)}),j=h[0],b=h[1],S=rs(n),C=rs(i),f=d.useCallback(function(_){var A=l(_.target.value);b(A),o(A)&&S(u?u(A):A)},[l,u,o,S]),N=d.useCallback(function(_){o(_.target.value)||b(l(a)),C(_)},[a,l,o,C]);return d.useEffect(function(){b(l(a))},[a,l]),I.createElement("input",Xe({},m,{value:c?c(j):j,spellCheck:"false",onChange:f,onBlur:N}))},Pt=function(s){return"#"+s},ko=function(s){var t=s.prefixed,a=s.alpha,n=Ls(s,["prefixed","alpha"]),i=d.useCallback(function(o){return o.replace(/([^0-9A-F]+)/gi,"").substring(0,a?8:6)},[a]),l=d.useCallback(function(o){return function(c,u){var m=wo.exec(c),h=m?m[1].length:0;return h===3||h===6||!!u&&h===4||!!u&&h===8}(o,a)},[a]);return I.createElement(So,Xe({},n,{escape:i,format:t?Pt:void 0,process:Pt,validate:l}))};function No({onChange:s,value:t,colors:a}){const n=a.map(i=>{const l=t===i;return e.jsx(As,{onClick:()=>{s==null||s(i)},className:y("relative block flex-shrink-0 w-26 h-26 border rounded",l&&"shadow-md"),style:{backgroundColor:i},children:l&&e.jsx("span",{className:"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"})},i)});return e.jsx("div",{className:"flex flex-wrap gap-6",children:n})}const Co=[{color:"rgb(255, 255, 255)",name:x("White")},{color:"rgb(239,245,245)",name:x("Solitude")},{color:"rgb(245,213,174)",name:x("Wheat")},{color:"rgb(253,227,167)",name:x("Cape Honey")},{color:"rgb(242,222,186)",name:x("Milk punch")},{color:"rgb(97,118,75)",name:x("Dingy"),foreground:"rgb(255, 255, 255)"},{color:"rgb(4, 147, 114)",name:x("Aquamarine"),foreground:"rgb(255, 255, 255)"},{color:"rgb(222,245,229)",name:x("Cosmic Latte")},{color:"rgb(233,119,119)",name:x("Geraldine"),foreground:"rgb(90,14,14)"},{color:"rgb(247,164,164)",name:x("Sundown")},{color:"rgb(30,139,195)",name:x("Pelorous"),foreground:"rgb(255, 255, 255)"},{color:"rgb(142,68,173)",name:x("Deep Lilac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(108,74,182)",name:x("Blue marguerite"),foreground:"rgb(255, 255, 255)"},{color:"rgb(139,126,116)",name:x("Americano"),foreground:"rgb(255, 255, 255)"},{color:"rgb(0,0,0)",name:x("Black"),foreground:"rgb(255, 255, 255)"},{color:"rgb(64,66,88)",name:x("Blue zodiac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(101,100,124)",name:x("Comet"),foreground:"rgb(255, 255, 255)"}],_o=Co.map(({color:s})=>s).slice(0,14);function Fo({defaultValue:s,onChange:t,colorPresets:a,showInput:n}){const[i,l]=d.useState(s),o=a||_o,c=Wt({size:"sm"});return e.jsxs("div",{children:[e.jsx(yo,{className:"!w-auto",color:i,onChange:u=>{t==null||t(u),l(u)}}),e.jsxs("div",{className:"py-20 px-12",children:[o&&e.jsx(No,{colors:o,onChange:u=>{if(u){const m=Be(u).toString("hex");t==null||t(m),l(m)}},value:i}),n&&e.jsx("div",{className:"pt-20",children:e.jsx(ko,{autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,"aria-label":"Hex color",prefixed:!0,className:c.input,color:i,onChange:u=>{t==null||t(u),l(u)}})})]})]})}function an({defaultValue:s,onChange:t,hideFooter:a=!1,showInput:n=!0}){const{close:i}=U(),[l,o]=d.useState(s||"");return e.jsxs(Q,{size:"2xs",children:[e.jsx(Fo,{showInput:n,defaultValue:l,onChange:c=>{o(c),t==null||t(c)}}),!a&&e.jsxs(de,{dividerTop:!0,children:[e.jsx(v,{variant:"text",size:"xs",onClick:()=>{i()},children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{variant:"flat",color:"primary",size:"xs",onClick:()=>{i(l)},children:e.jsx(r,{message:"Apply"})})]})]})}const Et=[{label:x("Accent"),value:"primary",bgColor:"bg-primary",previewBgColor:"text-primary"},{label:x("Background"),value:"bg",bgColor:"bg-background",previewBgColor:"text-background"},{label:x("Background alt"),value:"bg-alt",bgColor:"bg-alt",previewBgColor:"text-background-alt"},{label:x("Transparent"),value:"transparent",bgColor:"bg-transparent",previewBgColor:"text-transparent"}];function zo(){var o;const{themeIndex:s}=ie(),{watch:t,setValue:a}=F(),n=`appearance.themes.all.${s}.values.--be-navbar-color`,i=t(n),l=(o=Et.find(({value:c})=>c===i))==null?void 0:o.previewBgColor;return e.jsxs(Je,{placement:"right",selectionMode:"single",selectedValue:i,onSelectionChange:c=>{a(n,c,{shouldDirty:!0})},children:[e.jsx(Se,{startIcon:e.jsx(ja,{viewBox:"0 0 48 48",className:y("icon-lg",l)}),children:e.jsx(r,{message:"Navbar"})}),e.jsx(Ye,{children:Et.map(({label:c,value:u,bgColor:m})=>e.jsx(p,{value:u,startIcon:e.jsx("div",{className:y("h-20 w-20 rounded border",m)}),children:e.jsx(r,{...c})},u))})]})}const Ao=[{label:x("Background"),key:"--be-background"},{label:x("Background alt"),key:"--be-background-alt"},{label:x("Foreground"),key:"--be-foreground-base"},{label:x("Accent light"),key:"--be-primary-light"},{label:x("Accent"),key:"--be-primary"},{label:x("Accent dark"),key:"--be-primary-dark"},{label:x("Text on accent"),key:"--be-on-primary"},{label:x("Chip"),key:"--be-background-chip"}];function Io(){const s=Re(),{themeIndex:t}=ie(),{getValues:a,watch:n}=F(),i=a(`appearance.themes.all.${+t}`),l=n(`appearance.themes.all.${+t}.font.family`);return d.useEffect(()=>{i||s("/admin/appearance/themes")},[s,i]),d.useEffect(()=>{i!=null&&i.id&&Y().preview.setActiveTheme(i.id)},[i==null?void 0:i.id]),i?e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-20 flex items-center justify-between gap-10",children:[e.jsx(so,{}),e.jsx(no,{})]}),e.jsxs("div",{children:[e.jsx(Se,{elementType:W,to:"font",description:l||e.jsx(r,{message:"System"}),children:e.jsx(r,{message:"Font"})}),e.jsx(Se,{elementType:W,to:"radius",children:e.jsx(r,{message:"Rounding"})}),e.jsx("div",{className:"mb-6 mt-22 text-sm font-semibold",children:e.jsx(r,{message:"Colors"})}),e.jsx(zo,{}),Ao.map(o=>e.jsx(Po,{colorName:o.key,label:e.jsx(r,{...o.label}),initialThemeValue:i.values[o.key],theme:i},o.key))]})]}):null}function Po({label:s,theme:t,colorName:a,initialThemeValue:n}){const{setValue:i}=F(),{themeIndex:l}=ie(),[o,c]=d.useState(n),u=h=>{c(h),Y().preview.setThemeValue(a,h)};d.useEffect(()=>{c(n)},[n]);const m=Xl(n);return e.jsxs(P,{currentValue:m,type:"popover",placement:"right",offset:10,onClose:h=>{h&&h!==m?(i(`appearance.themes.all.${+l}.values.${a}`,o,{shouldDirty:!0}),i("appearance.themes.selectedThemeId",t.id)):u(n)},children:[e.jsx(Se,{className:"capitalize",startIcon:e.jsx(ja,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:`rgb(${o})`}}),children:s}),e.jsx(an,{defaultValue:m,onChange:h=>{u(Zl(h))}})]})}function Eo(){return e.jsxs(me,{title:e.jsx(r,{message:"Drive"}),description:e.jsx(r,{message:"Configure defaults for drive user dashboard."}),children:[e.jsxs(Kt,{required:!0,className:"mb-30",size:"md",name:"client.drive.default_view",orientation:"vertical",label:e.jsx(r,{message:"Default view mode"}),description:e.jsx(r,{message:"Which view mode should user drive use by default."}),children:[e.jsx(ss,{value:"list",children:e.jsx(r,{message:"List"})}),e.jsx(ss,{value:"grid",children:e.jsx(r,{message:"Grid"})})]}),e.jsx(q,{className:"mb-30",name:"client.drive.send_share_notification",description:e.jsx(r,{message:"Send a notification to user when a file or folder is shared with them."}),children:e.jsx(r,{message:"Share notifications"})}),e.jsx(q,{name:"client.share.suggest_emails",description:e.jsx(r,{message:"Suggest email address of existing users when sharing a file or folder."}),children:e.jsx(r,{message:"Suggest emails"})})]})}const $o=[{path:"drive",element:e.jsx(Eo,{})}];function ls(){return e.jsx("div",{className:"h-1 bg-divider my-30"})}function ye({children:s,name:t,separatorBottom:a=!0,separatorTop:n=!0}){const{formState:{errors:i}}=F(),l=d.useRef(null),o=i[t];return d.useEffect(()=>{var c;o&&((c=l.current)==null||c.scrollIntoView({behavior:"smooth"}))},[o]),e.jsxs("div",{className:y(a&&"border-b mb-20 pb-20",n&&"border-t mt-20 pt-20",o&&"border-y-error"),ref:l,children:[s(!!o),o&&e.jsx("div",{className:"text-danger text-sm mt-20",dangerouslySetInnerHTML:{__html:o.message}})]})}function Ys({children:s,...t}){const{field:{onChange:a,onBlur:n,value:i=[],ref:l},fieldState:{invalid:o,error:c}}=ds({name:t.name}),u=d.useMemo(()=>{const h=i;return typeof h=="string"?JSON.parse(h):h},[i]),m={onChange:h=>{const j=JSON.stringify(h.map(b=>b.name));a(j)},onBlur:n,value:u,invalid:o,errorMessage:c==null?void 0:c.message};return e.jsx(Lr,{ref:l,...cs(m,t)})}const fs=I.createContext(null);function nn(s){const{size:t="md",children:a,className:n,isLazy:i,overflow:l="overflow-hidden"}=s,o=d.useRef([]),c=d.useId(),[u,m]=ks(s.selectedTab,s.defaultSelectedTab||0,s.onTabChange),h=d.useMemo(()=>({selectedTab:u,setSelectedTab:m,tabsRef:o,size:t,isLazy:i,id:c}),[u,c,i,m,t]);return e.jsx(fs.Provider,{value:h,children:e.jsx("div",{className:y(n,l,"max-w-full"),children:a})})}function Mo(){const{tabsRef:s,selectedTab:t}=d.useContext(fs),[a,n]=d.useState({width:void 0,transform:void 0,className:void 0});return Gt(()=>{if(t!=null&&s.current){const i=s.current[t];if(!i)return;n(l=>({width:`${i.offsetWidth}px`,transform:`translateX(${i.offsetLeft}px)`,className:l.width===void 0?"":"transition-all"}))}},[n,t,s]),e.jsx("div",{className:y("absolute bottom-0 left-0 h-2 bg-primary",a.className),role:"presentation",style:{width:a.width,transform:a.transform}})}function rn({children:s,center:t,expand:a,className:n}){const i=d.Children.toArray(s);return e.jsx(Dt,{children:e.jsxs("div",{className:y("flex relative max-w-full overflow-auto border-b max-sm:hidden-scrollbar md:compact-scrollbar",n),role:"tablist","aria-orientation":"horizontal",children:[i.map((l,o)=>d.isValidElement(l)?d.cloneElement(l,{index:o,className:y(l.props.className,a&&"flex-auto",t&&o===0&&"ml-auto",t&&o===i.length-1&&"mr-auto")}):null),e.jsx(Mo,{})]})})}function Zs({index:s,className:t,isDisabled:a,children:n,padding:i,elementType:l="button",to:o,relative:c,width:u="min-w-min"}){const{selectedTab:m,setSelectedTab:h,tabsRef:j,size:b="md",id:S}=d.useContext(fs),C=s===m,f=Rt(),N=i||(b==="sm"?"px-12":"px-18"),_=y("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer",u,Lo({isDisabled:a,isSelected:C}),t,b==="md"&&`${N} h-48`,b==="sm"&&`${N} h-32`,a&&"pointer-events-none"),A=M=>{switch(M.key){case"ArrowLeft":f==null||f.focusPrevious();break;case"ArrowRight":f==null||f.focusNext();break;case"Home":f==null||f.focusFirst();break;case"End":f==null||f.focusLast();break}},E=C?0:-1,B=l;return e.jsx(B,{disabled:a,id:`${S}-${s}-tab`,"aria-controls":`${S}-${s}-tabpanel`,type:"button",role:"tab","aria-selected":C,tabIndex:a?void 0:E,onKeyDown:A,onClick:()=>{h(s)},to:o,relative:c,className:_,ref:M=>{j.current&&M&&(j.current[s]=M)},children:n})}function Lo({isDisabled:s,isSelected:t}){return s?"text-disabled cursor-default":t?"text-primary":"text-muted hover:text-main"}function ln({children:s,className:t}){const{selectedTab:a,isLazy:n}=d.useContext(fs),i=d.Children.toArray(s).filter(o=>!!o);let l;if(n){const o=i[a];l=d.isValidElement(o)?d.cloneElement(i[a],{index:a}):null}else l=i.map((o,c)=>{if(d.isValidElement(o)){const u=c===a;return d.cloneElement(o,{index:c,"aria-hidden":!u,className:u?o.props.className:y(o.props.className,"hidden")})}return null});return e.jsx("div",{className:t,children:l})}function Xs({className:s,children:t,index:a,...n}){const{id:i}=d.useContext(fs),[l,o]=d.useState(0),c=d.useRef(null);return Gt(()=>{if(c!=null&&c.current){const u=()=>{const h=Bn(c.current,{tabbable:!0});o(h.nextNode()?void 0:0)};u();const m=new MutationObserver(u);return m.observe(c.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{m.disconnect()}}},[c]),e.jsx("div",{tabIndex:l,ref:c,id:`${i}-${a}-tabpanel`,"aria-labelledby":`${i}-${a}-tab`,className:y(s,"focus-visible:outline-primary-light"),role:"tabpanel",...n,children:t})}function To(){const{trans:s}=D();return e.jsx(me,{title:e.jsx(r,{message:"Subscriptions"}),description:e.jsx(r,{message:"Configure gateway integration, accepted cards, invoices and other related settings."}),children:e.jsxs(nn,{children:[e.jsx(rn,{children:e.jsx(Zs,{children:e.jsx(r,{message:"General"})})}),e.jsx(ln,{className:"pt-30",children:e.jsxs(Xs,{children:[e.jsx(q,{name:"client.billing.enable",description:e.jsx(r,{message:"Enable or disable all subscription related functionality across the site."}),children:e.jsx(r,{message:"Enable subscriptions"})}),e.jsx(ls,{}),e.jsx(Do,{}),e.jsx(Ro,{}),e.jsx(ls,{}),e.jsx(Ys,{label:e.jsx(r,{message:"Accepted cards"}),name:"client.billing.accepted_cards",placeholder:s({message:"Add new card..."})})]})})]})})}function Do(){const{watch:s}=F(),t=s("client.billing.paypal.enable");return e.jsxs("div",{className:"mb-30",children:[e.jsx(q,{name:"client.billing.paypal.enable",description:e.jsxs("div",{children:[e.jsx(r,{message:"Enable PayPal payment gateway integration."}),e.jsx(Ms,{className:"mt-6",link:"https://support.vebto.com/help-center/articles/147/configuring-paypal"})]}),children:e.jsx(r,{message:"PayPal gateway"})}),t?e.jsx(ye,{name:"paypal_group",children:a=>e.jsxs(d.Fragment,{children:[e.jsx(g,{name:"server.paypal_client_id",label:e.jsx(r,{message:"PayPal Client ID"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(g,{name:"server.paypal_secret",label:e.jsx(r,{message:"PayPal Secret"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(g,{name:"server.paypal_webhook_id",label:e.jsx(r,{message:"PayPal Webhook ID"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(q,{name:"client.billing.paypal_test_mode",invalid:a,description:e.jsx("div",{children:e.jsx(r,{message:"Allows testing PayPal payments with sandbox accounts."})}),children:e.jsx(r,{message:"PayPal test mode"})})]})}):null]})}function Ro(){const{watch:s}=F(),t=s("client.billing.stripe.enable");return e.jsxs(d.Fragment,{children:[e.jsx(q,{name:"client.billing.stripe.enable",description:e.jsxs("div",{children:[e.jsx(r,{message:"Enable Stripe payment gateway integration."}),e.jsx(Ms,{className:"mt-6",link:"https://support.vebto.com/help-center/articles/148/configuring-stripe"})]}),children:e.jsx(r,{message:"Stripe gateway"})}),t?e.jsx(ye,{name:"stripe_group",separatorBottom:!1,children:a=>e.jsxs(d.Fragment,{children:[e.jsx(g,{name:"server.stripe_key",label:e.jsx(r,{message:"Stripe publishable key"}),required:!0,className:"mb-20",invalid:a}),e.jsx(g,{name:"server.stripe_secret",label:e.jsx(r,{message:"Stripe secret key"}),required:!0,className:"mb-20",invalid:a}),e.jsx(g,{name:"server.stripe_webhook_secret",label:e.jsx(r,{message:"Stripe webhook signing secret"}),className:"mb-20",invalid:a})]})}):null]})}function Vo(){return e.jsx(me,{title:e.jsx(r,{message:"Authentication"}),description:e.jsx(r,{message:"Configure registration, social login and related 3rd party integrations."}),children:e.jsx(Oo,{})})}function qo(){const{watch:s}=F();return s("server.mail_setup")?null:e.jsx("p",{className:"mt-10 rounded-panel border p-10 text-sm text-danger",children:e.jsx(r,{message:"Outgoing mail method needs to be setup before enabling this setting. <a>Fix now</a>",values:{a:a=>e.jsx(v,{elementType:W,variant:"outline",size:"xs",display:"flex",className:"mt-10 max-w-max",to:"/admin/settings/outgoing-email",children:a})}})})}function Oo(){return e.jsx(q,{className:"mb-30",name:"client.require_email_confirmation",description:e.jsxs(d.Fragment,{children:[e.jsx(r,{message:"Require newly registered users to validate their email address before being able to login."}),e.jsx(qo,{})]}),children:e.jsx(r,{message:"Require email confirmation"})})}function Te({title:s,description:t,actions:a,color:n="primary",className:i}){return e.jsxs("div",{className:y(i,"p-10 rounded",n==="positive"&&"bg-positive/focus border-l-positive border-l-4",n==="warning"&&"bg-warning/focus border-l-warning border-l-4",n==="danger"&&"bg-danger/focus border-l-danger border-l-4",n==="primary"&&"bg-primary/focus border-l-primary border-l-4",n==="neutral"&&"bg-paper border"),children:[s&&e.jsx("div",{className:"text-sm mb-4 font-medium",children:s}),t&&e.jsx("div",{className:"text-sm",children:t}),a&&e.jsx("div",{className:"mt-14",children:a})]})}function Bo(){return $.get("uploads/server-max-file-size").then(s=>s.data)}function Uo(){return De({queryKey:["MaxServerUploadSize"],queryFn:()=>Bo()})}const Ho=["B","KB","MB","GB","TB","PB"];function $t(s,t){if(s==null)return 0;switch(t){case"KB":return s*1024;case"MB":return s*1024**2;case"GB":return s*1024**3;case"TB":return s*1024**4;case"PB":return s*1024**5;default:return s}}const Wo=0x630000000000,as=I.forwardRef(({name:s,...t},a)=>{const{field:{onChange:n,onBlur:i,value:l="",ref:o},fieldState:{invalid:c,error:u}}=ds({name:s}),[m,h]=d.useState(""),[j,b]=d.useState("MB");d.useEffect(()=>{if(l==null||l===""){h("");return}const{amount:f,unit:N}=Ko({bytes:Math.min(l,Wo)});b(N||"MB"),h(Number.isNaN(f)?"":f)},[l,j]);const S={onChange:f=>{const N=parseInt(f.target.value);if(Number.isNaN(N))n(N);else{const _=$t(parseInt(f.target.value),j);n(_)}},onBlur:i,value:m,invalid:c,errorMessage:u==null?void 0:u.message,inputRef:o},C=e.jsx(hs,{minWidth:"min-w-80",selectionMode:"single",selectedValue:j,disabled:!l,onSelectionChange:f=>{const N=$t(m||0,f);n(N)},children:Ho.slice(0,5).map(f=>e.jsx(p,{value:f,children:f==="B"?"Bytes":f},f))});return e.jsx(Ae,{...cs(S,t),type:"number",ref:a,endAppend:C})}),Ko=Un(({bytes:s})=>{const t=Qt(s);if(!t)return{amount:"",unit:"MB"};let a=parseInt(t.split(" ")[0]);return a=Math.round(a),{amount:a,unit:t.split(" ")[1]}});function Go(){const{trans:s}=D();return R({mutationFn:()=>Qo(),onSuccess:()=>{V(s(x("CORS file updated")))},onError:t=>re(t)})}function Qo(){return $.post("s3/cors/upload").then(s=>s.data)}function Jo(){return R({mutationFn:s=>Yo(s),onError:s=>re(s)})}function Yo(s){return $.post("settings/uploading/dropbox-refresh-token",s).then(t=>t.data)}function Zo({isInvalid:s}){const{watch:t,setValue:a}=F(),n=t("server.storage_dropbox_app_key"),i=t("server.storage_dropbox_app_secret");return e.jsxs(d.Fragment,{children:[e.jsx(g,{invalid:s,className:"mb-20",name:"server.storage_dropbox_app_key",label:e.jsx(r,{message:"Dropbox application key"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-20",name:"server.storage_dropbox_app_secret",label:e.jsx(r,{message:"Dropbox application secret"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-20",name:"server.storage_dropbox_refresh_token",label:e.jsx(r,{message:"Dropbox refresh token"}),required:!0}),e.jsxs(P,{type:"modal",onClose:l=>{l&&a("server.storage_dropbox_refresh_token",l)},children:[e.jsx(v,{variant:"outline",color:"primary",size:"xs",disabled:!n||!i,children:e.jsx(r,{message:"Get dropbox refresh token"})}),e.jsx(Xo,{appKey:n,appSecret:i})]})]})}function Xo({appKey:s,appSecret:t}){const a=O(),{formId:n,close:i}=U(),l=Jo();return e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Connected dropbox account"})}),e.jsx(X,{children:e.jsxs(ne,{id:n,form:a,onSubmit:o=>{l.mutate({app_key:s,app_secret:t,access_code:o.accessCode},{onSuccess:c=>{i(c.refreshToken)}})},children:[e.jsxs("div",{className:"mb-20 pb-20 border-b",children:[e.jsx("div",{className:"text-muted text-sm mb-10",children:e.jsx(r,{message:"Click the 'get access code' button to get dropbox access code, then paste it into the field below."})}),e.jsx(v,{variant:"outline",color:"primary",size:"xs",elementType:"a",target:"_blank",href:`https://www.dropbox.com/oauth2/authorize?client_id=${s}&token_access_type=offline&response_type=code`,children:e.jsx(r,{message:"Get access code"})})]}),e.jsx(g,{name:"accessCode",label:e.jsx(r,{message:"Dropbox access code"}),required:!0})]})}),e.jsxs(de,{children:[e.jsx(v,{onClick:()=>{i()},children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{variant:"flat",color:"primary",form:n,type:"submit",disabled:!s||!t||l.isPending,children:e.jsx(r,{message:"Connect"})})]})]})}function ec(){const{trans:s}=D();return e.jsxs(me,{title:e.jsx(r,{message:"Uploading"}),description:e.jsx(r,{message:"Configure size and type of files that users are able to upload. This will affect all uploads across the site."}),children:[e.jsx(tc,{}),e.jsx(ac,{}),e.jsx(nc,{}),e.jsx(ye,{name:"static_delivery_group",children:t=>e.jsxs(Kt,{invalid:t,size:"sm",name:"server.static_file_delivery",orientation:"vertical",label:e.jsx(r,{message:"File delivery optimization"}),description:e.jsx(r,{message:"Both X-Sendfile and X-Accel need to be enabled on the server first. When enabled, it will reduce server memory and CPU usage when previewing or downloading files, especially for large files."}),children:[e.jsx(ss,{value:"",children:e.jsx(r,{message:"None"})}),e.jsx(ss,{value:"xsendfile",children:e.jsx(r,{message:"X-Sendfile (Apache)"})}),e.jsx(ss,{value:"xaccel",children:e.jsx(r,{message:"X-Accel (Nginx)"})})]})}),e.jsx(as,{className:"mb-30",name:"client.uploads.chunk_size",min:1,label:e.jsx(r,{message:"Chunk size"}),placeholder:"Infinity",description:e.jsx(r,{message:"Size (in bytes) for each file chunk. It should only be changed if there is a maximum upload size on your server or proxy (for example cloudflare). If chunk size is larger then limit on the server, uploads will fail."})}),e.jsx(sc,{}),e.jsx(ls,{}),e.jsx(as,{min:1,name:"client.uploads.max_size",className:"mb-30",label:e.jsx(r,{message:"Maximum file size"}),description:e.jsx(r,{message:"Maximum size (in bytes) for a single file user can upload."})}),e.jsx(as,{min:1,name:"client.uploads.available_space",className:"mb-30",label:e.jsx(r,{message:"Available space"}),description:e.jsx(r,{message:"Disk space (in bytes) each user uploads are allowed to take up. This can be overridden per user."})}),e.jsx(Ys,{name:"client.uploads.allowed_extensions",className:"mb-30",label:e.jsx(r,{message:"Allowed extensions"}),placeholder:s(x("Add extension...")),description:e.jsx(r,{message:"List of allowed file types (jpg, mp3, pdf etc.). Leave empty to allow all file types."})}),e.jsx(Ys,{name:"client.uploads.blocked_extensions",label:e.jsx(r,{message:"Blocked extensions"}),placeholder:s(x("Add extension...")),description:e.jsx(r,{message:"Prevent uploading of these file types, even if they are allowed above."})})]})}function sc(){const{data:s}=Uo();return e.jsx(Te,{color:"warning",description:e.jsx(r,{message:"Maximum upload size on your server currently is set to <b>:size</b>",values:{size:s==null?void 0:s.maxSize,b:t=>e.jsx("b",{children:t})}})})}function tc(){const{watch:s,clearErrors:t}=F();return s("server.uploads_disk_driver")?e.jsxs(G,{className:"mb-30",selectionMode:"single",name:"server.uploads_disk_driver",label:e.jsx(r,{message:"User Uploads Storage Method"}),description:e.jsx(r,{message:"Where should user private file uploads be stored."}),onSelectionChange:()=>{t()},children:[e.jsx(p,{value:"local",children:e.jsx(r,{message:"Local Disk (Default)"})}),e.jsx(p,{value:"s3",children:"Amazon S3 (Or compatible service)"})]}):null}function ac(){const{watch:s,clearErrors:t}=F();return s("server.public_disk_driver")?e.jsxs(G,{label:e.jsx(r,{message:"Public Uploads Storage Method"}),selectionMode:"single",name:"server.public_disk_driver",description:e.jsx(r,{message:"Where should user public uploads (like avatars) be stored."}),onSelectionChange:()=>{t()},children:[e.jsx(p,{value:"local",children:e.jsx(r,{message:"Local Disk (Default)"})}),e.jsx(p,{value:"s3",children:"Amazon S3"})]}):null}function nc(){const{watch:s}=F(),t=[s("server.uploads_disk_driver"),s("server.public_disk_driver")];return t[0]==="local"&&t[1]==="local"?null:e.jsx(ye,{separatorBottom:!1,name:"storage_group",children:a=>{if(t.includes("s3"))return e.jsx(rc,{isInvalid:a});if(t.includes("ftp"))return e.jsx(oc,{isInvalid:a});if(t.includes("dropbox"))return e.jsx(Zo,{isInvalid:a});if(t.includes("digitalocean_s3"))return e.jsx(ic,{isInvalid:a});if(t.includes("backblaze_s3"))return e.jsx(lc,{isInvalid:a})}})}function rc({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_s3_key",label:e.jsx(r,{message:"Amazon S3 key"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_s3_secret",label:e.jsx(r,{message:"Amazon S3 secret"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_s3_region",label:e.jsx(r,{message:"Amazon S3 region"}),pattern:"[a-z1-9\\-]+",placeholder:"us-east-1"}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_s3_bucket",label:e.jsx(r,{message:"Amazon S3 bucket"}),required:!0}),e.jsx(g,{invalid:s,name:"server.storage_s3_endpoint",label:e.jsx(r,{message:"Amazon S3 endpoint"}),description:e.jsx(r,{message:"Only change endpoint if you are using another S3 compatible storage service."})}),e.jsx(jt,{invalid:s})]})}function ic({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_key",label:e.jsx(r,{message:"DigitalOcean key"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_secret",label:e.jsx(r,{message:"DigitalOcean secret"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_region",label:e.jsx(r,{message:"DigitalOcean region"}),pattern:"[a-z0-9\\-]+",placeholder:"us-east-1",required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_bucket",label:e.jsx(r,{message:"DigitalOcean bucket"}),required:!0}),e.jsx(jt,{invalid:s})]})}function lc({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_backblaze_key",label:e.jsx(r,{message:"Backblaze KeyID"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_backblaze_secret",label:e.jsx(r,{message:"Backblaze applicationKey"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_backblaze_region",label:e.jsx(r,{message:"Backblaze Region"}),pattern:"[a-z0-9\\-]+",placeholder:"us-west-002",required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_backblaze_bucket",label:e.jsx(r,{message:"Backblaze bucket name"}),required:!0}),e.jsx(jt,{invalid:s})]})}function jt({invalid:s}){var i,l;const t=Go(),{data:a}=js(),n=((i=a==null?void 0:a.server.uploads_disk_driver)==null?void 0:i.endsWith("s3"))||((l=a==null?void 0:a.server.public_disk_driver)==null?void 0:l.endsWith("s3"));return e.jsxs(d.Fragment,{children:[e.jsx(q,{className:"mt-30",invalid:s,name:"client.uploads.s3_direct_upload",description:e.jsxs("div",{children:[e.jsx("p",{children:e.jsx(r,{message:"Upload files directly from the browser to s3 without going through the server. It will save on server bandwidth and should result in faster upload times. This should be enabled, unless storage provider does not support multipart uploads."})}),e.jsx("p",{className:"mt-10",children:e.jsx(r,{message:"If s3 provider is not configured to allow uploads from browser, this can be done automatically via CORS button below, when valid credentials are saved."})})]}),children:e.jsx(r,{message:"Direct upload"})}),e.jsx(v,{variant:"flat",color:"primary",size:"xs",className:"mt-20",onClick:()=>{t.mutate()},disabled:!n||t.isPending,children:e.jsx(r,{message:"Configure CORS"})})]})}function oc({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_ftp_host",label:e.jsx(r,{message:"FTP hostname"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_ftp_username",label:e.jsx(r,{message:"FTP username"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_ftp_password",label:e.jsx(r,{message:"FTP password"}),type:"password",required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_ftp_root",label:e.jsx(r,{message:"FTP directory"}),placeholder:"/"}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.storage_ftp_port",label:e.jsx(r,{message:"FTP port"}),type:"number",min:0,placeholder:"21"}),e.jsx(q,{invalid:s,name:"server.storage_ftp_passive",className:"mb-30",children:e.jsx(r,{message:"Passive"})}),e.jsx(q,{invalid:s,name:"server.storage_ftp_ssl",children:e.jsx(r,{message:"SSL"})})]})}function cc({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(g,{invalid:s,className:"mb-30",name:"server.mailgun_domain",label:e.jsx(r,{message:"Mailgun domain"}),description:e.jsx(r,{message:"Usually the domain of your site (site.com)"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.mailgun_secret",label:e.jsx(r,{message:"Mailgun API key"}),description:e.jsx(r,{message:"Should start with `key-`"}),required:!0}),e.jsx(g,{invalid:s,name:"server.mailgun_endpoint",label:e.jsx(r,{message:"Mailgun endpoint"}),description:e.jsx(r,{message:"Can be left empty, if your mailgun account is in the US region."}),placeholder:"api.eu.mailgun.net"})]})}function dc({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(g,{invalid:s,className:"mb-30",name:"server.mail_host",label:e.jsx(r,{message:"SMTP host"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.mail_username",label:e.jsx(r,{message:"SMTP username"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",type:"password",name:"server.mail_password",label:e.jsx(r,{message:"SMTP password"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",type:"number",name:"server.mail_port",label:e.jsx(r,{message:"SMTP port"})}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.mail_encryption",label:e.jsx(r,{message:"SMTP encryption"})})]})}function uc({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(g,{invalid:s,className:"mb-30",name:"server.ses_key",label:e.jsx(r,{message:"SES key"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.ses_secret",label:e.jsx(r,{message:"SES secret"}),required:!0}),e.jsx(g,{invalid:s,name:"server.ses_region",label:e.jsx(r,{message:"SES region"}),placeholder:"us-east-1",required:!0})]})}function mc({isInvalid:s}){return e.jsx(g,{invalid:s,name:"server.postmark_token",label:e.jsx(r,{message:"Postmark token"}),required:!0})}const Mt=z([e.jsx("path",{fill:"#4caf50",d:"M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"},"0"),e.jsx("path",{fill:"#1e88e5",d:"M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"},"1"),e.jsx("polygon",{fill:"#e53935",points:"35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"},"2"),e.jsx("path",{fill:"#c62828",d:"M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"},"3"),e.jsx("path",{fill:"#fbc02d",d:"M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"},"4")],"Gmail","0 0 48 48");function xc(){const{watch:s,setValue:t}=F(),{connectSocial:a}=Hn(),n=s("server.connectedGmailAccount"),i=async()=>{const c=await a("secure/settings/mail/gmail/connect");if((c==null?void 0:c.status)==="SUCCESS"){const u=c.callbackData.profile.email;t("server.connectedGmailAccount",u),V(x("Connected gmail account: :email",{values:{email:u}}))}},l=e.jsx(v,{variant:"outline",color:"primary",startIcon:e.jsx(Mt,{}),onClick:()=>{i()},children:e.jsx(r,{message:"Connect gmail account"})}),o=e.jsxs("div",{className:"flex items-center gap-14 rounded border bg-alt px-14 py-6 text-sm",children:[e.jsx(Mt,{size:"lg"}),n,e.jsx(v,{variant:"text",color:"primary",className:"ml-auto",onClick:()=>{i()},children:e.jsx(r,{message:"Reconnect"})})]});return e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(r,{message:"Gmail account"})}),n?o:l]})}function hc(){const{watch:s,clearErrors:t}=F(),a=s("server.mail_driver"),n=[];return a==="mailgun"&&n.push(cc),a==="smtp"&&n.push(dc),a==="ses"&&n.push(uc),a==="postmark"&&n.push(mc),a==="gmailApi"&&n.push(xc),e.jsx(ye,{separatorTop:!1,separatorBottom:!1,name:"mail_group",children:i=>e.jsxs(d.Fragment,{children:[e.jsxs(G,{onSelectionChange:()=>{t()},invalid:i,selectionMode:"single",name:"server.mail_driver",label:e.jsx(r,{message:"Outgoing mail method"}),description:e.jsxs("div",{children:[e.jsx(r,{message:"Which method should be used for sending outgoing application emails (like registration confirmation)"}),e.jsx(Ms,{className:"mt-8",link:"https://support.vebto.com/help-center/articles/42/44/155/incoming-emails"})]}),children:[e.jsx(p,{value:"mailgun",children:"Mailgun"}),e.jsx(p,{value:"gmailApi",children:"Gmail Api"}),e.jsx(p,{value:"smtp",children:"SMTP"}),e.jsx(p,{value:"postmark",children:"Postmark"}),e.jsx(p,{value:"ses",children:"Ses (Amazon Simple Email Service)"}),e.jsx(p,{value:"sendmail",children:"SendMail"}),e.jsx(p,{value:"log",children:"Log (Email will be saved to error log)"})]}),n.length?e.jsx("div",{className:"mt-30",children:n.map((l,o)=>e.jsx(l,{isInvalid:i},o))}):null]})})}function gc(){return e.jsxs(me,{title:e.jsx(r,{message:"Outgoing email settings"}),description:e.jsx(r,{message:"Change outgoing email handlers, email credentials and other related settings."}),children:[e.jsx(g,{id:"outgoing-emails",className:"mb-30",type:"email",name:"server.mail_from_address",label:e.jsx(r,{message:"From address"}),description:e.jsx(r,{message:"All outgoing application emails will be sent from this email address."}),required:!0}),e.jsx(pc,{}),e.jsx(g,{className:"mb-30",name:"server.mail_from_name",label:e.jsx(r,{message:"From name"}),description:e.jsx(r,{message:"All outgoing application emails will be sent using this name."}),required:!0}),e.jsx(Te,{color:"warning",description:e.jsx(r,{message:"Your selected mail method must be authorized to send emails using this address and name."})}),e.jsx(ls,{}),e.jsx(hc,{})]})}function pc(){const{base_url:s}=fe(),t=`${s}/contact`,a=e.jsx(Jt,{href:t,children:t});return e.jsx(g,{className:"mb-30",type:"email",name:"client.mail.contact_page_address",label:e.jsx(r,{message:"Contact page address"}),description:e.jsx(r,{values:{contactPageUrl:a},message:"Where emails from :contactPageUrl page should be sent to."})})}function jc(){return $.post("cache/flush").then(s=>s.data)}function fc(){return R({mutationFn:()=>jc(),onSuccess:()=>{V(x("Cache cleared"))},onError:s=>re(s)})}function bc(){const s=fc();return e.jsxs(me,{title:e.jsx(r,{message:"Cache settings"}),description:e.jsx(r,{message:"Select cache provider and manually clear cache."}),children:[e.jsx(vc,{}),e.jsx(v,{type:"button",variant:"outline",size:"xs",color:"primary",disabled:s.isPending,onClick:()=>{s.mutate()},children:e.jsx(r,{message:"Clear cache"})}),e.jsx(Te,{color:"warning",className:"mt-30",description:e.jsx(r,{message:'"File" is the best option for most cases and should not be changed, unless you are familiar with another cache method and have it set up on the server already.'})})]})}function vc(){const{watch:s,clearErrors:t}=F(),a=s("server.cache_driver");let n=null;return a==="memcached"&&(n=yc),e.jsx(ye,{separatorTop:!1,name:"cache_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsxs(G,{invalid:i,onSelectionChange:()=>{t()},selectionMode:"single",name:"server.cache_driver",label:e.jsx(r,{message:"Cache method"}),description:e.jsx(r,{message:"Which method should be used for storing and retrieving cached items."}),children:[e.jsx(p,{value:"file",children:e.jsx(r,{message:"File (Default)"})}),e.jsx(p,{value:"array",children:e.jsx(r,{message:"None"})})]}),n&&e.jsx("div",{className:"mt-30",children:e.jsx(n,{isInvalid:i})})]})})}function yc({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(g,{invalid:s,className:"mb-30",name:"server.memcached_host",label:e.jsx(r,{message:"Memcached host"}),required:!0}),e.jsx(g,{invalid:s,type:"number",name:"server.memcached_port",label:e.jsx(r,{message:"Memcached port"}),required:!0})]})}function wc(){return e.jsxs(me,{title:e.jsx(r,{message:"Error logging"}),description:e.jsx(r,{message:"Configure site error logging and related 3rd party integrations."}),children:[e.jsx(Sc,{}),e.jsx(Te,{className:"mt-30",color:"positive",description:e.jsx(r,{values:{a:s=>e.jsx(Jt,{href:"https://sentry.io",children:s})},message:"<a>Sentry</a> integration provides real-time error tracking and helps identify and fix issues when site is in production."})})]})}function Sc(){const{clearErrors:s}=F();return e.jsx(ye,{separatorTop:!1,separatorBottom:!1,name:"logging_group",children:t=>e.jsx(g,{onChange:()=>{s()},invalid:t,name:"server.sentry_dsn",type:"url",minLength:30,label:e.jsx(r,{message:"Sentry DSN"})})})}function kc(){return e.jsxs(me,{title:e.jsx(r,{message:"Queue"}),description:e.jsx(r,{message:"Select active queue method and enter related 3rd party API keys."}),children:[e.jsx(Te,{color:"positive",className:"mb-30",description:e.jsx(r,{message:"Queues allow to defer time consuming tasks, such as sending an email, until a later time. Deferring these tasks can speed up web requests to the application."})}),e.jsx(Te,{color:"warning",className:"mb-30",description:e.jsx(r,{message:"All methods except sync require additional setup, which should be performed before changing the queue method. Consult documentation for more information."})}),e.jsx(Nc,{})]})}function Nc(){const{watch:s,clearErrors:t}=F(),a=s("server.queue_driver");let n=null;return a==="sqs"&&(n=Cc),e.jsx(ye,{separatorTop:!1,separatorBottom:!1,name:"queue_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsxs(G,{invalid:i,onSelectionChange:()=>{t()},selectionMode:"single",name:"server.queue_driver",label:e.jsx(r,{message:"Queue method"}),required:!0,children:[e.jsx(p,{value:"sync",children:e.jsx(r,{message:"Sync (Default)"})}),e.jsx(p,{value:"beanstalkd",children:"Beanstalkd"}),e.jsx(p,{value:"database",children:e.jsx(r,{message:"Database"})}),e.jsx(p,{value:"sqs",children:e.jsx(r,{message:"SQS (Amazon simple queue service)"})}),e.jsx(p,{value:"redis",children:"Redis"})]}),n&&e.jsx("div",{className:"mt-30",children:e.jsx(n,{isInvalid:i})})]})})}function Cc({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(g,{invalid:s,className:"mb-30",name:"server.sqs_queue_key",label:e.jsx(r,{message:"SQS queue key"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.sqs_queue_secret",label:e.jsx(r,{message:"SQS queue secret"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.sqs_queue_prefix",label:e.jsx(r,{message:"SQS queue prefix"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.sqs_queue_name",label:e.jsx(r,{message:"SQS queue name"}),required:!0}),e.jsx(g,{invalid:s,className:"mb-30",name:"server.sqs_queue_region",label:e.jsx(r,{message:"SQS queue region"}),required:!0})]})}function _c(){const{settings:s}=d.useContext(Qe);return e.jsxs(me,{title:e.jsx(r,{message:"Recaptcha"}),description:e.jsx(r,{message:"Configure google recaptcha integration and credentials."}),children:[(s==null?void 0:s.showRecaptchaLinkSwitch)&&e.jsx(q,{className:"mb-30",name:"client.recaptcha.enable.link_creation",description:e.jsx(r,{message:"Enable recaptcha integration when creating links from homepage or user dashboard."}),children:e.jsx(r,{message:"Link creation"})}),e.jsx(q,{className:"mb-30",name:"client.recaptcha.enable.contact",description:e.jsx(r,{message:'Enable recaptcha integration for "contact us" page.'}),children:e.jsx(r,{message:"Contact page"})}),e.jsx(q,{className:"mb-30",name:"client.recaptcha.enable.register",description:e.jsx(r,{message:"Enable recaptcha integration for registration page."}),children:e.jsx(r,{message:"Registration page"})}),e.jsx(Fc,{})]})}function Fc(){const{clearErrors:s}=F();return e.jsx(ye,{separatorTop:!1,separatorBottom:!1,name:"recaptcha_group",children:t=>e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"mb-30",onChange:()=>{s()},invalid:t,name:"client.recaptcha.site_key",label:e.jsx(r,{message:"Recaptcha v3 site key"})}),e.jsx(g,{onChange:()=>{s()},invalid:t,name:"client.recaptcha.secret_key",label:e.jsx(r,{message:"Recaptcha v3 secret key"})})]})})}const zc=I.forwardRef((s,t)=>{const a=Wn(t),{fieldProps:n,inputProps:i}=Kn({...s,focusRef:a}),l=Wt(s);return e.jsx(Gn,{ref:t,fieldClassNames:l,...n,children:e.jsx("input",{type:"file",ref:a,...i,className:y(l.input,"py-8","file:bg-primary file:text-on-primary file:border-none file:rounded file:text-sm file:font-semibold file:px-10 file:h-24 file:mr-10")})})});function Ac({name:s,...t}){const{field:{onChange:a,onBlur:n,ref:i},fieldState:{invalid:l,error:o}}=ds({name:s}),[c,u]=I.useState(""),m={onChange:h=>{var j;a((j=h.target.files)==null?void 0:j[0]),u(h.target.value)},onBlur:n,value:c,invalid:l,errorMessage:o==null?void 0:o.message};return e.jsx(zc,{ref:i,...cs(m,t)})}function Ic(){return e.jsx(me,{title:e.jsx(r,{message:"Analytics"}),description:e.jsx(r,{message:"Configure google analytics integration and credentials."}),children:e.jsx(Pc,{})})}function Pc(){const{clearErrors:s}=F();return e.jsx(ye,{separatorTop:!1,separatorBottom:!1,name:"analytics_group",children:t=>e.jsxs(d.Fragment,{children:[e.jsx(Ac,{className:"mb-30",onChange:()=>{s()},invalid:t,name:"files.certificate",accept:".json",label:e.jsx(r,{message:"Google service account key file (.json)"})}),e.jsx(g,{className:"mb-30",onChange:()=>{s()},invalid:t,name:"server.analytics_property_id",type:"number",label:e.jsx(r,{message:"Google analytics property ID"})}),e.jsx(g,{className:"mb-30",onChange:()=>{s()},invalid:t,name:"client.analytics.tracking_code",placeholder:"G-******",min:"1",max:"20",description:e.jsx(r,{message:"Google analytics measurement ID only, not the whole javascript snippet."}),label:e.jsx(r,{message:"Google tag manager measurement ID"})}),e.jsx(g,{name:"client.analytics.gchart_api_key",label:e.jsx(r,{message:"Google maps javascript API key"}),description:e.jsx(r,{message:"Only required in order to show world geochart on integrated analytics pages."})})]})})}function Ec(s){const t=ce();return R({mutationFn:a=>$c(a),onSuccess:(a,n)=>{V(x("User updated")),T.invalidateQueries({queryKey:["users"]}),t("/admin/users")},onError:a=>he(a,s)})}function $c({id:s,...t}){return t.roles&&(t.roles=t.roles.map(a=>a.id)),$.put(`users/${s}`,t).then(a=>a.data)}function on(){const[s,t]=d.useState(!1),a=d.useRef(),n=d.useCallback(i=>{var l;if(i){const o=new IntersectionObserver(([c])=>t(c.intersectionRatio<1),{threshold:[1]});a.current=o,o.observe(i)}else a.current&&((l=a.current)==null||l.disconnect())},[]);return{isSticky:s,sentinelRef:n}}function bs({onSubmit:s,form:t,title:a,subTitle:n,children:i,actions:l,backButton:o,isLoading:c=!1,disableSaveWhenNotDirty:u=!1,wrapInContainer:m=!0}){const{isSticky:h,sentinelRef:j}=on(),b=u?Object.keys(t.formState.dirtyFields).length:!0;return e.jsxs(ne,{onSubmit:s,onBeforeSubmit:()=>t.clearErrors(),form:t,children:[e.jsx("div",{ref:j}),e.jsx("div",{className:y("sticky top-0 z-10 my-12 transition-shadow md:my-24",h&&"bg-paper shadow"),children:e.jsxs("div",{className:y("flex items-center gap-24 py-14 md:items-start",m&&"container mx-auto px-24"),children:[o,e.jsxs("div",{className:"overflow-hidden overflow-ellipsis md:mr-64",children:[e.jsx("h1",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap text-xl md:text-3xl",children:a}),n&&e.jsx("div",{className:"mt-4",children:n})]}),e.jsx("div",{className:"mr-auto"}),l,e.jsx(v,{variant:"flat",color:"primary",type:"submit",disabled:c||!b,children:e.jsx(r,{message:"Save"})})]})}),e.jsx("div",{className:m?"container mx-auto px-24 pb-24":void 0,children:e.jsx("div",{className:"rounded",children:i})})]})}function cn({onSubmit:s,form:t,title:a,subTitle:n,isLoading:i,avatarManager:l,resendEmailButton:o,children:c}){const{require_email_confirmation:u}=fe(),{data:m}=ve(["roles","permissions"]);return e.jsxs(bs,{onSubmit:s,form:t,title:a,subTitle:n,isLoading:i,children:[e.jsxs("div",{className:"mb-40 flex items-start gap-40 md:gap-80",children:[l,e.jsxs("div",{className:"flex-auto",children:[c,e.jsx(g,{className:"mb-30",name:"first_name",label:e.jsx(r,{message:"First name"})}),e.jsx(g,{name:"last_name",label:e.jsx(r,{message:"Last name"})})]})]}),e.jsxs("div",{className:"mb-30 border-b border-t pb-30 pt-30",children:[e.jsx(q,{className:y(o&&"mb-30"),disabled:!u,name:"email_verified_at",description:e.jsx(r,{message:"Whether email address has been confirmed. User will not be able to login until address is confirmed, unless confirmation is disabled from settings page."}),children:e.jsx(r,{message:"Email confirmed"})}),o]}),e.jsx(as,{className:"mb-30",name:"available_space",label:e.jsx(r,{message:"Allowed storage space"}),description:e.jsx(r,{values:{a:h=>e.jsx(W,{className:lt,target:"_blank",to:"/admin/settings/uploading",children:h})},message:"Total storage space all user uploads are allowed to take up. If left empty, this value will be inherited from any roles or subscriptions user has, or from 'Available space' setting in <a>Uploading</a> settings page."})}),e.jsx(Ps,{className:"mb-30",name:"roles",label:e.jsx(r,{message:"Roles"}),suggestions:m==null?void 0:m.roles,children:h=>e.jsx(p,{value:h.id,children:h.name},h.id)}),e.jsxs("div",{className:"mt-30 border-t pt-30",children:[e.jsx("div",{className:"mb-10 text-sm",children:e.jsx(r,{message:"Permissions"})}),e.jsx(mt,{name:"permissions"})]})]})}const Mc=z([e.jsx("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM19 14.9 14.9 19H9.1L5 14.9V9.1L9.1 5h5.8L19 9.1v5.8z"},"0"),e.jsx("circle",{cx:"12",cy:"16",r:"1"},"1"),e.jsx("path",{d:"M11 7h2v7h-2z"},"2")],"ReportOutlined");function Lc(){var m,h,j;const s=O(),{require_email_confirmation:t}=fe(),{userId:a}=ie(),n=Ec(s),i=Qn(),{data:l,isLoading:o}=Jn(a,{with:["subscriptions","roles","permissions","bans"]}),c=(h=(m=l==null?void 0:l.user.bans)==null?void 0:m[0])==null?void 0:h.comment;if(d.useEffect(()=>{l!=null&&l.user&&!s.getValues().id&&s.reset({first_name:l.user.first_name,last_name:l.user.last_name,roles:l.user.roles,permissions:l.user.permissions,id:l.user.id,email_verified_at:!!l.user.email_verified_at,available_space:l.user.available_space,avatar:l.user.avatar})},[l==null?void 0:l.user,s]),o)return e.jsx(Ve,{});const u=e.jsx(v,{size:"xs",variant:"outline",color:"primary",disabled:!t||i.isPending||((j=l==null?void 0:l.user)==null?void 0:j.email_verified_at)!=null,onClick:()=>{i.mutate({email:l.user.email})},children:e.jsx(r,{message:"Resend email"})});return e.jsx(cn,{onSubmit:b=>{n.mutate(b)},form:s,title:e.jsx(r,{values:{email:l==null?void 0:l.user.email},message:"Edit “:email“"}),subTitle:c&&e.jsxs("div",{className:"flex items-center gap-4 text-sm text-danger",children:[e.jsx(Mc,{}),e.jsx("div",{children:e.jsx(r,{message:"Suspended: :reason",values:{reason:c}})})]}),isLoading:n.isPending,avatarManager:e.jsx(Tc,{user:l.user,onChange:()=>{T.invalidateQueries({queryKey:["users"]})}}),resendEmailButton:u,children:e.jsx(g,{className:"mb-30",name:"password",type:"password",label:e.jsx(r,{message:"New password"})})})}function Tc({user:s,onChange:t}){const a=Yn({user:s}),n=Zn({user:s});return e.jsx(os,{children:e.jsx(rt,{name:"avatar",diskPrefix:"avatars",variant:"avatar",stretchPreview:!0,label:e.jsx(r,{message:"Profile image"}),previewSize:"w-90 h-90",showRemoveButton:!0,onChange:i=>{i?a.mutate({url:i}):n.mutate(),t()}})})}function Dc(s){const t=ce();return R({mutationFn:a=>Rc(a),onSuccess:()=>{V(x("User created")),T.invalidateQueries({queryKey:Z("users")}),t("/admin/users")},onError:a=>he(a,s)})}function Rc(s){return s.roles&&(s.roles=s.roles.map(t=>t.id)),$.post("users",s).then(t=>t.data)}function Vc(){const s=O(),t=Dc(s),a=e.jsx(os,{children:e.jsx(rt,{name:"avatar",diskPrefix:"avatars",variant:"avatar",stretchPreview:!0,label:e.jsx(r,{message:"Profile image"}),previewSize:"w-90 h-90",showRemoveButton:!0})});return e.jsxs(cn,{onSubmit:n=>{t.mutate(n)},form:s,title:e.jsx(r,{message:"Add new user"}),isLoading:t.isPending,avatarManager:a,children:[e.jsx(g,{className:"mb-30",name:"email",type:"email",label:e.jsx(r,{message:"Email"})}),e.jsx(g,{className:"mb-30",name:"password",type:"password",label:e.jsx(r,{message:"Password"})})]})}const qc=z(e.jsx("path",{d:"m12.87 15.07-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7 1.62-4.33L19.12 17h-3.24z"}),"TranslateOutlined"),dn=s=>{const t=["getLocaleWithLines"];return s!=null&&t.push(s),t};function Oc(s){return De({queryKey:dn(s),queryFn:()=>Bc(s),staleTime:1/0})}function Bc(s){return $.get(`localizations/${s}`).then(t=>t.data)}function Uc({id:s,...t}){return $.put(`localizations/${s}`,t).then(a=>a.data)}function un(s){return R({mutationFn:t=>Uc(t),onSuccess:()=>{V(x("Localization updated")),T.invalidateQueries({queryKey:Z("localizations")}),T.invalidateQueries({queryKey:dn()})},onError:t=>s?he(t,s):re(t)})}function Hc({localization:s}){const{trans:t}=D(),{formId:a,close:n}=U(),i=O({defaultValues:{id:s.id,name:s.name,language:s.language}}),{data:l}=ve(["languages"]),o=(l==null?void 0:l.languages)||[],c=un(i);return e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Update localization"})}),e.jsx(X,{children:e.jsxs(ne,{form:i,id:a,onSubmit:u=>{c.mutate(u,{onSuccess:n})},children:[e.jsx(g,{name:"name",label:e.jsx(r,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(G,{required:!0,name:"language",label:e.jsx(r,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:t(x("Search languages")),children:o.map(u=>e.jsx(p,{value:u.code,children:u.name},u.code))})]})}),e.jsxs(de,{children:[e.jsx(v,{onClick:n,children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{variant:"flat",color:"primary",type:"submit",form:a,disabled:c.isPending,children:e.jsx(r,{message:"Save"})})]})]})}function Wc(s){return $.post("localizations",s).then(t=>t.data)}function Kc(s){const t=Xn();return R({mutationFn:a=>Wc(a),onSuccess:()=>{V(x("Localization created")),t.invalidateQueries({queryKey:Z("localizations")})},onError:a=>he(a,s)})}function Gc(){const{trans:s}=D(),{formId:t,close:a}=U(),n=O({defaultValues:{language:"en"}}),{data:i}=ve(["languages"]),l=(i==null?void 0:i.languages)||[],o=Kc(n);return e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Create localization"})}),e.jsx(X,{children:e.jsxs(ne,{form:n,id:t,onSubmit:c=>{o.mutate(c,{onSuccess:a})},children:[e.jsx(g,{autoFocus:!0,name:"name",label:e.jsx(r,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(G,{required:!0,name:"language",label:e.jsx(r,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:s(x("Search languages")),children:l.map(c=>e.jsx(p,{value:c.code,children:c.name},c.code))})]})}),e.jsxs(de,{children:[e.jsx(v,{onClick:a,children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{variant:"flat",color:"primary",type:"submit",form:t,disabled:o.isPending,children:e.jsx(r,{message:"Save"})})]})]})}const Qc=""+new URL("around-the-world-06866e90.svg",import.meta.url).href,Jc=[{key:"name",allowsSorting:!0,sortingKey:"name",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(r,{message:"Name"}),body:s=>s.name},{key:"language",allowsSorting:!0,sortingKey:"language",header:()=>e.jsx(r,{message:"Language code"}),body:s=>s.language},{key:"updatedAt",allowsSorting:!0,width:"w-100",header:()=>e.jsx(r,{message:"Last updated"}),body:s=>e.jsx(ue,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(r,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(W,{to:`${s.id}/translate`,children:e.jsx(H,{label:e.jsx(r,{message:"Translate"}),children:e.jsx(k,{size:"md",children:e.jsx(qc,{})})})}),e.jsxs(P,{type:"modal",children:[e.jsx(H,{label:e.jsx(r,{message:"Edit"}),children:e.jsx(k,{children:e.jsx(Ne,{})})}),e.jsx(Hc,{localization:s})]})]})}];function Yc(){return e.jsx(Pe,{endpoint:"localizations",title:e.jsx(r,{message:"Localizations"}),columns:Jc,actions:e.jsx(Zc,{}),selectedActions:e.jsx(qe,{}),emptyStateMessage:e.jsx(je,{image:Qc,title:e.jsx(r,{message:"No localizations have been created yet"}),filteringTitle:e.jsx(r,{message:"No matching localizations"})})})}function Zc(){return e.jsx(d.Fragment,{children:e.jsxs(P,{type:"modal",children:[e.jsx(Oe,{children:e.jsx(r,{message:"Add new localization"})}),e.jsx(Gc,{})]})})}function Xc(){const{formId:s,close:t}=U(),a=O();return e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Add translation"})}),e.jsx(X,{children:e.jsxs(ne,{form:a,id:s,onSubmit:n=>{t(n)},children:[e.jsx(Te,{className:"mb-30",title:e.jsx(r,{message:"Add a new translation, if it does not exist already."}),description:e.jsx(r,{message:"This should only need to be done for things like custom menu items."})}),e.jsx(g,{inputElementType:"textarea",rows:2,autoFocus:!0,name:"key",label:e.jsx(r,{message:"Translation key"}),className:"mb-30",required:!0}),e.jsx(g,{inputElementType:"textarea",rows:2,name:"value",label:e.jsx(r,{message:"Translation value"}),required:!0})]})}),e.jsxs(de,{children:[e.jsx(v,{onClick:t,children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{variant:"flat",color:"primary",type:"submit",form:s,children:e.jsx(r,{message:"Add"})})]})]})}function ed(){const{localeId:s}=ie(),{data:t,isLoading:a}=Oc(s),n=t==null?void 0:t.localization;return a||!n?e.jsx(Ve,{}):e.jsx(sd,{localization:n})}function sd({localization:s}){const[t,a]=d.useState(s.lines||{}),n=ce(),i=un(),[l,o]=d.useState("");return e.jsxs("form",{className:"p-14 md:p-24 flex flex-col h-full",onSubmit:c=>{c.preventDefault(),i.mutate({id:s.id,lines:t},{onSuccess:()=>{n("/admin/localizations")}})},children:[e.jsx(td,{localization:s,setLines:a,lines:t,searchQuery:l,setSearchQuery:o,isLoading:i.isPending}),e.jsx(ad,{lines:t,setLines:a,searchQuery:l})]})}function td({localization:s,searchQuery:t,setSearchQuery:a,isLoading:n,lines:i,setLines:l}){const o=ce(),c=be(),{trans:u}=D();return e.jsxs("div",{className:"flex-shrink-0",children:[e.jsxs(Hr,{size:"lg",className:"mb-16",children:[e.jsx(wt,{onSelected:()=>{o("/admin/localizations")},children:e.jsx(r,{message:"Localizations"})}),e.jsx(wt,{children:e.jsx(r,{message:":locale translations",values:{locale:s.name}})})]}),e.jsxs("div",{className:"mb-24 flex items-center gap-32 md:gap-12",children:[e.jsx("div",{className:"max-w-440 flex-auto",children:e.jsx(Ae,{value:t,onChange:m=>a(m.target.value),startAdornment:e.jsx(Ns,{}),placeholder:u({message:"Type to search..."})})}),e.jsxs(P,{type:"modal",onClose:m=>{if(m){const h={...i};h[m.key]=m.value,l(h)}},children:[!c&&e.jsx(v,{className:"ml-auto",variant:"outline",color:"primary",startIcon:e.jsx(pe,{}),children:e.jsx(r,{message:"Add new"})}),e.jsx(Xc,{})]}),e.jsx(v,{variant:"flat",color:"primary",type:"submit",disabled:n,children:c?e.jsx(r,{message:"Save"}):e.jsx(r,{message:"Save translations"})})]})]})}function ad({searchQuery:s,lines:t,setLines:a}){const n=d.useMemo(()=>Object.entries(t).filter(([o,c])=>{const u=s==null?void 0:s.toLowerCase();return!u||(o==null?void 0:o.toLowerCase().includes(u))||(c==null?void 0:c.toLowerCase().includes(u))}),[t,s]),i=d.useRef(null),l=Tr({count:n.length,getScrollElement:()=>i.current,estimateSize:()=>123});return e.jsx("div",{className:"flex-auto overflow-y-auto",ref:i,children:e.jsx("div",{className:"relative w-full",style:{height:`${l.getTotalSize()}px`},children:l.getVirtualItems().map(o=>{const[c,u]=n[o.index];return e.jsx("div",{className:"w-full absolute top-0 left-0",style:{height:`${o.size}px`,transform:`translateY(${o.start}px)`},children:e.jsxs("div",{className:"rounded border mb-10 md:mr-10",children:[e.jsxs("div",{className:"flex items-center gap-24 justify-between px-10 py-2 border-b",children:[e.jsx("label",{className:"text-xs font-semibold flex-auto",htmlFor:c,children:c}),e.jsx(k,{size:"xs",className:"text-muted",onClick:()=>{const m={...t};delete m[c],a(m)},children:e.jsx(Ie,{})})]}),e.jsx("div",{children:e.jsx("textarea",{id:c,name:c,defaultValue:u,className:"w-full bg-inherit block rounded resize-none outline-none focus-visible:ring-2 p-10 text-sm",rows:2,onChange:m=>{const h={...t};h[c]=m.target.value,a(h)}})})]})},c)})})})}function nd(s){const{close:t}=U(),{image:a,images:n}=s,[i,l]=ks(s.activeIndex,s.defaultActiveIndex,s.onActiveIndexChange),o=a||(n==null?void 0:n[i]);return e.jsx(Q,{size:"fullscreenTakeover",background:"bg-black/80",children:e.jsxs(X,{padding:"p-0",className:"h-full w-full",children:[e.jsx(k,{size:"lg",color:"paper",className:"absolute right-0 top-0 z-20 text-white",onClick:()=>{t()},children:e.jsx(Ie,{})}),e.jsxs("div",{className:"relative flex h-full w-full items-center justify-center p-40",children:[n!=null&&n.length?e.jsx(k,{size:"lg",color:"white",variant:"flat",className:"absolute bottom-0 left-20 top-0 my-auto",disabled:i<1,onClick:()=>{l(i-1)},children:e.jsx(Is,{})}):null,e.jsx("img",{src:o,alt:"",className:"max-h-full w-auto object-contain shadow"}),n!=null&&n.length?e.jsx(k,{size:"lg",color:"white",variant:"flat",className:"absolute bottom-0 right-20 top-0 my-auto",disabled:i+1===(n==null?void 0:n.length),onClick:()=>{l(i+1)},children:e.jsx(gs,{})}):null]})]})})}function rd(){var t;const s=js();return e.jsxs("div",{className:"container mx-auto p-12 md:p-24",children:[e.jsx(Cs,{children:e.jsx(r,{message:"Ads"})}),e.jsx("h1",{className:"mb-20 text-2xl font-light md:mb-40 md:text-3xl",children:e.jsx(r,{message:"Predefined Ad slots"})}),s.isLoading?e.jsx(zs,{isIndeterminate:!0}):e.jsx(id,{defaultValues:((t=s.data)==null?void 0:t.client.ads)||{}})]})}function id({defaultValues:s}){const{admin:{ads:t}}=d.useContext(Qe),a=O({defaultValues:{client:{ads:s}}}),n=pa(a);return e.jsxs(ne,{form:a,onSubmit:i=>{n.mutate(i)},children:[t.map(i=>e.jsx(ld,{adConfig:i},i.slot)),e.jsx(q,{name:"client.ads.disable",className:"mb-30",description:e.jsx(r,{message:"Disable all add related functionality across the site."}),children:e.jsx(r,{message:"Disable ads"})}),e.jsx(v,{type:"submit",variant:"flat",color:"primary",disabled:n.isPending,children:e.jsx(r,{message:"Save"})})]})}function ld({adConfig:s}){return e.jsxs("div",{className:"flex items-center gap-24",children:[e.jsx(g,{className:"mb-30 flex-auto",name:`client.${s.slot}`,inputElementType:"textarea",rows:8,label:e.jsx(r,{...s.description})}),e.jsxs(P,{type:"modal",children:[e.jsx("button",{type:"button",className:"cursor-zoom-in overflow-hidden rounded outline-none transition hover:scale-105 focus-visible:ring max-md:hidden",children:e.jsx("img",{src:s.image,className:"h-[186px] w-auto border",alt:"Ad slot example"})}),e.jsx(nd,{image:s.image})]})]})}function od(){const s=$s(a=>{var n;return(n=a.config)==null?void 0:n.sections}),t=d.useMemo(()=>s?Object.entries(s||[]).map(([a,n])=>({...n,key:a})).sort((a,n)=>((a==null?void 0:a.position)||1)-((n==null?void 0:n.position)||1)):[],[s]);return e.jsx(d.Fragment,{children:t.map(a=>e.jsx(Se,{to:a.key,elementType:it,children:e.jsx(r,{...a.label})},a.key))})}const cd=[{key:"type",label:x("Type"),description:x("Type of the role"),defaultOperator:ae.ne,control:{type:oe.Select,defaultValue:"01",options:[{key:"01",label:x("Sitewide"),value:"sitewide"},{key:"02",label:x("Workspace"),value:"workspace"}]}},ms({description:x("Date role was created")}),xs({description:x("Date role was last updated")})],dd=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(r,{message:"Role"}),body:s=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(r,{message:s.name})}),e.jsx("div",{className:"text-muted text-xs overflow-x-hidden overflow-ellipsis",children:s.description?e.jsx(r,{message:s.description}):void 0})]})},{key:"type",maxWidth:"max-w-100",allowsSorting:!0,header:()=>e.jsx(r,{message:"Type"}),body:s=>e.jsx(r,{message:s.type})},{key:"updated_at",maxWidth:"max-w-100",allowsSorting:!0,header:()=>e.jsx(r,{message:"Last updated"}),body:s=>e.jsx(ue,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(r,{message:"Actions"}),hideHeader:!0,visibleInMode:"all",align:"end",width:"w-42 flex-shrink-0",body:s=>e.jsx(W,{to:`${s.id}/edit`,children:e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(Ne,{})})})}];function ud(){return e.jsx(Pe,{endpoint:"roles",title:e.jsx(r,{message:"Roles"}),columns:dd,filters:cd,actions:e.jsx(md,{}),selectedActions:e.jsx(qe,{}),emptyStateMessage:e.jsx(je,{image:ns,title:e.jsx(r,{message:"No roles have been created yet"}),filteringTitle:e.jsx(r,{message:"No matching roles"})})})}function md(){return e.jsxs(d.Fragment,{children:[e.jsx(ra,{endpoint:"roles/csv/export"}),e.jsx(Oe,{elementType:W,to:"new",children:e.jsx(r,{message:"Add new role"})})]})}const mn=s=>`roles/${s}`;function xd(){const{roleId:s}=ie();return De({queryKey:[mn(s)],queryFn:()=>hd(s)})}function hd(s){return $.get(mn(s)).then(t=>t.data)}const xn=s=>`roles/${s}`;function gd(){const{trans:s}=D(),t=ce();return R({mutationFn:a=>pd(a),onSuccess:a=>{V(s(x("Role updated"))),T.invalidateQueries({queryKey:[xn(a.role.id)]}),T.invalidateQueries({queryKey:Z("roles")}),t("/admin/roles")},onError:a=>re(a)})}function pd({id:s,...t}){return $.put(xn(s),t).then(a=>a.data)}function hn({isInternal:s=!1}){const{trans:t}=D(),{workspaces:a}=fe(),{watch:n}=F(),i=n("type");return e.jsxs(e.Fragment,{children:[e.jsx(g,{label:e.jsx(r,{message:"Name"}),name:"name",className:"mb-20",required:!0}),e.jsx(g,{label:e.jsx(r,{message:"Description"}),name:"description",inputElementType:"textarea",placeholder:t(x("Role description...")),rows:4,className:"mb-20"}),a.integrated&&e.jsxs(G,{label:e.jsx(r,{message:"Type"}),name:"type",selectionMode:"single",className:"mb-20",description:e.jsx(r,{message:"Whether this role will be assigned to users globally on the site or only within workspaces."}),children:[e.jsx(p,{value:"sitewide",children:e.jsx(r,{message:"Sitewide"})}),e.jsx(p,{value:"workspace",children:e.jsx(r,{message:"Workspace"})})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsx(q,{name:"default",className:"mb-20",description:e.jsx(r,{message:"Assign this role to new users automatically."}),children:e.jsx(r,{message:"Default"})}),i==="sitewide"&&e.jsx(q,{name:"guests",description:e.jsx(r,{message:"Assign this role to guests (not logged in users)."}),children:e.jsx(r,{message:"Guests"})})]}),e.jsx("h2",{className:"mb-10 mt-30 text-lg",children:e.jsx(r,{message:"Permissions"})}),e.jsx(mt,{name:"permissions",valueListKey:i==="sitewide"?"permissions":"workspacePermissions"})]})}function jd({onUserSelected:s}){var m;const{close:t}=U(),[a,n]=d.useState(""),{trans:i}=D(),l=Dr("normalized-models/user",{query:a,perPage:14}),o=((m=l.data)==null?void 0:m.results)||[],c=e.jsx(_s,{className:"pt-20",size:"sm",title:e.jsx(r,{message:"No matching users"}),description:e.jsx(r,{message:"Try another search query"}),image:e.jsx(Fs,{src:ns})}),u=h=>{t(),s(h)};return e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Select a user"})}),e.jsxs(X,{children:[e.jsx(Ae,{autoFocus:!0,className:"mb-20",startAdornment:e.jsx(Ns,{}),placeholder:i(x("Search for user by name or email")),value:a,onChange:h=>{n(h.target.value)}}),!l.isLoading&&!o.length&&c,e.jsx("div",{className:"grid grid-cols-2 gap-x-10",children:o.map(h=>e.jsx(fd,{user:h,onUserSelected:u},h.id))})]})]})}function fd({user:s,onUserSelected:t}){return e.jsxs("div",{className:"flex items-center gap-10 rounded p-10 outline-none ring-offset-4 hover:bg-hover focus-visible:ring",role:"button",tabIndex:0,onClick:()=>{t(s)},onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),t(s))},children:[e.jsx(Zt,{src:s.image}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("div",{className:"overflow-hidden text-ellipsis",children:s.name}),e.jsx("div",{className:"overflow-hidden text-ellipsis text-muted",children:s.description})]})]},s.id)}function bd(s){return R({mutationFn:({userIds:t})=>vd({userIds:t,roleId:s.id}),onSuccess:(t,a)=>{V(x("Removed [one 1 user|other :count users] from “{role}“",{values:{count:a.userIds.length,role:s.name}}))},onError:t=>re(t)})}function vd({roleId:s,userIds:t}){return $.post(`roles/${s}/remove-users`,{userIds:t}).then(a=>a.data)}function yd(s){return R({mutationFn:({userIds:t})=>wd({userIds:t,roleId:s.id}),onSuccess:(t,a)=>{V(x("Assigned [one 1 user|other :count users] to {role}",{values:{count:a.userIds.length,role:s.name}}))},onError:t=>re(t)})}function wd({roleId:s,userIds:t}){return $.post(`roles/${s}/add-users`,{userIds:t}).then(a=>a.data)}const gn={key:"name",allowsSorting:!0,sortingKey:"email",header:()=>e.jsx(r,{message:"User"}),body:s=>e.jsx(Ze,{image:s.avatar,label:s.display_name,description:s.email}),width:"col-w-3"},Sd=[gn,{key:"first_name",allowsSorting:!0,header:()=>e.jsx(r,{message:"First name"}),body:s=>s.first_name},{key:"last_name",allowsSorting:!0,header:()=>e.jsx(r,{message:"Last name"}),body:s=>s.last_name},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(r,{message:"Assigned at"}),body:s=>e.jsx(ue,{date:s.created_at})}],kd=[gn];function Nd({role:s}){const t=be();return s.guests||s.type==="workspace"?e.jsx("div",{className:"pt-30 pb-10",children:e.jsx(je,{image:ns,title:e.jsx(r,{message:"Users can't be assigned to this role"})})}):e.jsx(na,{endpoint:"users",columns:t?kd:Sd,queryParams:{roleId:`${s.id}`},actions:e.jsx(Cd,{role:s}),selectedActions:e.jsx(_d,{role:s}),emptyStateMessage:e.jsx(je,{image:ns,title:e.jsx(r,{message:"No users have been assigned to this role yet"}),filteringTitle:e.jsx(r,{message:"No matching users"})})})}function Cd({role:s}){const t=yd(s);return e.jsxs(P,{type:"modal",children:[e.jsx(v,{variant:"flat",color:"primary",disabled:t.isPending,children:e.jsx(r,{message:"Assign user"})}),e.jsx(jd,{onUserSelected:a=>{t.mutate({userIds:[a.id]},{onSuccess:()=>{T.invalidateQueries({queryKey:Z("users",{roleId:`${s.id}`})})}})}})]})}function _d({role:s}){const t=bd(s),{selectedRows:a}=ut();return e.jsxs(P,{type:"modal",onClose:n=>{n&&t.mutate({userIds:a},{onSuccess:()=>{T.invalidateQueries({queryKey:Z("users",{roleId:`${s.id}`})})}})},children:[e.jsx(v,{variant:"flat",color:"danger",disabled:t.isPending,children:e.jsx(r,{message:"Remove users"})}),e.jsx(xe,{title:e.jsx(r,{message:"Remove [one 1 user|other :count users] from “:name“ role?",values:{count:a.length,name:s.name}}),body:e.jsx(r,{message:"This will permanently remove the users."}),confirm:e.jsx(r,{message:"Remove"}),isDanger:!0})]})}function Fd(){const s=xd();return s.status!=="success"?e.jsx(Ve,{}):e.jsx(zd,{role:s.data.role})}function zd({role:s}){const t=O({defaultValues:s}),a=gd();return e.jsx(bs,{form:t,onSubmit:n=>{a.mutate(n)},title:e.jsx(r,{message:"Edit “:name“ role",values:{name:s.name}}),isLoading:a.isPending,children:e.jsxs(nn,{isLazy:!0,children:[e.jsxs(rn,{children:[e.jsx(Zs,{children:e.jsx(r,{message:"Settings"})}),e.jsx(Zs,{children:e.jsx(r,{message:"Users"})})]}),e.jsxs(ln,{className:"pt-20",children:[e.jsx(Xs,{children:e.jsx(hn,{isInternal:s.internal})}),e.jsx(Xs,{children:e.jsx(Nd,{role:s})})]})]})})}const Ad="roles";function Id(s){const{trans:t}=D();return R({mutationFn:a=>Pd(a),onSuccess:()=>{V(t(x("Created new role"))),T.invalidateQueries({queryKey:Z("roles")})},onError:a=>he(a,s)})}function Pd({id:s,...t}){return $.post(Ad,t).then(a=>a.data)}function Ed(){const s=O({defaultValues:{type:"sitewide"}}),t=Id(s),a=ce();return e.jsx(bs,{form:s,onSubmit:n=>{t.mutate(n,{onSuccess:i=>{a(`/admin/roles/${i.role.id}/edit`)}})},title:e.jsx(r,{message:"Add new role"}),isLoading:t.isPending,children:e.jsx(hn,{})})}const $d=s=>[],pn=""+new URL("software-engineer-e3b0c442.svg",import.meta.url).href;function Md(){U();const{tags:{types:s}}=d.useContext(Qe);return O({defaultValues:{type:s[0].name}}),e.jsx(Q,{children:e.jsx(se,{children:e.jsx(r,{message:"Add new tag"})})})}function Ld({form:s,onSubmit:t,formId:a}){const{tags:{types:n}}=d.useContext(Qe),i=s.watch("type"),l=!!n.find(o=>o.name===i&&o.system);return e.jsxs(ne,{id:a,form:s,onSubmit:t,children:[e.jsx(g,{name:"name",label:e.jsx(r,{message:"Name"}),description:e.jsx(r,{message:"Unique tag identifier."}),className:"mb-20",required:!0,autoFocus:!0}),e.jsx(g,{name:"display_name",label:e.jsx(r,{message:"Display name"}),description:e.jsx(r,{message:"User friendly tag name."}),className:"mb-20"}),e.jsx(G,{label:e.jsx(r,{message:"Type"}),name:"type",selectionMode:"single",disabled:l,children:n.filter(o=>!o.system).map(o=>e.jsx(p,{value:o.name,children:e.jsx(r,{message:o.name})},o.name))})]})}function Td({tag:s}){const{close:t,formId:a}=U(),n=O({defaultValues:{id:s.id,name:s.name,display_name:s.display_name,type:s.type}});return e.jsx(Q,{children:e.jsx(X,{children:e.jsx(Ld,{formId:a,form:n,onSubmit:i=>{}})})})}const Dd=[{key:"name",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(r,{message:"Name"}),body:s=>s.name},{key:"type",allowsSorting:!0,header:()=>e.jsx(r,{message:"Type"}),body:s=>s.type},{key:"display_name",allowsSorting:!0,header:()=>e.jsx(r,{message:"Display name"}),body:s=>s.display_name},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(r,{message:"Last updated"}),body:s=>e.jsx(ue,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(r,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs(P,{type:"modal",children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(Ne,{})}),e.jsx(Td,{tag:s})]})}];function Rd(){const{tags:s}=d.useContext(Qe),t=d.useMemo(()=>$d(s.types),[s.types]);return e.jsx(Pe,{endpoint:"tags",title:e.jsx(r,{message:"Tags"}),columns:Dd,filters:t,actions:e.jsx(Vd,{}),selectedActions:e.jsx(qe,{}),emptyStateMessage:e.jsx(je,{image:pn,title:e.jsx(r,{message:"No tags have been created yet"}),filteringTitle:e.jsx(r,{message:"No matching tags"})})})}function Vd(){return e.jsx(e.Fragment,{children:e.jsxs(P,{type:"modal",children:[e.jsx(Oe,{children:e.jsx(r,{message:"Add new tag"})}),e.jsx(Md,{})]})})}const qd=d.memo(({bytes:s})=>e.jsx(d.Fragment,{children:Qt(s)})),Od=z(e.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"}),"VisibilityOutlined"),Bd=""+new URL("upload-0bbdc60b.svg",import.meta.url).href,Ud=[{key:"name",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(r,{message:"Name"}),body:s=>e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis",children:s.name}),e.jsx("div",{className:"text-muted text-xs overflow-x-hidden overflow-ellipsis",children:s.file_name})]})},{key:"owner_id",allowsSorting:!0,width:"flex-3 min-w-200",header:()=>e.jsx(r,{message:"Uploader"}),body:s=>{var a;const t=(a=s.users)==null?void 0:a[0];return t?e.jsx(Ze,{image:t.avatar,label:t.display_name,description:t.email}):null}},{key:"type",width:"w-100 flex-shrink-0",allowsSorting:!0,header:()=>e.jsx(r,{message:"Type"}),body:s=>e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx(er,{type:s.type,className:"w-24 h-24 overflow-hidden"}),e.jsx("div",{className:"capitalize",children:s.type})]})},{key:"public",allowsSorting:!0,width:"w-60 flex-shrink-0",header:()=>e.jsx(r,{message:"Public"}),body:s=>s.public?e.jsx(qt,{className:"icon-md text-positive"}):e.jsx(Ie,{className:"icon-md text-danger"})},{key:"file_size",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(r,{message:"File size"}),body:s=>e.jsx(qd,{bytes:s.file_size})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(r,{message:"Last updated"}),body:s=>e.jsx(ue,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(r,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs(P,{type:"modal",children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(Od,{})}),e.jsx(Vr,{entries:[s]})]})}];function Hd(){return e.jsx(Pe,{endpoint:"file-entries",title:e.jsx(r,{message:"Uploaded files and folders"}),columns:Ud,filters:Rr,selectedActions:e.jsx(qe,{}),emptyStateMessage:e.jsx(je,{image:Bd,title:e.jsx(r,{message:"Nothing has been uploaded yet"}),filteringTitle:e.jsx(r,{message:"No matching files or folders"})})})}const Wd=[{key:"ends_at",label:x("Status"),description:x("Whether subscription is active or cancelled"),defaultOperator:ae.eq,control:{type:oe.Select,defaultValue:"active",options:[{key:"active",label:x("Active"),value:{value:null,operator:ae.eq}},{key:"cancelled",label:x("Cancelled"),value:{value:null,operator:ae.ne}}]}},{control:{type:oe.Select,defaultValue:"stripe",options:[{key:"stripe",label:x("Stripe"),value:"stripe"},{key:"paypal",label:x("PayPal"),value:"paypal"},{key:"none",label:x("None"),value:"none"}]},key:"gateway_name",label:x("Gateway"),description:x("With which payment provider was subscription created"),defaultOperator:ae.eq},qr({key:"renews_at",label:x("Renew date"),description:x("Date subscription will renew")}),ms({description:x("Date subscription was created")}),xs({description:x("Date subscription was last updated")})],Kd=""+new URL("subscriptions-43fd6e86.svg",import.meta.url).href;function Gd(s){const{trans:t}=D();return R({mutationFn:a=>Qd(a),onSuccess:()=>{V(t(x("Subscription updated"))),T.invalidateQueries({queryKey:Z("billing/subscriptions")})},onError:a=>he(a,s)})}function Qd({id:s,...t}){return $.put(`billing/subscriptions/${s}`,t).then(a=>a.data)}function jn({form:s,onSubmit:t,formId:a}){var o,c;const n=sr(),i=s.watch("product_id"),l=(o=n.data)==null?void 0:o.products.find(u=>u.id===i);return e.jsxs(ne,{id:a,form:s,onSubmit:t,children:[e.jsx(Or,{name:"user_id",className:"mb-20",endpoint:"normalized-models/user",label:e.jsx(r,{message:"User"})}),e.jsx(G,{name:"product_id",selectionMode:"single",className:"mb-20",label:e.jsx(r,{message:"Plan"}),children:(c=n.data)==null?void 0:c.products.filter(u=>!u.free).map(u=>e.jsx(p,{value:u.id,children:e.jsx(r,{message:u.name})},u.id))}),!(l!=null&&l.free)&&e.jsx(G,{name:"price_id",selectionMode:"single",className:"mb-20",label:e.jsx(r,{message:"Price"}),children:l==null?void 0:l.prices.map(u=>e.jsx(p,{value:u.id,children:e.jsx(ct,{price:u})},u.id))}),e.jsx(g,{inputElementType:"textarea",rows:3,name:"description",label:e.jsx(r,{message:"Description"}),className:"mb-20"}),e.jsx(Us,{className:"mb-20",name:"renews_at",granularity:"day",label:e.jsx(r,{message:"Renews at"}),description:e.jsx(r,{message:"This will only change local records. User will continue to be billed on their original cycle on the payment gateway."})}),e.jsx(Us,{className:"mb-20",name:"ends_at",granularity:"day",label:e.jsx(r,{message:"Ends at"}),description:e.jsx(r,{message:"This will only change local records. User will continue to be billed on their original cycle on the payment gateway."})})]})}function Jd({subscription:s}){const{close:t,formId:a}=U(),n=O({defaultValues:{id:s.id,product_id:s.product_id,price_id:s.price_id,description:s.description,renews_at:s.renews_at,ends_at:s.ends_at,user_id:s.user_id}}),i=Gd(n);return e.jsxs(Q,{size:"md",children:[e.jsx(se,{children:e.jsx(r,{message:"Update subscription"})}),e.jsx(X,{children:e.jsx(jn,{formId:a,form:n,onSubmit:l=>{i.mutate(l,{onSuccess:()=>{t()}})}})}),e.jsxs(de,{children:[e.jsx(v,{onClick:()=>{t()},children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{form:a,disabled:i.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(r,{message:"Save"})})]})]})}const fn="billing/subscriptions";function Yd(s){const{trans:t}=D();return R({mutationFn:a=>Zd(a),onSuccess:()=>{V(t(x("Subscription created"))),T.invalidateQueries({queryKey:Z(fn)})},onError:a=>he(a,s)})}function Zd(s){return $.post(fn,s).then(t=>t.data)}function Xd(){const{close:s,formId:t}=U(),a=O({}),n=Yd(a);return e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Add new subscription"})}),e.jsx(X,{children:e.jsx(jn,{formId:t,form:a,onSubmit:i=>{n.mutate(i,{onSuccess:()=>{s()}})}})}),e.jsxs(de,{children:[e.jsx(v,{onClick:()=>{s()},children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{form:t,disabled:n.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(r,{message:"Save"})})]})]})}const eu=z(e.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"PauseOutlined"),su=z(e.jsx("path",{d:"M10 8.64 15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"}),"PlayArrowOutlined"),Ts="billing/subscriptions",tu=[{key:"user_id",allowsSorting:!0,width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(r,{message:"Customer"}),body:s=>s.user&&e.jsx(Ze,{image:s.user.avatar,label:s.user.display_name,description:s.user.email})},{key:"status",width:"w-100 flex-shrink-0",header:()=>e.jsx(r,{message:"Status"}),body:s=>s.valid?e.jsx(Bs,{size:"xs",color:"positive",radius:"rounded",className:"w-max",children:e.jsx(r,{message:"Active"})}):e.jsx(Bs,{size:"xs",radius:"rounded",className:"w-max",children:e.jsx(r,{message:"Cancelled"})})},{key:"product_id",allowsSorting:!0,header:()=>e.jsx(r,{message:"Plan"}),body:s=>{var t;return(t=s.product)==null?void 0:t.name}},{key:"gateway_name",allowsSorting:!0,header:()=>e.jsx(r,{message:"Gateway"}),body:s=>e.jsx("span",{className:"capitalize",children:s.gateway_name})},{key:"renews_at",allowsSorting:!0,header:()=>e.jsx(r,{message:"Renews at"}),body:s=>e.jsx(ue,{date:s.renews_at})},{key:"ends_at",allowsSorting:!0,header:()=>e.jsx(r,{message:"Ends at"}),body:s=>e.jsx(ue,{date:s.ends_at})},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(r,{message:"Created at"}),body:s=>e.jsx(ue,{date:s.created_at})},{key:"actions",header:()=>e.jsx(r,{message:"Actions"}),hideHeader:!0,align:"end",visibleInMode:"all",width:"w-128 flex-shrink-0",body:s=>e.jsx(ru,{subscription:s})}];function au(){return e.jsx(Pe,{endpoint:Ts,title:e.jsx(r,{message:"Subscriptions"}),columns:tu,filters:Wd,actions:e.jsx(nu,{}),enableSelection:!1,selectedActions:e.jsx(qe,{}),queryParams:{with:"product"},emptyStateMessage:e.jsx(je,{image:Kd,title:e.jsx(r,{message:"No subscriptions have been created yet"}),filteringTitle:e.jsx(r,{message:"No matching subscriptions"})})})}function nu(){return e.jsx(e.Fragment,{children:e.jsxs(P,{type:"modal",children:[e.jsx(Oe,{children:e.jsx(r,{message:"Add new subscription"})}),e.jsx(Xd,{})]})})}function ru({subscription:s}){return e.jsxs(d.Fragment,{children:[e.jsxs(P,{type:"modal",children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(Ne,{})}),e.jsx(Jd,{subscription:s})]}),s.cancelled?e.jsx(lu,{subscription:s}):e.jsx(iu,{subscription:s}),e.jsx(ou,{subscription:s})]})}function iu({subscription:s}){const t=sa(),a=()=>{t.mutate({subscriptionId:s.id},{onSuccess:()=>{T.invalidateQueries({queryKey:Z(Ts)})}})};return e.jsxs(P,{type:"modal",onClose:n=>{n&&a()},children:[e.jsx(H,{label:e.jsx(r,{message:"Cancel subscription"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(eu,{})})}),e.jsx(xe,{title:e.jsx(r,{message:"Cancel subscription"}),body:e.jsxs("div",{children:[e.jsx(r,{message:"Are you sure you want to cancel this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(r,{message:"This will put user on grace period until their next scheduled renewal date. Subscription can be renewed until that date by user or from admin area."})})]}),confirm:e.jsx(r,{message:"Confirm"})})]})}function lu({subscription:s}){const t=Wr(),a=()=>{t.mutate({subscriptionId:s.id},{onSuccess:()=>{T.invalidateQueries({queryKey:Z(Ts)})}})};return e.jsxs(P,{type:"modal",onClose:n=>{n&&a()},children:[e.jsx(H,{label:e.jsx(r,{message:"Renew subscription"}),children:e.jsx(k,{size:"md",className:"text-muted",onClick:a,disabled:t.isPending,children:e.jsx(su,{})})}),e.jsx(xe,{title:e.jsx(r,{message:"Resume subscription"}),body:e.jsxs("div",{children:[e.jsx(r,{message:"Are you sure you want to resume this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(r,{message:"This will put user on their original plan and billing cycle."})})]}),confirm:e.jsx(r,{message:"Confirm"})})]})}function ou({subscription:s}){const t=sa(),a=()=>{t.mutate({subscriptionId:s.id,delete:!0},{onSuccess:()=>{T.invalidateQueries({queryKey:Z(Ts)})}})};return e.jsxs(P,{type:"modal",onClose:n=>{n&&a()},children:[e.jsx(H,{label:e.jsx(r,{message:"Delete subscription"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(Ie,{})})}),e.jsx(xe,{isDanger:!0,title:e.jsx(r,{message:"Delete subscription"}),body:e.jsxs("div",{children:[e.jsx(r,{message:"Are you sure you want to delete this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(r,{message:"This will permanently delete the subscription and immediately cancel it on billing gateway. Subscription will not be renewable anymore."})})]}),confirm:e.jsx(r,{message:"Confirm"})})]})}const cu=z(e.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"SyncOutlined");function du(){const{trans:s}=D();return R({mutationFn:()=>uu(),onSuccess:()=>{V(s(x("Plans synced")))},onError:t=>re(t,x("Could not sync plans"))})}function uu(){return $.post("billing/products/sync").then(s=>s.data)}const mu=s=>`billing/products/${s}`;function xu(){const{trans:s}=D();return R({mutationFn:t=>hu(t),onSuccess:()=>{V(s(x("Plan deleted"))),T.invalidateQueries({queryKey:Z("billing/products")})},onError:t=>re(t)})}function hu({productId:s}){return $.delete(mu(s)).then(t=>t.data)}const gu=[{key:"subscriptions",label:x("Subscriptions"),description:x("Whether plan has any active subscriptions"),defaultOperator:ae.eq,control:{type:oe.Select,defaultValue:"01",options:[{key:"01",label:x("Has active subscriptions"),value:{value:"*",operator:ae.has}},{key:"02",label:x("Does not have active subscriptions"),value:{value:"*",operator:ae.doesntHave}}]}},ms({description:x("Date plan was created")}),xs({description:x("Date plan was last updated")})],pu=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(r,{message:"Name"}),body:s=>{const t=s.prices[0];return e.jsx(Ze,{label:s.name,description:s.free?e.jsx(r,{message:"Free"}):e.jsx(ct,{price:t})})}},{key:"created_at",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(r,{message:"Created"}),body:s=>e.jsx(ue,{date:s.created_at})},{key:"updated_at",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(r,{message:"Last updated"}),body:s=>e.jsx(ue,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(r,{message:"Actions"}),visibleInMode:"all",hideHeader:!0,align:"end",maxWidth:"max-w-84",body:s=>e.jsxs(d.Fragment,{children:[e.jsx(k,{size:"md",className:"text-muted",elementType:W,to:`/admin/plans/${s.id}/edit`,children:e.jsx(Ne,{})}),e.jsx(fu,{product:s})]})}];function ju(){const s=ce();return e.jsx(Pe,{endpoint:"billing/products",title:e.jsx(r,{message:"Subscription plans"}),columns:pu,actions:e.jsx(bu,{}),enableSelection:!1,filters:gu,onRowAction:t=>{s(`/admin/plans/${t.id}/edit`)},emptyStateMessage:e.jsx(je,{image:pn,title:e.jsx(r,{message:"No plans have been created yet"}),filteringTitle:e.jsx(r,{message:"No matching plans"})})})}function fu({product:s}){const t=xu();return e.jsxs(P,{type:"modal",onClose:a=>{a&&t.mutate({productId:s.id})},children:[e.jsx(H,{label:e.jsx(r,{message:"Delete plan"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(Es,{})})}),e.jsx(xe,{title:e.jsx(r,{message:"Delete plan"}),body:e.jsx(r,{message:"Are you sure you want to delete this plan?"}),confirm:e.jsx(r,{message:"Delete"})})]})}function bu(){const s=du();return e.jsxs(d.Fragment,{children:[e.jsx(H,{label:e.jsx(r,{message:"Sync plans with Stripe & PayPal"}),children:e.jsx(k,{color:"primary",variant:"outline",size:"sm",disabled:s.isPending,onClick:()=>{s.mutate()},children:e.jsx(cu,{})})}),e.jsx(Oe,{elementType:W,to:"/admin/plans/new",children:e.jsx(r,{message:"Add new plan"})})]})}const bn=s=>`billing/products/${s}`;function vu(){const{productId:s}=ie();return De({queryKey:[bn(s)],queryFn:()=>yu(s)})}function yu(s){return $.get(bn(s)).then(t=>t.data)}const et=[{key:"day1",label:x("Daily"),interval:"day",interval_count:1},{key:"week1",label:x("Weekly"),interval:"week",interval_count:1},{key:"month1",label:x("Monthly"),interval:"month",interval_count:1},{key:"month3",label:x("Every 3 months"),interval:"month",interval_count:3},{key:"month6",label:x("Every 6 months"),interval:"month",interval_count:6},{key:"year1",label:x("Yearly"),interval:"year",interval_count:1},{key:"custom",label:x("Custom"),interval:null,interval_count:null}];function wu({index:s,onRemovePrice:t}){const{trans:a}=D(),n=ve(["currencies"]),i=d.useMemo(()=>{var S;return(S=n.data)!=null&&S.currencies?Object.values(n.data.currencies):[]},[n.data]),{watch:l,getValues:o}=F(),c=!l("id"),u=l(`prices.${s}.id`)==null,m=l(`prices.${s}.subscriptions_count`)||0,[h,j]=d.useState(()=>{const S=o(`prices.${s}.interval`),C=o(`prices.${s}.interval_count`),f=et.find(N=>N.key===`${S}${C}`);return f?f.key:"custom"}),b=c||u||!m;return e.jsxs(d.Fragment,{children:[!b&&e.jsx("p",{className:"text-muted text-sm max-w-500 mb-20",children:e.jsx(r,{message:"This price can't modified or deleted, because it has [one 1 subscriber|other :count subscribers]. You can instead add a new price.",values:{count:m}})}),e.jsx(g,{required:!0,disabled:!b,label:e.jsx(r,{message:"Amount"}),type:"number",min:.1,step:.01,name:`prices.${s}.amount`,className:"mb-20"}),e.jsx(G,{required:!0,disabled:!b,label:e.jsx(r,{message:"Currency"}),name:`prices.${s}.currency`,items:i,showSearchField:!0,searchPlaceholder:a(x("Search currencies")),selectionMode:"single",className:"mb-20",children:S=>e.jsx(p,{value:S.code,children:`${S.code}: ${S.name}`},S.code)}),e.jsx(Su,{disabled:!b,index:s,value:h,onValueChange:j}),h==="custom"&&e.jsx(ku,{disabled:!b,index:s}),e.jsx("div",{className:"text-right",children:e.jsx(v,{size:"xs",variant:"outline",color:"danger",disabled:!b,onClick:()=>{t()},children:e.jsx(r,{message:"Delete price"})})})]})}function Su({index:s,value:t,onValueChange:a,disabled:n}){const{setValue:i}=F();return e.jsx(hs,{label:e.jsx(r,{message:"Billing period"}),disabled:n,className:"mb-20",selectionMode:"single",selectedValue:t,onSelectionChange:l=>{if(a(l),l!=="custom"){const o=et.find(c=>c.key===l);o&&(i(`prices.${s}.interval`,o.interval),i(`prices.${s}.interval_count`,o.interval_count))}},children:et.map(l=>e.jsx(p,{value:l.key,children:e.jsx(r,{...l.label})},l.key))})}function ku({index:s,disabled:t}){const{watch:a}=F(),n=a(`prices.${s}.interval`);let i;return n==="day"?i=365:n==="week"?i=52:i=12,e.jsxs("div",{className:"flex border rounded w-min",children:[e.jsx("div",{className:"px-18 flex items-center text-sm",children:e.jsx(r,{message:"Every"})}),e.jsx(g,{inputShadow:"shadow-none",inputBorder:"border-none",className:"border-l border-r w-80",name:`prices.${s}.interval_count`,type:"number",min:1,max:i,disabled:t,required:!0}),e.jsxs(G,{inputShadow:"shadow-none",inputBorder:"border-none",name:`prices.${s}.interval`,selectionMode:"single",disabled:t,children:[e.jsx(p,{value:"day",children:e.jsx(r,{message:"Days"})}),e.jsx(p,{value:"week",children:e.jsx(r,{message:"Weeks"})}),e.jsx(p,{value:"month",children:e.jsx(r,{message:"Months"})})]})]})}function vn(){return e.jsxs(d.Fragment,{children:[e.jsx(g,{name:"name",label:e.jsx(r,{message:"Name"}),className:"mb-20",required:!0,autoFocus:!0}),e.jsx(g,{name:"description",label:e.jsx(r,{message:"Description"}),className:"mb-20",inputElementType:"textarea",rows:4}),e.jsxs(G,{name:"position",selectionMode:"single",label:e.jsx(r,{message:"Position in pricing table"}),className:"mb-20",children:[e.jsx(p,{value:0,children:e.jsx(r,{message:"First"})}),e.jsx(p,{value:1,children:e.jsx(r,{message:"Second"})}),e.jsx(p,{value:2,children:e.jsx(r,{message:"Third"})}),e.jsx(p,{value:3,children:e.jsx(r,{message:"Fourth"})}),e.jsx(p,{value:4,children:e.jsx(r,{message:"Fifth"})})]}),e.jsx(as,{className:"mb-30",name:"available_space",label:e.jsx(r,{message:"Allowed storage space"}),description:e.jsx(r,{values:{a:s=>e.jsx(W,{className:lt,target:"_blank",to:"/admin/settings/uploading",children:s})},message:"Total storage space all user uploads are allowed to take up."})}),e.jsx(q,{name:"recommended",className:"mb-20",description:e.jsx(r,{message:"Plan will be displayed more prominently on pricing page."}),children:e.jsx(r,{message:"Recommend"})}),e.jsx(q,{name:"hidden",className:"mb-20",description:e.jsx(r,{message:"Plan will not be shown on pricing or upgrade pages."}),children:e.jsx(r,{message:"Hidden"})}),e.jsx(q,{name:"free",className:"mb-20",description:e.jsx(r,{message:"Will be assigned to all users, if they are not subscribed already."}),children:e.jsx(r,{message:"Free"})}),e.jsx(st,{children:e.jsx(r,{message:"Feature list"})}),e.jsx(Nu,{}),e.jsx(Cu,{}),e.jsx(st,{children:e.jsx(r,{message:"Permissions"})}),e.jsx(mt,{name:"permissions"})]})}function st({children:s}){return e.jsx("h2",{className:"mt-40 mb-20 text-base font-semibold",children:s})}function Nu(){const{fields:s,append:t,remove:a}=ke({name:"feature_list"});return e.jsxs("div",{children:[s.map((n,i)=>e.jsxs("div",{className:"flex gap-10 mb-10",children:[e.jsx(g,{name:`feature_list.${i}.value`,size:"sm",className:"flex-auto"}),e.jsx(k,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{a(i)},children:e.jsx(Ie,{})})]},n.id)),e.jsx(v,{variant:"text",color:"primary",startIcon:e.jsx(pe,{}),size:"xs",onClick:()=>{t({value:""})},children:e.jsx(r,{message:"Add another line"})})]})}function Cu(){var l;const{watch:s,formState:{errors:t}}=F(),{fields:a,append:n,remove:i}=ke({name:"prices",keyName:"key"});return s("free")?null:e.jsxs(d.Fragment,{children:[e.jsx(st,{children:e.jsx(r,{message:"Pricing"})}),((l=t.prices)==null?void 0:l.message)&&e.jsx("div",{className:"text-sm text-danger mb-20",children:t.prices.message}),e.jsx(ps,{variant:"outline",className:"mb-10",children:a.map((o,c)=>e.jsx(Le,{label:e.jsx(ct,{price:o}),children:e.jsx(wu,{index:c,onRemovePrice:()=>{i(c)}})},o.key))}),e.jsx(v,{variant:"text",color:"primary",startIcon:e.jsx(pe,{}),size:"xs",onClick:()=>{n({currency:"USD",amount:1,interval_count:1,interval:"month"})},children:e.jsx(r,{message:"Add another price"})})]})}const yn=s=>`billing/products/${s}`;function _u(s){const{trans:t}=D(),a=ce();return R({mutationFn:n=>Fu(n),onSuccess:n=>{V(t(x("Plan updated"))),T.invalidateQueries({queryKey:[yn(n.product.id)]}),T.invalidateQueries({queryKey:Z("billing/products")}),a("/admin/plans")},onError:n=>he(n,s)})}function Fu({id:s,...t}){const a={...t,feature_list:t.feature_list.map(n=>n.value)};return $.put(yn(s),a).then(n=>n.data)}function zu(){const s=vu();return s.status!=="success"?e.jsx(Ve,{}):e.jsx(Au,{product:s.data.product})}function Au({product:s}){const t=O({defaultValues:{...s,feature_list:s.feature_list.map(n=>({value:n}))}}),a=_u(t);return e.jsx(bs,{form:t,onSubmit:n=>{a.mutate(n)},title:e.jsx(r,{message:"Edit “:name“ plan",values:{name:s.name}}),isLoading:a.isPending,children:e.jsx(vn,{})})}const wn="billing/products";function Iu(s){const{trans:t}=D(),a=ce();return R({mutationFn:n=>Pu(n),onSuccess:()=>{V(t(x("Plan created"))),T.invalidateQueries({queryKey:[wn]}),T.invalidateQueries({queryKey:Z("billing/products")}),a("/admin/plans")},onError:n=>he(n,s)})}function Pu(s){const t={...s,feature_list:s.feature_list.map(a=>a.value)};return $.post(wn,t).then(a=>a.data)}function Eu(){const s=O({defaultValues:{free:!1,recommended:!1}}),t=Iu(s);return e.jsx(bs,{form:s,onSubmit:a=>{t.mutate(a)},title:e.jsx(r,{message:"Create new plan"}),isLoading:t.isPending,children:e.jsx(vn,{})})}function $u(){return e.jsxs(me,{title:e.jsx(r,{message:"GDPR"}),description:e.jsx(r,{message:"Configure settings related to EU General Data Protection Regulation."}),children:[e.jsx(Mu,{}),e.jsx(ls,{}),e.jsx(Lu,{})]})}function Mu(){const{watch:s}=F(),t=s("client.cookie_notice.enable");return e.jsxs("div",{children:[e.jsx(q,{name:"client.cookie_notice.enable",className:"mb-20",description:e.jsx(r,{message:"Whether cookie notice should be shown automatically to users from EU until it is accepted."}),children:e.jsx(r,{message:"Enable cookie notice"})}),t&&e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-20 border-b pb-6",children:[e.jsx("div",{className:"mb-20 border-b pb-10 text-sm font-medium",children:e.jsx(r,{message:"Information button"})}),e.jsx(ht,{hideRoleAndPermissionFields:!0,formPathPrefix:"client.cookie_notice.button"})]}),e.jsxs(G,{name:"client.cookie_notice.position",selectionMode:"single",label:e.jsx(r,{message:"Cookie notice position"}),className:"mb-20",children:[e.jsx(p,{value:"top",children:e.jsx(r,{message:"Top"})}),e.jsx(p,{value:"bottom",children:e.jsx(r,{message:"Bottom"})})]})]})]})}function Lu(){const{fields:s,append:t,remove:a}=ke({name:"client.registration.policies"});return e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(r,{message:"Registration policies"})}),e.jsx("div",{className:"text-xs text-muted",children:e.jsx(r,{message:"Create policies that will be shown on registration page. User will be required to accept them by toggling a checkbox."})}),e.jsx(ps,{className:"mt-16",variant:"outline",children:s.map((n,i)=>e.jsx(Le,{label:n.label,chevronPosition:"left",endAppend:e.jsx(k,{variant:"text",color:"danger",size:"sm",onClick:()=>{a(i)},children:e.jsx(Ie,{})}),children:e.jsx(ht,{hideRoleAndPermissionFields:!0,formPathPrefix:`client.register_policies.${i}`})},n.id))}),e.jsxs(P,{type:"modal",onClose:n=>{n&&t(n)},children:[e.jsx(v,{className:"mt-12",variant:"link",color:"primary",startIcon:e.jsx(pe,{}),size:"xs",children:e.jsx(r,{message:"Add another policy"})}),e.jsx(ma,{title:e.jsx(r,{message:"Add policy"})})]})]})}const Tu=[];function Du(s){const{pageId:t}=ie(),a=`${s||"custom-pages"}/${t}`;return R({mutationFn:n=>Ru(n,a),onError:n=>re(n),onSuccess:async()=>{await T.invalidateQueries({queryKey:["custom-pages"]}),await T.invalidateQueries({queryKey:Z(a)}),V(x("Page updated"))}})}function Ru(s,t){return $.put(`${t}`,s).then(a=>a.data)}function Sn(){const[s,t]=d.useState(!1),{trans:a}=D(),i=F().watch("title"),l=a({message:"Title"});return s?e.jsx(g,{placeholder:l,autoFocus:!0,className:"mb-30",onBlur:()=>{t(!1)},name:"title",required:!0}):e.jsxs("h1",{tabIndex:0,onClick:()=>{t(!0)},onFocus:()=>{t(!0)},className:y("hover:bg-primary/focus rounded cursor-pointer",!i&&"text-muted"),children:[i||l,e.jsx(Ne,{className:"icon-sm mx-8 mt-8 align-top text-muted"})]})}var kn={exports:{}};(function(s,t){(function(a,n,i){s.exports=i(),s.exports.default=i()})("slugify",tr,function(){var a=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),n=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function i(l,o){if(typeof l!="string")throw new Error("slugify: string argument expected");o=typeof o=="string"?{replacement:o}:o||{};var c=n[o.locale]||{},u=o.replacement===void 0?"-":o.replacement,m=o.trim===void 0?!0:o.trim,h=l.normalize().split("").reduce(function(j,b){var S=c[b];return S===void 0&&(S=a[b]),S===void 0&&(S=b),S===u&&(S=" "),j+S.replace(o.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return o.strict&&(h=h.replace(/[^A-Za-z0-9\s]/g,"")),m&&(h=h.trim()),h=h.replace(/\s+/g,u),o.lower&&(h=h.toLowerCase()),h}return i.extend=function(l){Object.assign(a,l)},i})})(kn);var Vu=kn.exports;const qu=ar(Vu);function Ou(s,t="-",a=!1){if(!s)return s;let n=qu(s,{lower:!0,replacement:t,strict:a,remove:/[*+~.()'"!:@?\|/\\]/g});return n||(n=s.replace(/\s+/g,"-").toLowerCase()),n}function Bu({host:s,value:t="",placeholder:a,onChange:n,className:i,inputRef:l,onInputBlur:o,showLinkIcon:c=!0,pattern:u,minLength:m,maxLength:h,hideButton:j,...b}){const{base_url:S}=fe(),C=b.prefix?`/${b.prefix}`:"",f=b.suffix?`/${b.suffix}`:"",[N,_]=d.useState(!1),[A,E]=d.useState(t);s=s||S,d.useEffect(()=>{E(t)},[t]);const B=()=>{N?(_(!1),A&&(n==null||n(A))):_(!0)};let M="";return A?M=A:a&&(M=Ou(a)),e.jsxs("div",{className:y("flex items-center",i),children:[c&&e.jsx(ea,{className:"icon-md text-muted"}),e.jsxs("div",{className:"text-primary ml-6 mr-14",children:[s,C,!N&&M&&e.jsxs(d.Fragment,{children:[e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-medium",children:M})]}),N?null:f]}),N&&e.jsx(Ae,{pattern:u,minLength:m,maxLength:h,onKeyDown:L=>{L.key==="Enter"&&B()},ref:l,"aria-label":"slug",autoFocus:!0,className:"mr-14",size:"2xs",value:A,onBlur:o,onChange:L=>{E(L.target.value)}}),!j&&e.jsx(v,{type:"button",color:"chip",variant:"outline",size:"2xs",onClick:()=>{B()},children:N?e.jsx(r,{message:"Save"}):e.jsx(r,{message:"Edit"})})]})}const Uu=z(e.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"UndoOutlined"),Hu=z(e.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}),"RedoOutlined");function Wu({editor:s}){return e.jsxs("span",{children:[e.jsx(k,{size:"md",disabled:!s.can().undo(),onClick:()=>{s.commands.focus(),s.commands.undo()},children:e.jsx(Uu,{})}),e.jsx(k,{size:"md",disabled:!s.can().redo(),onClick:()=>{s.commands.focus(),s.commands.redo()},children:e.jsx(Hu,{})})]})}const Nn=z(e.jsx("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}),"CodeOutlined");function Ku({editor:s}){return e.jsxs(P,{type:"modal",onClose:t=>{t!=null&&(s==null||s.commands.setContent(t))},children:[e.jsx(v,{variant:"text",startIcon:e.jsx(Nn,{}),children:e.jsx(r,{message:"Source"})}),e.jsx(ha,{title:e.jsx(r,{message:"Source code"}),defaultValue:s.getHTML()})]})}function We(){return e.jsx("div",{className:"self-stretch mx-4 w-1 bg-divider flex-shrink-0"})}const Gu=z(e.jsx("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),"FormatBoldOutlined"),Qu=z(e.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"}),"FormatItalicOutlined"),Ju=z(e.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}),"FormatUnderlinedOutlined");function Yu({editor:s,size:t}){return e.jsxs("span",{className:y("flex-shrink-0 whitespace-nowrap"),children:[e.jsx(H,{label:e.jsx(r,{message:"Bold"}),children:e.jsx(k,{size:t,color:s.isActive("bold")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleBold()},children:e.jsx(Gu,{})})}),e.jsx(H,{label:e.jsx(r,{message:"Italic"}),children:e.jsx(k,{size:t,color:s.isActive("italic")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleItalic()},children:e.jsx(Qu,{})})}),e.jsx(H,{label:e.jsx(r,{message:"Underline"}),children:e.jsx(k,{size:t,color:s.isActive("underline")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleUnderline()},children:e.jsx(Ju,{})})})]})}const Zu=z(e.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),"FormatListBulletedOutlined"),Xu=z(e.jsx("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),"FormatListNumberedOutlined");function em({editor:s,size:t}){const a=s.isActive("bulletList"),n=s.isActive("orderedList");return e.jsxs("span",{className:y("flex-shrink-0","whitespace-nowrap"),children:[e.jsx(H,{label:e.jsx(r,{message:"Bulleted list"}),children:e.jsx(k,{size:t,color:a?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleBulletList()},children:e.jsx(Zu,{})})}),e.jsx(H,{label:e.jsx(r,{message:"Numbered list"}),children:e.jsx(k,{size:t,color:n?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleOrderedList()},children:e.jsx(Xu,{})})})]})}function sm(s,{text:t,target:a,href:n}){s.state.selection.empty&&t?s.commands.insertContent(`<a href="${n}" target="${a}">${t}</a>`):s.state.selection.empty||(n?s.chain().focus().extendMarkRange("link").setLink({href:n,target:a}).run():s.chain().focus().extendMarkRange("link").unsetLink().run())}function tm({editor:s,size:t}){return e.jsxs(P,{type:"modal",children:[e.jsx(H,{label:e.jsx(r,{message:"Insert link"}),children:e.jsx(k,{size:t,className:y("flex-shrink-0"),children:e.jsx(ea,{})})}),e.jsx(am,{editor:s})]})}function am({editor:s}){const t=s.getAttributes("link").href,a=s.state.doc.textBetween(s.state.selection.from,s.state.selection.to,""),n=O({defaultValues:{href:t,text:a,target:"_blank"}}),{formId:i,close:l}=U();return e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Insert link"})}),e.jsx(X,{children:e.jsxs(ne,{form:n,id:i,onSubmit:o=>{sm(s,o),l()},children:[e.jsx(g,{name:"href",label:e.jsx(r,{message:"URL"}),autoFocus:!0,type:"url",className:"mb-20"}),e.jsx(g,{name:"text",label:e.jsx(r,{message:"Text to display"}),className:"mb-20"}),e.jsxs(G,{selectionMode:"single",name:"target",label:e.jsx(r,{message:"Open link in..."}),children:[e.jsx(p,{value:"_self",children:e.jsx(r,{message:"Current window"})}),e.jsx(p,{value:"_blank",children:e.jsx(r,{message:"New window"})})]})]})}),e.jsxs(de,{children:[e.jsx(v,{onClick:l,variant:"text",children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{type:"submit",form:i,variant:"flat",color:"primary",children:e.jsx(r,{message:"Save"})})]})]})}const nm=z(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86-3 3.87L9 13.14 6 17h12l-3.86-5.14z"}),"ImageOutlined"),rm=2097152;function im({editor:s,size:t,diskPrefix:a="page_media"}){const{selectAndUploadFile:n}=nr(),i=()=>{n({showToastOnRestrictionFail:!0,restrictions:{allowedFileTypes:[rr.image],maxFileSize:rm},metadata:{diskPrefix:a,disk:ir.public},onSuccess:l=>{s.commands.focus(),s.commands.setImage({src:l.url})}})};return e.jsx(H,{label:e.jsx(r,{message:"Insert image"}),children:e.jsx(k,{size:t,onClick:i,className:y("flex-shrink-0"),children:e.jsx(nm,{})})})}const lm=z(e.jsx("path",{d:"M20 8V5H6.39l3 3h1.83l-.55 1.28 2.09 2.1L14.21 8zM3.41 4.86 2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21l1.41-1.41z"}),"FormatClearOutlined");function om({editor:s,size:t}){return e.jsx(H,{label:e.jsx(r,{message:"Clear formatting"}),children:e.jsx(k,{className:y("flex-shrink-0"),size:t,onClick:()=>{s.chain().focus().clearNodes().unsetAllMarks().run()},children:e.jsx(lm,{})})})}const cm=z(e.jsx("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}),"HorizontalRuleOutlined"),dm=z([e.jsx("circle",{cx:"12",cy:"19",r:"2"},"0"),e.jsx("path",{d:"M10 3h4v12h-4z"},"1")],"PriorityHighOutlined"),um=z(e.jsx("path",{d:"M16 4H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99h16c1.1 0 2-.9 2-2v-8l-6-6zM4 18.01V6h11v5h5v7.01H4z"}),"NoteOutlined"),mm=z([e.jsx("path",{d:"M9.5 7.5v9l7-4.5z"},"0"),e.jsx("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14.01H4V5.99h16v12.02z"},"1")],"SmartDisplayOutlined");function xm({editor:s,size:t}){const[a,n]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(Je,{onItemSelected:i=>{i==="hr"?(s.commands.focus(),s.commands.setHorizontalRule()):i==="embed"?n("embed"):(s.commands.focus(),s.commands.addInfo({type:i}))},children:[e.jsx(k,{variant:"text",size:t,className:y("flex-shrink-0"),children:e.jsx(Xt,{})}),e.jsxs(Ye,{children:[e.jsx(p,{value:"hr",startIcon:e.jsx(cm,{}),children:e.jsx(r,{message:"Horizontal rule"})}),e.jsx(p,{value:"embed",startIcon:e.jsx(mm,{}),children:e.jsx(r,{message:"Embed"})}),e.jsx(p,{value:"important",startIcon:e.jsx(dm,{}),children:e.jsx(r,{message:"Important"})}),e.jsx(p,{value:"warning",startIcon:e.jsx(lr,{}),children:e.jsx(r,{message:"Warning"})}),e.jsx(p,{value:"success",startIcon:e.jsx(um,{}),children:e.jsx(r,{message:"Note"})})]})]}),e.jsx(P,{type:"modal",isOpen:!!a,onClose:()=>{n(!1)},children:e.jsx(hm,{editor:s})})]})}function hm({editor:s}){const t=s.getAttributes("embed").src,a=O({defaultValues:{src:t}}),{formId:n,close:i}=U();return e.jsxs(Q,{children:[e.jsx(se,{children:e.jsx(r,{message:"Insert link"})}),e.jsx(X,{children:e.jsx(ne,{form:a,id:n,onSubmit:l=>{s.commands.setEmbed(l),i()},children:e.jsx(g,{name:"src",label:e.jsx(r,{message:"Embed URL"}),autoFocus:!0,type:"url",required:!0})})}),e.jsxs(de,{children:[e.jsx(v,{onClick:i,variant:"text",children:e.jsx(r,{message:"Cancel"})}),e.jsx(v,{type:"submit",form:n,disabled:!a.formState.isValid,variant:"flat",color:"primary",children:e.jsx(r,{message:"Add"})})]})]})}function ge({children:s,modifier:t,separator:a="+"}){const n=or()?e.jsx("span",{className:"text-base align-middle",children:"⌘"}):"Ctrl";return e.jsxs("kbd",{className:"text-xs text-muted",children:[t&&e.jsxs(e.Fragment,{children:[n,a]}),s]})}function gm({editor:s,size:t}){return e.jsxs(Je,{floatingMinWidth:"w-256",onItemSelected:a=>{s.commands.focus(),typeof a=="string"&&a.startsWith("h")?s.commands.toggleHeading({level:parseInt(a.replace("h",""))}):a==="code"?s.commands.toggleCode():a==="strike"?s.commands.toggleStrike():a==="super"?s.commands.toggleSuperscript():a==="sub"?s.commands.toggleSubscript():a==="blockquote"?s.commands.toggleBlockquote():a==="paragraph"&&s.commands.setParagraph()},children:[e.jsx(v,{className:y("flex-shrink-0"),variant:"text",size:t,endIcon:e.jsx(cr,{}),children:e.jsx(r,{message:"Format"})}),e.jsxs(Ye,{children:[e.jsx(p,{value:"h1",endSection:e.jsx(ge,{modifier:!0,children:"Alt+1"}),children:e.jsx(r,{message:"Heading :number",values:{number:1}})}),e.jsx(p,{value:"h2",endSection:e.jsx(ge,{modifier:!0,children:"Alt+2"}),children:e.jsx(r,{message:"Heading :number",values:{number:2}})}),e.jsx(p,{value:"h3",endSection:e.jsx(ge,{modifier:!0,children:"Alt+3"}),children:e.jsx(r,{message:"Heading :number",values:{number:3}})}),e.jsx(p,{value:"h4",endSection:e.jsx(ge,{modifier:!0,children:"Alt+4"}),children:e.jsx(r,{message:"Heading :number",values:{number:4}})}),e.jsx(p,{value:"code",endSection:e.jsx(ge,{modifier:!0,children:"E"}),children:e.jsx(r,{message:"Code"})}),e.jsx(p,{value:"strike",endSection:e.jsx(ge,{modifier:!0,children:"Shift+X"}),children:e.jsx(r,{message:"Strikethrough"})}),e.jsx(p,{value:"super",endSection:e.jsx(ge,{modifier:!0,separator:" ",children:"."}),children:e.jsx(r,{message:"Superscript"})}),e.jsx(p,{value:"sub",endSection:e.jsx(ge,{modifier:!0,separator:" ",children:","}),children:e.jsx(r,{message:"Subscript"})}),e.jsx(p,{value:"blockquote",endSection:e.jsx(ge,{modifier:!0,children:"Shift+B"}),children:e.jsx(r,{message:"Blockquote"})}),e.jsx(p,{value:"paragraph",endSection:e.jsx(ge,{modifier:!0,children:"Alt+0"}),children:e.jsx(r,{message:"Paragraph"})})]})]})}const pm=z(e.jsx("path",{d:"M2 20h20v4H2v-4zm3.49-3h2.42l1.27-3.58h5.65L16.09 17h2.42L13.25 3h-2.5L5.49 17zm4.42-5.61 2.03-5.79h.12l2.03 5.79H9.91z"}),"FormatColorTextOutlined"),jm=z(e.jsx("path",{d:"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10 10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5zM2 20h20v4H2v-4z"}),"FormatColorFillOutlined");function fm({editor:s,size:t}){const[a,n]=d.useState(!1),i=s.getAttributes("textStyle").color,l=s.getAttributes("textStyle").backgroundColor;return e.jsxs(d.Fragment,{children:[e.jsxs("span",{className:y("flex-shrink-0 whitespace-nowrap"),children:[e.jsx(k,{size:t,color:i?"primary":null,onClick:()=>{n("text")},children:e.jsx(pm,{})}),e.jsx(k,{size:t,color:l?"primary":null,onClick:()=>{n("bg")},children:e.jsx(jm,{})})]}),e.jsx(P,{currentValue:a==="text"?"#000000":"#FFFFFF",type:"modal",isOpen:!!a,onClose:o=>{o&&(a==="text"?s.commands.setColor(o):s.commands.setBackgroundColor(o)),n(!1)},children:e.jsx(an,{defaultValue:a==="text"?"#000000":"#FFFFFF"})})]})}const bm=z(e.jsx("path",{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}),"FormatAlignLeftOutlined"),vm=z(e.jsx("path",{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}),"FormatAlignCenterOutlined"),ym=z(e.jsx("path",{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}),"FormatAlignRightOutlined"),wm=z(e.jsx("path",{d:"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"}),"FormatAlignJustifyOutlined"),Ss={left:{icon:bm,label:x("Align left")},center:{icon:vm,label:x("Align center")},right:{icon:ym,label:x("Align right")},justify:{icon:wm,label:x("Justify")}};function Sm({editor:s,size:t}){const a=Object.keys(Ss).find(i=>s.isActive({textAlign:i}))||"left",n=a?Ss[a].icon:Ss.left.icon;return e.jsxs(Je,{floatingWidth:"auto",selectionMode:"single",selectedValue:a,onSelectionChange:i=>{s.commands.focus(),s.commands.setTextAlign(i)},children:[e.jsx(k,{size:t,color:a?"primary":null,className:y("flex-shrink-0"),children:e.jsx(n,{})}),e.jsx(Ye,{children:Object.entries(Ss).map(([i,l])=>{const o=l.icon;return e.jsx(p,{value:i,startIcon:e.jsx(o,{size:"md"}),capitalizeFirst:!0,children:e.jsx(r,{message:l.label.message})},i)})})]})}const km=z(e.jsx("path",{d:"M11 17h10v-2H11v2zm-8-5 4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}),"FormatIndentDecreaseOutlined"),Nm=z(e.jsx("path",{d:"M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}),"FormatIndentIncreaseOutlined");function Cm({editor:s,size:t}){return e.jsxs("span",{className:y("flex-shrink-0","whitespace-nowrap"),children:[e.jsx(H,{label:e.jsx(r,{message:"Decrease indent"}),children:e.jsx(k,{size:t,onClick:()=>{s.commands.focus(),s.commands.outdent()},children:e.jsx(km,{})})}),e.jsx(H,{label:e.jsx(r,{message:"Increase indent"}),children:e.jsx(k,{size:t,onClick:()=>{s.commands.focus(),s.commands.indent()},children:e.jsx(Nm,{})})})]})}function _m({editor:s,size:t}){const a=s.getAttributes("codeBlock").language||"";return e.jsxs(Je,{selectionMode:"single",selectedValue:a,onSelectionChange:n=>{s.commands.toggleCodeBlock({language:n})},children:[e.jsx(H,{label:e.jsx(r,{message:"Codeblock"}),children:e.jsx(k,{className:y("flex-shrink-0"),size:t,color:a?"primary":null,children:e.jsx(Nn,{})})}),e.jsxs(Ye,{children:[e.jsx(p,{value:"html",children:"HTML"}),e.jsx(p,{value:"javascript",children:"JavaScript"}),e.jsx(p,{value:"css",children:"CSS"}),e.jsx(p,{value:"php",children:"PHP"}),e.jsx(p,{value:"shell",children:"Shell"}),e.jsx(p,{value:"bash",children:"Bash"}),e.jsx(p,{value:"ruby",children:"Ruby"}),e.jsx(p,{value:"python",children:"Python"}),e.jsx(p,{value:"java",children:"Java"}),e.jsx(p,{value:"c++",children:"C++"})]})]})}const Fm=z(e.jsx("path",{d:"M7.41 18.59 8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z"}),"UnfoldLessOutlined"),Lt="flex items-center px-4 h-42 text-muted border-b overflow-hidden";function zm({editor:s,size:t="md",justify:a="justify-center",hideInsertButton:n=!1}){const i=be(),[l,o]=d.useState(!1);return e.jsxs("div",{className:y(l?"h-84":"h-42"),children:[e.jsxs("div",{className:y(Lt,a,"relative z-20"),children:[e.jsx(gm,{editor:s,size:t}),e.jsx(We,{}),e.jsx(Yu,{editor:s,size:t}),e.jsx(We,{}),e.jsx(Sm,{editor:s,size:t}),e.jsx(Cm,{editor:s,size:t}),e.jsx(We,{}),i?e.jsx(k,{className:"flex-shrink-0",color:l?"primary":null,size:t,onClick:()=>{o(!l)},children:l?e.jsx(Fm,{}):e.jsx(Br,{})}):e.jsx(Tt,{editor:s,size:t,hideInsertButton:n})]}),e.jsx(Ke,{children:l&&e.jsx(ze.div,{className:y(Lt,a,"absolute flex h-full w-full"),initial:{y:"-100%"},animate:{y:0},exit:{y:"-100%"},children:e.jsx(Tt,{editor:s,size:t})})})]})}function Tt({editor:s,size:t="md",hideInsertButton:a}){return e.jsxs(d.Fragment,{children:[e.jsx(em,{editor:s,size:t}),e.jsx(We,{}),e.jsx(tm,{editor:s,size:t}),e.jsx(im,{editor:s,size:t}),!a&&e.jsx(xm,{editor:s,size:t}),e.jsx(We,{}),e.jsx(fm,{editor:s,size:t}),e.jsx(We,{}),e.jsx(_m,{editor:s,size:t}),e.jsx(om,{editor:s,size:t})]})}function Cn({editor:s,allowSlugEditing:t=!0,onSave:a,saveButton:n,isLoading:i=!1,backLink:l,slugPrefix:o="pages"}){const{isSticky:c,sentinelRef:u}=on(),m=be();return e.jsxs(d.Fragment,{children:[e.jsx("div",{ref:u}),e.jsxs("div",{className:y("sticky top-0 z-10 mb-20 bg-paper",c&&"shadow"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-20 border-b px-20 py-10 text-muted sm:justify-start",children:[!m&&e.jsxs(d.Fragment,{children:[e.jsx(v,{variant:"text",size:"sm",elementType:W,to:l,relative:"path",startIcon:e.jsx(Ur,{}),children:e.jsx(r,{message:"Back"})}),e.jsx("div",{className:"mr-auto",children:t&&e.jsx(Im,{name:"slug",showLinkIcon:!1,prefix:o})})]}),s&&e.jsx(Wu,{editor:s}),!m&&e.jsx(Ku,{editor:s}),a&&e.jsx(Am,{onSave:()=>{a(s.getHTML())},isLoading:i}),n]}),e.jsx(zm,{editor:s,size:"sm"})]})]})}function Am({onSave:s,isLoading:t}){const n=F().watch("title");return e.jsx(v,{variant:"flat",size:"sm",color:"primary",className:"min-w-90",disabled:t||!n,onClick:()=>s(),children:e.jsx(r,{message:"Save"})})}function Im({name:s,...t}){const{field:{onChange:a,onBlur:n,value:i="",ref:l}}=ds({name:s}),o=d.useRef(!1),{watch:c,setValue:u}=F();return d.useEffect(()=>{const m=c((h,{name:j})=>{j==="title"&&!o.current&&u("slug",h.title)});return()=>m.unsubscribe()},[c,u]),e.jsx(Bu,{className:y(!i&&"invisible"),onChange:m=>{o.current=!0,a(m)},onInputBlur:n,value:i,inputRef:l,...t})}const Pm=I.lazy(()=>us(()=>import("./article-body-editor-81a86e73.js"),["./article-body-editor-81a86e73.js","./main-512891a4.js","./main-ff1e4628.css","./highlight-material-palenight-28f86fa5.js","./highlight-material-palenight-c0ff5600.css"],import.meta.url));function Em(){const s=dr();return s.data?e.jsxs(d.Fragment,{children:[e.jsx(ur,{query:s}),e.jsx($m,{page:s.data.page})]}):e.jsx("div",{className:"relative w-full h-full",children:e.jsx(mr,{query:s})})}function $m({page:s}){const t=ce(),a=Du(),n=O({defaultValues:{title:s.title,slug:s.slug,body:s.body}}),i=l=>{a.mutate({...n.getValues(),body:l},{onSuccess:()=>t("../..",{relative:"path"})})};return e.jsx(d.Suspense,{fallback:e.jsx(Ve,{}),children:e.jsx(Pm,{initialContent:s.body,children:(l,o)=>e.jsx(os,{children:e.jsxs(Yt,{...n,children:[e.jsx(Cn,{editor:o,backLink:"../..",isLoading:a.isPending,onSave:i}),e.jsx("div",{className:"mx-20",children:e.jsxs("div",{className:"prose dark:prose-invert mx-auto flex-auto",children:[e.jsx(Sn,{}),l]})})]})})})})}function Mm(s){const t=s||"custom-pages";return R({mutationFn:a=>Lm(a,t),onError:a=>re(a),onSuccess:async()=>{await T.invalidateQueries({queryKey:["custom-pages"]}),await T.invalidateQueries({queryKey:Z(t)}),V(x("Page created"))}})}function Lm(s,t){return $.post(`${t}`,s).then(a=>a.data)}const Tm=I.lazy(()=>us(()=>import("./article-body-editor-81a86e73.js"),["./article-body-editor-81a86e73.js","./main-512891a4.js","./main-ff1e4628.css","./highlight-material-palenight-28f86fa5.js","./highlight-material-palenight-c0ff5600.css"],import.meta.url));function Dm(){const s=ce(),t=Mm(),a=O(),n=i=>{t.mutate({...a.getValues(),body:i},{onSuccess:()=>s("../",{relative:"path"})})};return e.jsx(d.Suspense,{fallback:e.jsx(Ve,{}),children:e.jsx(Tm,{children:(i,l)=>e.jsx(os,{children:e.jsxs(Yt,{...a,children:[e.jsx(Cn,{editor:l,isLoading:t.isPending,onSave:n,backLink:"../"}),e.jsx("div",{className:"mx-20",children:e.jsxs("div",{className:"prose dark:prose-invert mx-auto flex-auto",children:[e.jsx(Sn,{}),i]})})]})})})})}const Rm=""+new URL("font-6e80de77.svg",import.meta.url).href;function Vm({state:{filters:s,setFilters:t}}){const{trans:a}=D();return e.jsxs("div",{className:"mb-24 items-center gap-24 @xs:flex",children:[e.jsx(Ae,{className:"mb-12 flex-auto @xs:mb-0",value:s.query,onChange:n=>{t({...s,query:n.target.value})},startAdornment:e.jsx(Ns,{}),placeholder:a(x("Search fonts"))}),e.jsxs(hs,{className:"flex-auto",selectionMode:"single",selectedValue:s.category,onSelectionChange:n=>{t({...s,category:n})},children:[e.jsx(p,{value:"",children:e.jsx(r,{message:"All categories"})}),e.jsx(p,{value:"serif",children:e.jsx(r,{message:"Serif"})}),e.jsx(p,{value:"sans-serif",children:e.jsx(r,{message:"Sans serif"})}),e.jsx(p,{value:"display",children:e.jsx(r,{message:"Display"})}),e.jsx(p,{value:"handwriting",children:e.jsx(r,{message:"Handwriting"})}),e.jsx(p,{value:"monospace",children:e.jsx(r,{message:"Monospace"})})]})]})}function qm(s){const t=xr({usage:"search",...s});return{startsWith(a,n){return n.length===0?!0:(a=a.normalize("NFC"),n=n.normalize("NFC"),t.compare(a.slice(0,n.length),n)===0)},endsWith(a,n){return n.length===0?!0:(a=a.normalize("NFC"),n=n.normalize("NFC"),t.compare(a.slice(-n.length),n)===0)},contains(a,n){if(n.length===0)return!0;a=a.normalize("NFC"),n=n.normalize("NFC");let i=0;const l=n.length;for(;i+l<=a.length;i++){const o=a.slice(i,i+l);if(t.compare(n,o)===0)return!0}return!1}}}const Om=[{label:x("System"),family:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',category:"sans-serif"},{family:"Impact, Charcoal, sans-serif",category:"sans-serif"},{family:"Arial, Helvetica Neue, Helvetica, sans-serif",category:"serif"},{family:'"Comic Sans MS", cursive, sans-serif',category:"Handwriting"},{family:"Century Gothic, sans-serif",category:"sans-serif"},{family:'"Courier New", Courier, monospace',category:"monospace"},{family:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',category:"sans-serif"},{family:'"Times New Roman", Times, serif',category:"serif"},{family:'"Lucida Console", Monaco, monospace',category:"monospace"},{family:'"Andele Mono", monospace, sans-serif',category:"sans-serif"},{family:"Verdana, Geneva, sans-serif",category:"sans-serif"},{family:'"Helvetica Neue", Helvetica, Arial, sans-serif',category:"sans-serif"}];function Bm({value:s,onChange:t}){const{data:a,isLoading:n}=ve(["googleFonts"]),[i,l]=d.useState(0),[o,c]=d.useState({query:"",category:(s==null?void 0:s.category)??""}),{contains:u}=qm({sensitivity:"base"}),m=d.useCallback(C=>{c(C),l(0)},[]),h=d.useMemo(()=>Om.concat((a==null?void 0:a.googleFonts)??[]),[a==null?void 0:a.googleFonts]),j=d.useMemo(()=>h.filter(C=>{var f;return u(C.family,o.query)&&(!o.category||((f=C.category)==null?void 0:f.toLowerCase())===o.category.toLowerCase())}),[h,o,u]),b=d.useMemo(()=>la(j,20),[j]),S=b[i];return d.useEffect(()=>{const C="font-selector";S!=null&&S.length&&hr(S,{id:C})},[S,i]),{fonts:S||[],currentPage:i,filteredFonts:j||[],setCurrentPage:l,isLoading:n,filters:o,setFilters:m,value:s,onChange:t,pages:b}}function Um({state:{currentPage:s=0,setCurrentPage:t,filteredFonts:a,pages:n}}){const i=(a==null?void 0:a.length)||0;return e.jsxs("div",{className:"flex items-center justify-end gap-24 text-sm mt-30 pt-14 border-t",children:[i>0&&e.jsx("div",{children:e.jsx(r,{message:":from - :to of :total",values:{from:s*20+1,to:Math.min((s+1)*20,i),total:i}})}),e.jsxs("div",{className:"text-muted",children:[e.jsx(k,{disabled:s<1,onClick:()=>{t(Math.max(0,s-1))},children:e.jsx(Is,{})}),e.jsx(k,{disabled:s>=n.length-1,onClick:()=>{t(s+1)},children:e.jsx(gs,{})})]})]})}function Hm(s){const t=Bm(s);return e.jsxs("div",{className:s.className,children:[e.jsx(Vm,{state:t}),e.jsx(Ke,{initial:!1,mode:"wait",children:e.jsx(Wm,{state:t})}),e.jsx(Um,{state:t})]})}function Wm({state:s}){const{isLoading:t,fonts:a}=s,n="grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start";return t?e.jsx(Gm,{className:n}):a!=null&&a.length?e.jsx(ze.div,{...Ge,className:n,children:a==null?void 0:a.map(i=>e.jsx(Km,{font:i,state:s},i.family))},"font-list"):e.jsx(_s,{className:"mt-60",size:"sm",image:e.jsx(Fs,{src:Rm}),title:e.jsx(r,{message:"No matching fonts"}),description:e.jsx(r,{message:"Try another search query or different category"})})}function Km({font:s,state:{value:t,onChange:a}}){const n=(t==null?void 0:t.family)===s.family,i=s.family.split(",")[0].replace(/"/g,"");return e.jsxs(As,{display:"block",onClick:()=>{a(s)},children:[e.jsx("span",{className:y("flex aspect-square items-center justify-center rounded-panel border text-4xl transition-bg-color hover:bg-hover md:text-5xl",n&&"ring-2 ring-primary ring-offset-2"),children:e.jsx("span",{style:{fontFamily:s.family},children:"Aa"})}),e.jsx("span",{className:y("mt-6 block overflow-hidden overflow-ellipsis whitespace-nowrap text-sm",n&&"text-primary"),children:s.label?e.jsx(r,{...s.label}):i})]},s.family)}function Gm({className:s}){const t=Array.from(Array(20).keys());return e.jsx(ze.div,{...Ge,className:s,children:t.map(a=>e.jsxs("div",{children:[e.jsx("div",{className:"aspect-square",children:e.jsx(He,{display:"block",variant:"rect"})}),e.jsx(He,{className:"mt-6 text-sm"})]},a))},"font-list-skeleton")}function Qm(){const{setValue:s,watch:t}=F(),{themeIndex:a}=ie(),n=`appearance.themes.all.${a}.font`;return e.jsx(Hm,{value:t(n),onChange:i=>{s(n,i,{shouldDirty:!0}),Y().preview.setThemeFont(i)}})}const Jm={"rounded-none":{label:x("Square"),value:"0px"},"rounded-sm":{label:x("Small"),value:"0.125rem"},"rounded-md":{label:x("Medium"),value:"0.25rem"},"rounded-lg":{label:x("Large"),value:"0.5rem"},"rounded-xl":{label:x("Larger"),value:"0.75rem"},"rounded-full":{label:x("Pill"),value:"9999px"}};function Ym(){return e.jsxs("div",{className:"space-y-24",children:[e.jsx(Os,{label:e.jsx(r,{message:"Button rounding"}),name:"button-radius"}),e.jsx(Os,{label:e.jsx(r,{message:"Input rounding"}),name:"input-radius"}),e.jsx(Os,{label:e.jsx(r,{message:"Panel rounding"}),name:"panel-radius",hidePill:!0})]})}function Os({label:s,name:t,hidePill:a}){const{themeIndex:n}=ie(),{watch:i,setValue:l}=F(),o=`appearance.themes.all.${n}.values.--be-${t}`,c=i(o);return e.jsxs("div",{children:[e.jsx("div",{className:"mb-10 text-sm font-semibold",children:s}),e.jsx("div",{className:"grid grid-cols-3 gap-10 text-sm",children:Object.entries(Jm).filter(([u])=>!a||!u.includes("full")).map(([u,{label:m,value:h}])=>e.jsx(Zm,{radius:u,isActive:h===c,onClick:()=>{l(o,h,{shouldDirty:!0})},children:e.jsx(r,{...m})},u))})]})}function Zm({radius:s,children:t,isActive:a,onClick:n}){return e.jsx(As,{display:"block",className:y("h-36 border-2 hover:bg-hover",s,a&&"border-primary"),onClick:n,children:t})}const Xm=I.lazy(()=>us(()=>import("./admin-report-page-82944beb.js"),["./admin-report-page-82944beb.js","./main-512891a4.js","./main-ff1e4628.css","./TrendingUp-4c4fdba9.js","./UnfoldMore-0121ab8e.js","./Edit-2020f921.js","./use-resume-subscription-ff75954a.js"],import.meta.url)),ex=[{path:"appearance",element:e.jsx(J,{permission:"appearance.update",children:e.jsx(Ti,{})}),children:[{index:!0,element:e.jsx(od,{})},{path:"general",element:e.jsx(bl,{})},{path:"custom-code",element:e.jsx(Cl,{})},{path:"themes",element:e.jsx(Sl,{})},{path:"themes/:themeIndex",element:e.jsx(Io,{})},{path:"themes/:themeIndex/font",element:e.jsx(Qm,{})},{path:"themes/:themeIndex/radius",element:e.jsx(Ym,{})},{path:"menus",element:e.jsx(qi,{})},{path:"menus/:menuIndex",element:e.jsx(Yi,{})},{path:"menus/:menuIndex/items/:menuItemIndex",element:e.jsx(pl,{})},...Object.values(oa.sections).flatMap(s=>s.routes||[])]},{path:"/",element:e.jsx(Gr,{}),children:[...Tu,{path:"/",element:e.jsx(I.Suspense,{fallback:e.jsx(Ve,{screen:!0}),children:e.jsx(Xm,{})})},{path:"users",element:e.jsx(J,{permission:"users.update",children:e.jsx(_i,{})})},{path:"users/new",element:e.jsx(J,{permission:"users.update",children:e.jsx(Vc,{})})},{path:"users/:userId/edit",element:e.jsx(J,{permission:"users.update",children:e.jsx(Lc,{})})},{path:"roles",element:e.jsx(J,{permission:"roles.update",children:e.jsx(ud,{})})},{path:"roles/new",element:e.jsx(J,{permission:"roles.update",children:e.jsx(Ed,{})})},{path:"roles/:roleId/edit",element:e.jsx(J,{permission:"roles.update",children:e.jsx(Fd,{})})},{path:"subscriptions",element:e.jsx(J,{permission:"subscriptions.update",children:e.jsx(au,{})})},{path:"plans",element:e.jsx(J,{permission:"plans.update",children:e.jsx(ju,{})})},{path:"plans/new",element:e.jsx(J,{permission:"plans.update",children:e.jsx(Eu,{})})},{path:"plans/:productId/edit",element:e.jsx(J,{permission:"plans.update",children:e.jsx(zu,{})})},{path:"custom-pages",element:e.jsx(J,{permission:"custom_pages.update",children:e.jsx(Al,{})})},{path:"custom-pages/new",element:e.jsx(J,{permission:"custom_pages.update",children:e.jsx(Dm,{})})},{path:"custom-pages/:pageId/edit",element:e.jsx(J,{permission:"custom_pages.update",children:e.jsx(Em,{})})},{path:"tags",element:e.jsx(J,{permission:"tags.update",children:e.jsx(Rd,{})})},{path:"localizations",element:e.jsx(J,{permission:"localizations.update",children:e.jsx(Yc,{})})},{path:"localizations/:localeId/translate",element:e.jsx(ed,{})},{path:"files",element:e.jsx(J,{permission:"files.update",children:e.jsx(Hd,{})})},{path:"ads",element:e.jsx(J,{permission:"settings.update",children:e.jsx(rd,{})})},{path:"settings",element:e.jsx(J,{permission:"settings.update",children:e.jsx(El,{})}),children:[{index:!0,element:e.jsx(Ot,{to:"general",replace:!0})},{path:"general",element:e.jsx(ql,{})},{path:"subscriptions",element:e.jsx(To,{})},{path:"authentication",element:e.jsx(Vo,{})},{path:"uploading",element:e.jsx(ec,{})},{path:"outgoing-email",element:e.jsx(gc,{})},{path:"cache",element:e.jsx(bc,{})},{path:"analytics",element:e.jsx(Ic,{})},{path:"logging",element:e.jsx(wc,{})},{path:"queue",element:e.jsx(kc,{})},{path:"recaptcha",element:e.jsx(_c,{})},{path:"gdpr",element:e.jsx($u,{})},...$o]}]},{path:"*",element:e.jsx(pr,{})}];function sx(){return gr(ex)}const ix=Object.freeze(Object.defineProperty({__proto__:null,default:sx},Symbol.toStringTag,{value:"Module"}));export{Nn as C,Bi as D,qd as F,cm as H,nm as I,ki as L,um as N,eu as P,Hu as R,mm as S,qc as T,Uu as U,Od as V,ti as a,vm as b,wm as c,bm as d,ym as e,Gu as f,lm as g,jm as h,pm as i,km as j,Nm as k,Qu as l,Zu as m,Xu as n,Ju as o,ia as p,su as q,dm as r,Mc as s,ao as t,cu as u,eo as v,Fm as w,qm as x,Rs as y,ix as z};
//# sourceMappingURL=admin-routes-725b592d.js.map
