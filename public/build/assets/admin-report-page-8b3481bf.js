import{a as g,k as h,b as j,j as t,r as i,am as b,A as D,n as m,y as d,z as y,d as u,v as N,B as R,ch as v,E as S,T as F}from"./main-73bed82e.js";import{T as w,a as I,b as P}from"./TrendingUp-5ed9aa18.js";import{a6 as x,a7 as V,a8 as T,a9 as p,aa as A,ab as E,ac as k}from"./UnfoldMore-02e8a86f.js";import{F as z}from"./admin-routes-d936ef18.js";import"./Edit-b97429be.js";import"./use-resume-subscription-ba9afde3.js";const f="admin/reports";function C(e={}){return g({queryKey:[f,e],queryFn:()=>M(e),placeholderData:h})}function M({types:e,dateRange:n}){const s={};return e&&(s.types=e.join(",")),n&&(s.startDate=n.start.toAbsoluteString(),s.endDate=n.end.toAbsoluteString(),s.timezone=n.start.timeZone),j.get(f,{params:s}).then(a=>a.data)}const B="gap-12 md:gap-24 mb-12 md:mb-24";function q({report:e,isLoading:n}){return e==null||e.pageViews.total,t.jsx(i.Fragment,{})}function H({report:e,isLoading:n}){return t.jsx("div",{className:`flex h-[97px] flex-shrink-0 items-center overflow-x-auto ${B}`,children:e==null?void 0:e.map(s=>t.jsx(L,{datum:s,isLoading:n},s.name))})}function L({datum:e,isLoading:n=!1}){let s;if(i.isValidElement(e.icon))s=i.cloneElement(e.icon,{size:"lg"});else{const a=b(e.icon);s=t.jsx(a,{size:"lg"})}return t.jsxs("div",{className:"rounded-panel flex h-full flex-auto items-center gap-18 whitespace-nowrap border p-20",children:[t.jsx("div",{className:"flex-shrink-0 rounded-lg bg-primary-light/20 p-10 text-primary",children:s}),t.jsxs("div",{className:"flex-auto",children:[t.jsx("div",{className:"flex items-center justify-between gap-20",children:t.jsx("div",{className:"text-lg font-bold text-main",children:t.jsx(D,{initial:!1,mode:"wait",children:n?t.jsx(m.div,{...d,children:t.jsx(y,{className:"min-w-24"})},"skeleton"):t.jsx(m.div,{...d,children:t.jsx(Q,{datum:e})},"value")})})}),t.jsxs("div",{className:"flex items-center justify-between gap-20",children:[t.jsx("h2",{className:"text-sm text-muted",children:e.name}),(e.percentageChange!=null||e.previousValue!=null)&&t.jsx("div",{className:"flex items-center gap-10",children:t.jsx(G,{datum:e})})]})]})]},e.name)}function Q({datum:e}){switch(e.type){case"fileSize":return t.jsx(z,{bytes:e.currentValue});case"percentage":return t.jsx(x,{value:e.currentValue,style:"percent",maximumFractionDigits:1});default:return t.jsx(x,{value:e.currentValue})}}function G({datum:e}){const n=K(e);let s;return n>0?s=t.jsx(w,{size:"md",className:"text-positive"}):n===0?s=t.jsx(I,{className:"text-muted"}):s=t.jsx(P,{className:"text-danger"}),t.jsxs(i.Fragment,{children:[s,t.jsxs("div",{className:"text-sm font-semibold text-muted",children:[n,"%"]})]})}function K({percentageChange:e,previousValue:n,currentValue:s}){return e!=null||n==null||s==null?e??0:n===0?100:Math.round((s-n)/n*100)}const O={month:"short",day:"2-digit"};function U({value:e,onChange:n,disabled:s,compactOnMobile:a=!0,enableCompare:r=!1,granularity:o="minute"}){const l=u();return t.jsxs(N,{type:"popover",onClose:c=>{c&&n(c)},children:[t.jsx(R,{variant:"outline",color:"chip",endIcon:t.jsx(V,{}),disabled:s,children:t.jsx(T,{start:e.start,end:e.end,options:l&&a?O:v.short})}),t.jsx(Z,{value:e,enableCompare:r,granularity:o})]})}function Z({value:e,enableCompare:n,granularity:s}){const a=u(),r=p({granularity:s,defaultValue:{start:e.start,end:e.end,preset:e.preset},closeDialogOnSelection:!1}),o=!!e.compareStart&&!!e.compareEnd,l=p({granularity:s,defaultValue:o?{start:e.compareStart,end:e.compareEnd,preset:e.comparePreset}:A[0].getRangeValue(r.selectedValue)});return t.jsx(E,{state:r,compareState:n?l:void 0,compareVisibleDefault:o,showInlineDatePickerField:!a})}function ee(){const[e,n]=i.useState(()=>k[2].getRangeValue()),{isLoading:s,data:a}=C({dateRange:e}),r=t.jsx(F,{message:"Visitors report"});return t.jsxs("div",{className:"min-h-full gap-12 overflow-x-hidden p-12 md:gap-24 md:p-24",children:[t.jsxs("div",{className:"mb-24 items-center justify-between gap-24 md:flex",children:[t.jsx(S,{children:r}),t.jsx("h1",{className:"mb-24 text-3xl font-light md:mb-0",children:r}),t.jsx(U,{value:e,onChange:n})]}),t.jsx(H,{report:a==null?void 0:a.headerReport}),t.jsx(q,{report:a==null?void 0:a.visitorsReport,isLoading:s})]})}export{ee as default};
//# sourceMappingURL=admin-report-page-8b3481bf.js.map
